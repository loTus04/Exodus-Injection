(window.webpackJsonp=window.webpackJsonp||[]).push([[280],{4268:function(e,t,i){"use strict";i.r(t);var s=i(550),n=i(62),r=i.n(n),a=i(913),o=i(16),c=i.n(o),h=i(370),d=i.n(h),u=i(35),m=i.n(u),l=i(9),g=i(22),k=i(4428),f=i(31),T=i(469),y=i(896);class LUNCCoin extends(Object(T.g)(Object(T.h)(l.n))){constructor({alias:e,feeData:t,explorers:i,txWebUrl:s,socket:n,isTestnet:a}){super({alias:e,name:"Terra Classic",ticker:"LUNC",decimal:6,derivation:"m/44'/330'/0'/0/0",unspendableBalance:"0",txWebUrl:s,explorers:i,socket:n,feeData:t,id:"LUNC",denom:"uluna"}),this.BigNumber=r.a,this.isTestnet=a,this.plugins=[new y.a],this.gasLimit=t.gasLimit,this.gasLimitCoefficient=t.gasLimitCoefficient,this.gasPriceCoefficient=t.gasPriceCoefficient,this.defaultGasPrice=t.defaultGasPrice,this.defaultMaxGasPrice=t.defaultMaxGasPrice,this.bannedTokens=[],this.resendTimeout=t.resendTimeout,this.feeDenom="uluna",this.tokenGasLimit=t.tokenGasLimit,this.tokenGasPriceCoefficient=t.tokenGasPriceCoefficient,this.tokenGasLimitCoefficient=t.tokenGasLimitCoefficient,this.tokenFeeData={gasLimit:this.tokenGasLimit,gasPriceCoefficien:this.tokenGasPriceCoefficient,gasLimitCoefficient:this.tokenGasLimitCoefficient};const o=i.find(({className:e})=>"TerraLCDExplorer"===e);this.initProvider(o),this.fields.paymentId=!0,this.tokens={},this.nonce=0,this.estimateGasThrottled=m.a.throttle(this.estimateGas,800),this.eventEmmiter.on(this.ticker+"::confirmed-socket-tx",(e,t,i)=>{this.bus.$emit("socket::tx::confirmed",{id:e,ticker:i})})}get instance(){if(!this.coreLibrary){const e=this.config.explorers.find(({className:e})=>"TerraLCDExplorer"===e);this.initProvider(e)}return{id:this.id,ticker:this.ticker,name:this.name,decimal:this.decimal,address:this.address,parent:this.parent,feeDenom:()=>this.feeDenom,BN:c(),toCurrencyUnit:e=>this.toCurrencyUnit(e),toMinimalUnit:e=>this.toMinimalUnit(e),coreLibrary:this.coreLibrary,alias:this.alias,feeCoefficient:this.coefficient,feeDefault:this.feeData&&this.feeData.fee,gasLimit:this.gasLimit,getTickerFromDenom:e=>this.getTickerFromDenom(e),isTestnet:()=>this.isTestnet,getTickerFromContractAddress:e=>this.getTickerFromContractAddress(e),tokens:()=>this.tokens,denom:this.denom}}isFeeDynamic(){return!0}getTickerFromDenom(e){if(!e)return"";if("uluna"===e)return"LUNC";if("u"===e[0]){const t=e.slice(1);return t.length>3?t==="LUNC".toLowerCase()?"LUNC":t.toUpperCase()+"C":t.slice(0,2).toUpperCase()+"TC"}return e}getTickerFromContractAddress(e){var t;return null===(t=this.tokens[e])||void 0===t?void 0:t.ticker}createToken(...e){return new k.d(this.ticker,...e)}initProvider(e){try{this.coreLibrary=new s.LCDClient({chainID:e.chainID,URL:e.baseUrl,isClassic:!0})}catch(t){g.a.error({instance:this,error:t}),setTimeout(()=>this.initProvider(e),1e4)}}getExcludedTokenList(){return[]}isTokenExcluded(e){var t,i;const s=null===(t=e.contract)||void 0===t?void 0:t.toLowerCase(),n=null===(i=e.denom)||void 0===i?void 0:i.toLowerCase();return!this.getExcludedTokenList().some(({denom:e,contract:t})=>n&&n===e||s&&s===t)}async loadWallet(e,t){try{if(!Object(a.validateMnemonic)(t))throw new Error(this.ticker+" invalid mnemonic");const e=new s.MnemonicKey({mnemonic:t});this.privateKey=e.privateKey.toString("hex"),this.address=e.accAddress,this.publicKey=e.publicKey.key}catch(e){throw new Error(this.ticker+" can't get the wallet!!!")}return this}getAddress(){return this.privateKey?this.address:new Error(this.ticker+" private key is empty!!!")}validateAddress(e){return s.AccAddress.validate(e)}getGasPrice(e=!1,t=!1){const i=this.defaultGasPrice[this.feeDenom];let s=new this.BigNumber(i);return s=e?s:s.plus(t?this.tokenGasPriceCoefficient:this.gasPriceCoefficient),s=s.times(10**9).dividedBy(10**6).integerValue(this.BigNumber.ROUND_CEIL).times(10**9),new this.BN(s.toFixed())}getMsgSend(e,t,i,n=this.denom){return new s.MsgSend(t,i,{[n]:e})}async getFee({userGasPrice:e,gasLimit:t,multiplier:i,contract:s,denom:n,address:r="terra1y6z0mzhlgkxr6q0xrykqalce3vhnvujurv96e6",sendAmount:a,custom:o}={}){if(!this.validateAddress(r))throw new Error(this.ticker+" invalid address");const c=t||await this.estimateGasThrottled(a,r,s,n,o);if(!c)throw new Error(this.ticker+" invalid sendAmount");const h=this.BigNumber(10**9).dividedBy(10**6),d=new this.BigNumber(this.BigNumber(e).isGreaterThan(0)?e:await this.getGasPrice(!0)).dividedBy(10**9).dividedBy(h).plus(i||(n&&n!==this.denom||s?this.tokenGasPriceCoefficient:this.gasPriceCoefficient)).times(h),u=this.BigNumber(c).times(d).dividedToIntegerBy(h);return new this.BN(u.toFixed())}async availableBalance(e){return this.BigNumber(this.balance).isGreaterThan(0)?this.toCurrencyUnit(this.BigNumber(this.balance).minus(e||0).toFixed()):"0"}async createTransaction({address:e,amount:t,userGasPrice:i,gasLimit:n,multiplier:r,msg:a,memo:o,contract:c,denom:h=this.denom}){const d=a||this.getMsgSend(t,this.address,e,this.denom),u=this.restoreTerraWalletFromPrivateKey({privateKey:this.privateKey}),m=this.BigNumber(n).isGreaterThan(0)?n:await this.estimateGasByMsg(d,c||h&&this.denom!==h,o),l=await this.getFee({userGasPrice:i,gasLimit:m,multiplier:r,denom:h,contract:c,custom:o}),g=new s.Fee(Number(m),{[this.feeDenom]:l.toString()});return u.createAndSignTx({msgs:[d],fee:g,feeDenoms:[this.feeDenom],memo:o})}restoreTerraWalletFromPrivateKey(e){try{const t=Buffer.from(e.privateKey,"hex"),i=Object(a.validateMnemonic)(e.privateKey)?new s.MnemonicKey({mnemonic:e.privateKey}):new s.RawKey(t);return this.coreLibrary.wallet(i)}catch(e){throw new Error(this.ticker+" private key is invalid or empty!!!")}}async getNonce(){try{const e=await this.coreLibrary.auth.accountInfo(this.address);this.nonce=e.getSequenceNumber()}catch(e){console.error(this.ticker+" failed to get nonce")}return this.nonce}async estimateGasByMsg(e,t,i){const s=await this.getNonce(),n=await this.getProvider("estimate_fee").estimateFee(s,e,i).catch(e=>(console.error(e),null)),r=t?this.tokenGasLimit:this.gasLimit;return new this.BigNumber((null==n?void 0:n.gas_limit)||r).plus(t?this.tokenGasLimitCoefficient:this.gasLimitCoefficient).integerValue(this.BigNumber.ROUND_CEIL).toFixed()}async estimateGas(e,t,i=null,s=this.denom,n){if(!this.validateAddress(t))throw new Error(this.ticker+" invalid address");if(!this.address)throw new Error(this.ticker+" address not found");const r=i?this.createSendTokenContract(i,this.address,t,e):this.getMsgSend(e,this.address,t,s);return this.estimateGasByMsg(r,i||s&&this.denom!==s,n)}createSendTokenContract(e,t,i,n){return new s.MsgExecuteContract(t,e,{transfer:{amount:n,recipient:i}})}async getUserTokenList(...e){try{const[t,i]=await Promise.all([this.getProvider("token").getUserTokenList(this.address,!0,...e),this.getProvider("denom").getUserDenomList(this.address,...e)]),s=Object.values(this.tokens).map(e=>e.ticker).concat(this.ticker);return t.concat(i).filter(e=>!s.includes(e.symbol))}catch(e){return e.message=`[${this.ticker}] getUserTokenList error: ${e.message||"Unknown error"}.`,g.a.error({instance:this,error:e}),[]}}async getTokenList(){try{return f.a.get("luna-classic-tokens")}catch(e){return g.a.error({instance:this,error:e}),[]}}getTokenObject(e,t="user"){return"user"===t?this.getTokenFromUserList(e):this.getTokenFromCommonList(e)}getTokenFromUserList(e){return{...this.getTokenBase(e),visibility:!0,denom:e.denom}}getTokenBase(e){var t;const i=null===(t=e.contract)||void 0===t?void 0:t.toLowerCase();return{name:e.name,ticker:e.ticker,decimal:Number(e.decimal)||0,contract:i,parentTicker:this.ticker,uniqueField:i,isCustom:!1}}getTokenFromCommonList(e){var t;return{...this.getTokenBase(e),visibility:!1!==e.visibility,denom:null===(t=e.denom)||void 0===t?void 0:t.toLowerCase()}}gasPrice(){return this.getGasPrice()}setPrivateKey(...e){super.setPrivateKey(...e),this.getNonce()}getGasRange(e="send"){return this.feeData[e]}async getInfo(e){if(!this.address)throw new Error(this.ticker+" address not found");if(!e||!e.onlyCoin&&!1!==e.isToken){var t;const i=e?null===(t=Object.values(this.tokens).find(t=>t.ticker===e.ticker))||void 0===t?void 0:t.denom:null,s=e?{[e.contract||e.ticker]:{denom:i,...e}}:this.tokens;await Promise.all(Object.values(s).map(async e=>{try{var t;let i;if(e.contract?i=await this.getProvider("node").getTokenBalanceByContractAddress({address:this.address,contractAddress:e.contract.toLowerCase()}):e.denom&&(i=await this.getProvider("balance").getBalance(this.address,!1,e.denom)),!i)throw new Error(`${this.ticker} can't get balance of token with ${e.contract?"contract address":"denom"} ${e.contract||e.denom}`);[e.contract,null===(t=e.contract)||void 0===t?void 0:t.toLowerCase(),e.ticker].filter(e=>e&&this.tokens[e]).forEach(e=>{this.tokens[e].balance=i.toString()})}catch(e){console.error(e)}}))}try{const e=await this.getProvider("balance").getBalance(this.address,!1,this.denom);if(!e)throw new Error(this.ticker+" can't get balance");this.balance=e}catch(e){console.error(e)}return{balance:this.balance}}async createTokenTransaction({address:e,amount:t,userGasPrice:i,gasLimit:s,contract:n,multiplier:r,denom:a,memo:o}){const c=n?this.createSendTokenContract(n,this.address,e,t):this.getMsgSend(t,this.address,e,a);return this.createTransaction({address:e,amount:"0x0",msg:c,userGasPrice:i,gasLimit:s,multiplier:r,memo:o,denom:a,contract:n})}async checkTransaction(e){super.checkTransaction({feeTicker:this.getTickerFromDenom(this.feeDenom),...e})}createTokens(e=[],t){const i=e;0!==e.length?(i.forEach(e=>{var i,s;const n=d.a.hash(e.ticker.toLowerCase()+(null===(i=e.contract)||void 0===i?void 0:i.toLowerCase())),r=t.getWallet(n);if(r&&r.uniqueField===e.uniqueField)return void(r.visibility=e.visibility);const a=this.createToken(e.name,e.ticker,e.decimal,null===(s=e.contract)||void 0===s?void 0:s.toLowerCase(),e.uniqueField,JSON.parse(e.isCustom),!1!==e.visibility,this.tokenFeeData,e.denom);t.push(a),t.store.walletsCollection[a.alias].set(a.id.toUpperCase(),a),this.tokens[e.contract||e.ticker]=a}),this.bus&&this.bus.$emit("update::coin-list")):console.warn(this.ticker,"No tokens to create")}async getBalance(){return(await this.getInfo()).balance}}t.default=LUNCCoin},4428:function(e,t,i){"use strict";i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return c})),i.d(t,"g",(function(){return h})),i.d(t,"a",(function(){return d})),i.d(t,"h",(function(){return u})),i.d(t,"i",(function(){return m})),i.d(t,"e",(function(){return k})),i.d(t,"d",(function(){return f})),i.d(t,"f",(function(){return THETAToken_THETAToken}));var s=i(31),n=i(394),r=i(4),a=i(3);class ETHToken_ETHToken extends n.a{constructor(...e){super(...e),this.gasLimit="150000",this.coefficient=1}async getInfo(){return{balance:String(this.balance),transactions:this.transactions}}async getFee({amount:e=0,isSendAll:t,gasPrice:i,gasLimit:s}){const n=Number(i.toString())*Number(this.coefficient),r=s||this.gasLimit;return new this.BN(r).mul(new this.BN(n))}getFeeSettings(){return s.a.get("eth-gas-price")}async createTransaction({address:e,amount:t,custom:i,userGasPrice:s,gasLimit:n=this.gasLimit,multiplier:r=this.multiplier,nonce:a}){return{address:e,amount:t,custom:i,userGasPrice:s,gasLimit:n,contract:this.contract,multiplier:r,nonce:a}}async sendTransaction(e){return new Promise((t,i)=>{this.web3.eth.sendSignedTransaction(e).on("transactionHash",e=>{t({txid:e})}).catch(e=>{const t=this.parent.coreLibrary.currentProvider.host,s=new r.d({type:a.s,error:e,url:t,instance:this});i(s)})})}}var o=ETHToken_ETHToken;class BSCToken_BSCToken extends n.a{constructor(...e){super(...e),this.gasLimit="150000",this.coefficient=1}async getInfo(){return{balance:String(this.balance),transactions:this.transactions}}async getFee({amount:e=0,isSendAll:t,gasPrice:i,gasLimit:s}){const n=Number(i.toString())*Number(this.coefficient),r=s||this.gasLimit;return new this.BN(r).mul(new this.BN(n))}async createTransaction({address:e,amount:t,custom:i,userGasPrice:s,gasLimit:n=this.gasLimit,multiplier:r=this.multiplier,nonce:a}){return{address:e,amount:t,custom:i,userGasPrice:s,gasLimit:n,contract:this.contract,multiplier:r,nonce:a}}async sendTransaction(e){return new Promise((t,i)=>{this.web3.eth.sendSignedTransaction(e).on("transactionHash",e=>{t({txid:e})}).catch(e=>{const t=this.parent.coreLibrary.currentProvider.host,s=new r.d({type:a.s,error:e,url:t,instance:this});i(s)})})}}var c=BSCToken_BSCToken;class TRXToken_TRXToken extends n.a{async createTransaction({address:e,amount:t}){return{address:e,amount:t,contract:this.contract,transfer:!0,feeLimit:1e7}}getUserTicker(){return-1!==this.ticker.indexOf("-")&&this.ticker.split("-")[1]||this.ticker}}var h=TRXToken_TRXToken;class BNBToken_BNBToken extends n.a{constructor(...e){super(...e),this.fields.paymentId=!0,this.balances={}}async availableBalance(){return this.balances&&this.balances.available?this.balances.available:this.divisibleBalance?String(this.divisibleBalance):"0"}async getInfo(){return await this.getBalance(),{balance:String(this.balance),transactions:this.transactions}}async createTransaction({address:e,amount:t,memo:i}){return{address:e,amount:t,memo:i,asset:this.ticker}}async getBalance(){return this.balance}async getTransactions(){return this.transactions}getUserTicker(){return this.ticker.split("-")[0]}}var d=BNBToken_BNBToken;class VETToken_VETToken extends n.a{constructor(...e){super(...e),this.fee="60"}get feeTicker(){return"VTHO"}async getInfo(){return{balance:String(this.balance),transactions:this.transactions}}async getFee(){return new this.BN(this.toMinimalUnit(this.fee))}async createTransaction({address:e,amount:t}){const i=Number(this.toCurrencyUnit(await this.getFee())),s=`0xa9059cbb${this.addLeadingZero(e.substring(2),64)}${this.addLeadingZero(new this.BN(t).toString(16),64)}`;return{contract:this.contract,amount:"0",dataToSend:s,fee:i}}async isAvailableForFee(){const e=await this.getFee();return this.indivisibleBalance.gte(e)}async availableBalance(){const e=await this.getFee(),t=new this.BN(this.balance).sub(e);return t.lt(new this.BN(0))?"0":this.toCurrencyUnit(t)}addLeadingZero(e,t){return String(e).padStart(t,"0")}}var u=VETToken_VETToken;class ZILToken_ZILToken extends n.a{async createTransaction({address:e,amount:t}){return{address:e,amount:t,contract:this.contract}}}var m=ZILToken_ZILToken,l=i(16),g=i.n(l);class MATICToken_MATICToken extends n.a{constructor(...e){super(...e),this.gasLimit="150000",this.coefficient=1,this.BN=g.a}async getInfo(){return{balance:String(this.balance),transactions:this.transactions}}async getFee({gasPrice:e,gasLimit:t}){const i=new this.BN(e.toString()).mul(new this.BN(this.coefficient)),s=t||this.gasLimit;return new this.BN(s).mul(new this.BN(i))}async createTransaction({address:e,amount:t,custom:i,userGasPrice:s,gasLimit:n=this.gasLimit,multiplier:r=this.multiplier,nonce:a}){return{address:e,amount:t,custom:i,userGasPrice:s,gasLimit:n,contract:this.contract,multiplier:r,nonce:a}}async sendTransaction(e){return new Promise((t,i)=>{this.web3.eth.sendSignedTransaction(e).on("transactionHash",e=>{t({txid:e})}).catch(e=>{const t=this.parent.coreLibrary.currentProvider.host;i(new r.d({type:a.s,error:e,url:t,instance:this}))})})}}var k=MATICToken_MATICToken;class LUNCToken_LUNCToken extends n.a{constructor(...e){super(...e),this.denom=e[9],this.fields.paymentId=!0}async createTransaction({address:e,amount:t,userGasPrice:i,gasLimit:s,multiplier:n,feeLimit:r=1e7,memo:a}){return{address:e,amount:t,contract:this.contract,transfer:!0,ticker:this.ticker,userGasPrice:i,gasLimit:s,multiplier:n,feeLimit:r,denom:this.denom,memo:a}}}var f=LUNCToken_LUNCToken;class THETAToken_THETAToken extends n.a{constructor(...e){super(...e),this.id=this.ticker,this.network=this.config.network}async createTransaction({address:e,amount:t,userFee:i}){return{address:e,amount:t,contract:this.contract,ticker:this.ticker,userFee:i||await this.getFee()}}getFeeTicker(){return this.config.feeTicker}async availableBalance(e){if(!this.balance)return"0";const t=new g.a(this.balance).sub(new g.a(e));return t.gte(new g.a(0))?this.toCurrencyUnit(t):"0"}async isAvailableForSend(e,t){const i=await this.availableBalance(this.toMinimalUnit(t));return new g.a(this.toMinimalUnit(e)).lte(new g.a(this.toMinimalUnit(i)))}async getFee(){const e=this.config.defaultFee;if(!e)throw new Error(this.ticker+" provide defaultFee in config");return new this.BN(e)}}}}]);