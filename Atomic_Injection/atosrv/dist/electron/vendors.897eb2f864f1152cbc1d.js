(window.webpackJsonp=window.webpackJsonp||[]).push([[281],{4270:function(t,e,n){"use strict";n.r(e);var s=n(16),i=n.n(s),a=n(624),r=n(155),c=n(22),o=n(4428),h=n(469),u=n(896);const d="THETA",l="TFUEL",T=a.constants.DerivationPaths.Theta,m=/^(0x)?[0-9a-f]{40}$/i,g=[{name:"THETA Fuel Coin",ticker:l,decimal:18,visibility:!0,isCustom:!1,id:l}];class THETACoin extends(Object(h.g)(Object(h.h)(r.a))){constructor({alias:t,feeData:e,explorers:n,txWebUrl:s,socket:i,network:a=d}){super({alias:t,name:"THETA Coin",ticker:d,decimal:18,derivation:T,txWebUrl:s,explorers:n,socket:i,feeData:e,id:d,network:a}),this.plugins=[new u.a],this.defaultFee=e.defaultFee,this.resendTimeout=e.resendTimeout,this.fields.paymentId=!1,this.tokens={},this.activated=!1,this.eventEmmiter.on(this.ticker+"::confirmed-socket-tx",(t,e,n)=>{this.bus.$emit("socket::tx::confirmed",{id:t,ticker:n})})}loadTokensList(t){0!==g.length?(g.forEach(e=>{const n=t.getWallet(e.id);if(n&&n.uniqueField===e.uniqueField)return void(n.visibility=e.visibility);const s=this.createToken(e.name,e.ticker,e.decimal,"",e.uniqueField,e.isCustom&&"false"!==e.isCustom,!1!==e.visibility,{network:this.network,feeTicker:this.getFeeTicker(),defaultFee:this.defaultFee[l.toLowerCase()]});t.push(s),t.store.walletsCollection[s.alias].set(s.id.toUpperCase(),s),this.tokens[s.id]=s}),this.bus&&this.bus.$emit("update::coin-list")):console.warn(this.ticker,"No tokens to create")}get instance(){return{...super.instance,address:this.address,BN:i(),gasLimit:this.gasLimit,getTokens:()=>this.tokens,getProvider:t=>this.getProvider(t)}}createToken(...t){return new o.f(this.ticker,...t)}async loadWallet(t,e){try{const{address:t,privateKey:n}=a.Wallet.fromMnemonic(e);this.address=t,this.privateKey=n}catch(t){c.a.error({instance:this,error:t})}return this}validateAddress(t){return m.test(t)}async createTransaction({address:t,amount:e,nonce:n,ticker:s=this.ticker,userFee:i}){const{provider:r}=this.getProvider("node");if(!r)throw new Error(this.ticker+" set provider first");return new a.Wallet(this.privateKey,r).signTransaction(new a.transactions.SendTransaction({from:this.address,outputs:[{address:t,thetaWei:s===d?e:"0",tfuelWei:s===l?e:"0"}],sequence:Number(n||await this.updateNonce()),gasPrice:i||await this.getFee()}))}async createTokenTransaction(t){if([d,l].includes(t.ticker))return this.createTransaction(t);throw new Error(this.ticker+" adapter supports only TFUEL and THETA coins")}async getTransactions(t){if(!this.address)throw new Error(this.ticker+" address not found");try{return this.getProvider("history").getTransactions({address:this.address,...t})}catch(t){return c.a.error({instance:this,error:t}),[]}}async availableBalance(t){if(!this.balance)return"0";const e=t?new this.BN(t):await this.getFee(),n=new this.BN(this.balance).sub(e);return n.gt(new this.BN(0))?this.toCurrencyUnit(n):"0"}async getInfo(){return this.updateInfo()}setPrivateKey(t,e){const{address:n}=new a.Wallet(t);this.address=n,this.privateKey=t}async checkTransaction(t){await super.checkTransaction({feeTicker:this.getFeeTicker(),...t})}async getBalance(){return(await this.getInfo()).balance}async updateNonce(){return(await this.updateInfo()).nonce}async updateInfo(){if(!this.address)throw new Error(this.ticker+" address not found");const{sequence:t,coins:e,emptyAddress:n}=await this.getProvider("node").getAccount(this.address);return this.nonce=new this.BN(t).add(new this.BN(1)),n?(this.balance="0",Object.values(this.tokens).forEach(t=>{t.balance="0"})):Object.entries(e).forEach(([t,e])=>{t===this.ticker?this.balance=e:this.tokens[t].balance=e}),{nonce:this.nonce.toString(),balance:this.balance}}async getFee(...t){return this.tokens[this.getFeeTicker()].getFee(...t)}getFeeTicker(){return l}async isAvailableForFee(t,e){try{const n=t||await this.getFee();return new this.BN(e).gte(n)}catch(t){return!1}}}e.default=THETACoin},4428:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"g",(function(){return h})),n.d(e,"a",(function(){return u})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return l})),n.d(e,"e",(function(){return g})),n.d(e,"d",(function(){return k})),n.d(e,"f",(function(){return THETAToken_THETAToken}));var s=n(31),i=n(394),a=n(4),r=n(3);class ETHToken_ETHToken extends i.a{constructor(...t){super(...t),this.gasLimit="150000",this.coefficient=1}async getInfo(){return{balance:String(this.balance),transactions:this.transactions}}async getFee({amount:t=0,isSendAll:e,gasPrice:n,gasLimit:s}){const i=Number(n.toString())*Number(this.coefficient),a=s||this.gasLimit;return new this.BN(a).mul(new this.BN(i))}getFeeSettings(){return s.a.get("eth-gas-price")}async createTransaction({address:t,amount:e,custom:n,userGasPrice:s,gasLimit:i=this.gasLimit,multiplier:a=this.multiplier,nonce:r}){return{address:t,amount:e,custom:n,userGasPrice:s,gasLimit:i,contract:this.contract,multiplier:a,nonce:r}}async sendTransaction(t){return new Promise((e,n)=>{this.web3.eth.sendSignedTransaction(t).on("transactionHash",t=>{e({txid:t})}).catch(t=>{const e=this.parent.coreLibrary.currentProvider.host,s=new a.d({type:r.s,error:t,url:e,instance:this});n(s)})})}}var c=ETHToken_ETHToken;class BSCToken_BSCToken extends i.a{constructor(...t){super(...t),this.gasLimit="150000",this.coefficient=1}async getInfo(){return{balance:String(this.balance),transactions:this.transactions}}async getFee({amount:t=0,isSendAll:e,gasPrice:n,gasLimit:s}){const i=Number(n.toString())*Number(this.coefficient),a=s||this.gasLimit;return new this.BN(a).mul(new this.BN(i))}async createTransaction({address:t,amount:e,custom:n,userGasPrice:s,gasLimit:i=this.gasLimit,multiplier:a=this.multiplier,nonce:r}){return{address:t,amount:e,custom:n,userGasPrice:s,gasLimit:i,contract:this.contract,multiplier:a,nonce:r}}async sendTransaction(t){return new Promise((e,n)=>{this.web3.eth.sendSignedTransaction(t).on("transactionHash",t=>{e({txid:t})}).catch(t=>{const e=this.parent.coreLibrary.currentProvider.host,s=new a.d({type:r.s,error:t,url:e,instance:this});n(s)})})}}var o=BSCToken_BSCToken;class TRXToken_TRXToken extends i.a{async createTransaction({address:t,amount:e}){return{address:t,amount:e,contract:this.contract,transfer:!0,feeLimit:1e7}}getUserTicker(){return-1!==this.ticker.indexOf("-")&&this.ticker.split("-")[1]||this.ticker}}var h=TRXToken_TRXToken;class BNBToken_BNBToken extends i.a{constructor(...t){super(...t),this.fields.paymentId=!0,this.balances={}}async availableBalance(){return this.balances&&this.balances.available?this.balances.available:this.divisibleBalance?String(this.divisibleBalance):"0"}async getInfo(){return await this.getBalance(),{balance:String(this.balance),transactions:this.transactions}}async createTransaction({address:t,amount:e,memo:n}){return{address:t,amount:e,memo:n,asset:this.ticker}}async getBalance(){return this.balance}async getTransactions(){return this.transactions}getUserTicker(){return this.ticker.split("-")[0]}}var u=BNBToken_BNBToken;class VETToken_VETToken extends i.a{constructor(...t){super(...t),this.fee="60"}get feeTicker(){return"VTHO"}async getInfo(){return{balance:String(this.balance),transactions:this.transactions}}async getFee(){return new this.BN(this.toMinimalUnit(this.fee))}async createTransaction({address:t,amount:e}){const n=Number(this.toCurrencyUnit(await this.getFee())),s=`0xa9059cbb${this.addLeadingZero(t.substring(2),64)}${this.addLeadingZero(new this.BN(e).toString(16),64)}`;return{contract:this.contract,amount:"0",dataToSend:s,fee:n}}async isAvailableForFee(){const t=await this.getFee();return this.indivisibleBalance.gte(t)}async availableBalance(){const t=await this.getFee(),e=new this.BN(this.balance).sub(t);return e.lt(new this.BN(0))?"0":this.toCurrencyUnit(e)}addLeadingZero(t,e){return String(t).padStart(e,"0")}}var d=VETToken_VETToken;class ZILToken_ZILToken extends i.a{async createTransaction({address:t,amount:e}){return{address:t,amount:e,contract:this.contract}}}var l=ZILToken_ZILToken,T=n(16),m=n.n(T);class MATICToken_MATICToken extends i.a{constructor(...t){super(...t),this.gasLimit="150000",this.coefficient=1,this.BN=m.a}async getInfo(){return{balance:String(this.balance),transactions:this.transactions}}async getFee({gasPrice:t,gasLimit:e}){const n=new this.BN(t.toString()).mul(new this.BN(this.coefficient)),s=e||this.gasLimit;return new this.BN(s).mul(new this.BN(n))}async createTransaction({address:t,amount:e,custom:n,userGasPrice:s,gasLimit:i=this.gasLimit,multiplier:a=this.multiplier,nonce:r}){return{address:t,amount:e,custom:n,userGasPrice:s,gasLimit:i,contract:this.contract,multiplier:a,nonce:r}}async sendTransaction(t){return new Promise((e,n)=>{this.web3.eth.sendSignedTransaction(t).on("transactionHash",t=>{e({txid:t})}).catch(t=>{const e=this.parent.coreLibrary.currentProvider.host;n(new a.d({type:r.s,error:t,url:e,instance:this}))})})}}var g=MATICToken_MATICToken;class LUNCToken_LUNCToken extends i.a{constructor(...t){super(...t),this.denom=t[9],this.fields.paymentId=!0}async createTransaction({address:t,amount:e,userGasPrice:n,gasLimit:s,multiplier:i,feeLimit:a=1e7,memo:r}){return{address:t,amount:e,contract:this.contract,transfer:!0,ticker:this.ticker,userGasPrice:n,gasLimit:s,multiplier:i,feeLimit:a,denom:this.denom,memo:r}}}var k=LUNCToken_LUNCToken;class THETAToken_THETAToken extends i.a{constructor(...t){super(...t),this.id=this.ticker,this.network=this.config.network}async createTransaction({address:t,amount:e,userFee:n}){return{address:t,amount:e,contract:this.contract,ticker:this.ticker,userFee:n||await this.getFee()}}getFeeTicker(){return this.config.feeTicker}async availableBalance(t){if(!this.balance)return"0";const e=new m.a(this.balance).sub(new m.a(t));return e.gte(new m.a(0))?this.toCurrencyUnit(e):"0"}async isAvailableForSend(t,e){const n=await this.availableBalance(this.toMinimalUnit(e));return new m.a(this.toMinimalUnit(t)).lte(new m.a(this.toMinimalUnit(n)))}async getFee(){const t=this.config.defaultFee;if(!t)throw new Error(this.ticker+" provide defaultFee in config");return new this.BN(t)}}}}]);