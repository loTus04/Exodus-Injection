(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{130:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return o}));var n=t=>class extends t{getSendTransactionUrl(){return this.config.baseUrl}getSendTransactionParams(t){return{method:"sendrawtransaction",params:[t]}}modifySendTransactionResponse(t){return{txid:t.result}}};var a=t=>class extends t{getTransactionsModifiedResponse(t,e,r=this.wallet.ticker){return Object.assign({txType:this.getTransactionType(t)},super.getTransactionsModifiedResponse(t,e,r))}getTransactionNativeType({messages:t}){return t.map(({"@type":t})=>t.split(".").pop())[0]}getTransactionType(t){const e=this.getTransactionNativeType(t),r={MsgWithdrawDelegatorReward:"reward",MsgDelegate:"stake",MsgUndelegate:"unstake"};return void 0===r[e]?"regular":r[e]}},s=r(87);const i=["reward","unfreeze","freeze","vote"];var o=t=>class extends t{async getSocketTransaction({address:t,hash:e,tokens:r,type:n}){const a=await this.getTransaction(t,e,r);await s.a.filterAndUpdateTransactions([a]),"receive"===n&&this.eventEmmiter.emit(`${this.wallet.parent}-${a.walletid}::new-socket-tx`,{unconfirmedTx:a}),"confirm"===n&&this.eventEmmiter.emit(this.wallet.parent+"::confirmed-socket-tx",a.walletid,a,a.ticker),i.forEach(t=>{n===t&&this.eventEmmiter.emit(`${this.wallet.parent}::confirmed-${n}`,a||{})})}}},398:function(t,e,r){"use strict";r.r(e),r.d(e,"BinanceDex",(function(){return n.a})),r.d(e,"ArkExplorer",(function(){return a.a})),r.d(e,"BcdExplorer",(function(){return s.a})),r.d(e,"OntExplorer",(function(){return i.a})),r.d(e,"XlmExplorer",(function(){return g})),r.d(e,"AlgoExplorer",(function(){return m.a})),r.d(e,"DoraExplorer",(function(){return p.a})),r.d(e,"IconExplorer",(function(){return T.a})),r.d(e,"PolyscanExplorer",(function(){return y})),r.d(e,"LiskExplorer",(function(){return k.a})),r.d(e,"Web3Explorer",(function(){return E})),r.d(e,"YoroExplorer",(function(){return A})),r.d(e,"TzktExplorer",(function(){return S})),r.d(e,"TezosExplorer",(function(){return C})),r.d(e,"AtomicExplorer",(function(){return N.a})),r.d(e,"KabutoExplorer",(function(){return U.a})),r.d(e,"KabutoExplorerV2",(function(){return B.a})),r.d(e,"RippleExplorer",(function(){return _})),r.d(e,"BCDNodeExplorer",(function(){return P.a})),r.d(e,"DcrDataExplorer",(function(){return D.a})),r.d(e,"EOSNodeExplorer",(function(){return I.a})),r.d(e,"EOSApiExplorer",(function(){return O.a})),r.d(e,"InsightExplorer",(function(){return R.a})),r.d(e,"IquidusExplorer",(function(){return L.a})),r.d(e,"NemNodeExplorer",(function(){return F.a})),r.d(e,"NeoscanExplorer",(function(){return M.a})),r.d(e,"NeoNodeExplorer",(function(){return V.a})),r.d(e,"BinanceExplorer",(function(){return $.a})),r.d(e,"TzindexExplorer",(function(){return H})),r.d(e,"VetNodeExplorer",(function(){return G})),r.d(e,"AlgoNodeExplorer",(function(){return K.a})),r.d(e,"IconNodeExplorer",(function(){return J.a})),r.d(e,"HashnodeExplorer",(function(){return Z.a})),r.d(e,"LiskNodeExplorer",(function(){return Q.a})),r.d(e,"MintscanExplorer",(function(){return Y.a})),r.d(e,"CovalentHQExplorer",(function(){return tt.a})),r.d(e,"NanonodeExplorer",(function(){return et.a})),r.d(e,"TrongridExplorer",(function(){return at})),r.d(e,"TronscanExplorer",(function(){return pt})),r.d(e,"TronNodeExplorer",(function(){return xt})),r.d(e,"QtumInfoExplorer",(function(){return wt})),r.d(e,"YecChainExplorer",(function(){return yt})),r.d(e,"AeternityExplorer",(function(){return kt.a})),r.d(e,"AdaAtomicExplorer",(function(){return bt.a})),r.d(e,"BlockbookExplorer",(function(){return vt.a})),r.d(e,"DogeChainExplorer",(function(){return Et.a})),r.d(e,"EtherscanExplorer",(function(){return At.a})),r.d(e,"ETHNftExplorer",(function(){return St.a})),r.d(e,"ETHNftMoralisExplorer",(function(){return Ct.a})),r.d(e,"EthplorerExplorer",(function(){return Nt.a})),r.d(e,"GuardaMoneroProxy",(function(){return Ut.a})),r.d(e,"PurestakeExplorer",(function(){return Bt})),r.d(e,"PolkaScanExplorer",(function(){return _t})),r.d(e,"TezosNodeExplorer",(function(){return Pt})),r.d(e,"StackFundExplorer",(function(){return Dt})),r.d(e,"VergeNodeExplorer",(function(){return It})),r.d(e,"ViewblockExplorer",(function(){return Ot})),r.d(e,"WavesNodeExplorer",(function(){return Rt})),r.d(e,"BinanceBCExplorer",(function(){return Lt.a})),r.d(e,"BlockscoutExplorer",(function(){return Ft.a})),r.d(e,"BtgInsightExplorer",(function(){return Mt.a})),r.d(e,"CosmosNodeExplorer",(function(){return Vt.a})),r.d(e,"CosmosNodeExplorerV2",(function(){return $t.a})),r.d(e,"DgbInsightExplorer",(function(){return Ht.a})),r.d(e,"GastrackerExplorer",(function(){return qt.a})),r.d(e,"SolanaNodeExplorer",(function(){return Qt})),r.d(e,"SolanaSurfExplorer",(function(){return te})),r.d(e,"SolanaTritonExplorer",(function(){return ne})),r.d(e,"BlockbookV2Explorer",(function(){return ae.a})),r.d(e,"BlockcypherExplorer",(function(){return se.a})),r.d(e,"CardanoliteExplorer",(function(){return ie.a})),r.d(e,"CardanoRestExplorer",(function(){return oe.a})),r.d(e,"NanocrawlerExplorer",(function(){return ce.a})),r.d(e,"ZilliqaNodeExplorer",(function(){return pe})),r.d(e,"ZilliqaAtomicExplorer",(function(){return fe})),r.d(e,"PolkadotNodeExplorer",(function(){return we})),r.d(e,"PolkadotSidecarExplorer",(function(){return ye})),r.d(e,"VergeInsightExplorer",(function(){return ke})),r.d(e,"VetNodeWithBlockscannerExplorer",(function(){return ve})),r.d(e,"TronNodeWithBlockscannerExplorer",(function(){return Ee})),r.d(e,"TezosNodeWithBlockscannerExplorer",(function(){return Ae})),r.d(e,"CosmosNodeWithBlockscannerExplorer",(function(){return Se})),r.d(e,"BlockbookV2WithBlockscannerExplorer",(function(){return Ce})),r.d(e,"NearHelperExplorer",(function(){return Ne.a})),r.d(e,"NearRPCExplorer",(function(){return Ue.a})),r.d(e,"SnowTraceExplorer",(function(){return Ie})),r.d(e,"TerraLCDExplorer",(function(){return TerraLCDExplorer_TerraLCDExplorer})),r.d(e,"TerraFCDExplorer",(function(){return TerraFCDExplorer_TerraFCDExplorer})),r.d(e,"TerraClassicFCDExplorer",(function(){return TerraClassicFCDExplorer_TerraClassicFCDExplorer})),r.d(e,"TerraMantleExplorer",(function(){return TerraMantleExplorer_TerraMantleExplorer})),r.d(e,"ThetaExplorer",(function(){return ThetaExplorer_ThetaExplorer})),r.d(e,"ThetaJSExplorer",(function(){return ThetaJSExplorer_ThetaJSExplorer}));var n=r(944),a=r(957),s=r(958),i=r(959),o=r(246),c=r(8),l=r(4),d=r(3),u=r(22);const h=t=>404===t.response.status;class XlmExplorer_XlmExplorer extends c.a{constructor(){super(...arguments),this.server=new o.Server(this.config.baseUrl),this.defaultTxLimit=200,this.fee=arguments[3]}getAllowedTickers(){return["XLM"]}async getTransaction(t,e){let r;try{const n=(await this.server.ledgers().limit(1).order("desc").call()).records[0].sequence;r=await this.server.transactions().transaction(e).call();const{records:[a]}=await r.operations();if(a){if("create_account"===a.type)return super.modifyTransactionResponse(this.parseCreateAccountOperation(n,r,a,t),t);if("payment"===a.type)return super.modifyTransactionResponse(this.parsePaymentOperation(n,r,a,t),t)}}catch(t){u.a.error({instance:this,error:t})}return r}getTransactionsUrl(t){return"account_tx"}getTransactionsParams(t){return{account:t,limit:999}}getTransactionUrl(t){return""}getTransactionParams(t){return{}}getTxDateTime(t){return new Date(Number(""+t.timestamp))}getTxValue(t,e){return e.amount}getTxDirection(t,e){return e.addressTo.toLowerCase()===t.toLowerCase()}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.addressFrom:e.addressTo}getInfoUrl(t){return""}async getInfo(t){try{return{balance:await this.getBalance(t)}}catch(t){if(h(t))return{balance:0};throw new l.d({type:d.f,error:t,instance:this})}}getTxMemo(t){return t.memo}getTxConfirmations(t){return Number(t.confirmations)}async sendTransaction(t,e,r,n){let a,s=!1;const i=this.wallet.toCurrencyUnit(t.amount);try{a=await this.server.loadAccount(e)}catch(t){throw new l.d({type:d.s,error:t,instance:this})}const c=new o.TransactionBuilder(a,{fee:n,networkPassphrase:o.Networks.PUBLIC});try{await this.server.loadAccount(t.address)}catch(t){"XLM"===this.wallet.ticker&&h(t)&&(s=!0)}s?c.addOperation(o.Operation.createAccount({destination:t.address,startingBalance:i})):c.addOperation(o.Operation.payment({destination:t.address,asset:o.Asset.native(),amount:i})),t.paymentId&&c.addMemo(o.Memo.text(String(t.paymentId))),c.setTimeout(30);const u=c.build();u.sign(o.Keypair.fromSecret(r));return{txid:(await this.server.submitTransaction(u)).hash}}async getBalance(t){const e=await this.loadAccount(t);let r="0";return e.balances.forEach(t=>{"native"===t.asset_type&&(r=t.balance)}),this.wallet.toMinimalUnit(r)}parseCreateAccountOperation(t,e,r,n){return{addressFrom:r.source_account,addressTo:r.account,isIncoming:!(r.source_account===n),confirmations:t-e.ledger_attr,blockhash:e.ledger_attr,timestamp:new Date(e.created_at).getTime(),amount:String(r.starting_balance).replace(/[.]?0+$/,""),txid:e.id,fee:e.fee_charged,memo:e.memo}}parsePaymentOperation(t,e,r,n){return{addressFrom:r.from,addressTo:r.to,isIncoming:!(r.source_account===n),confirmations:t-e.ledger_attr,blockhash:e.ledger_attr,timestamp:new Date(e.created_at).getTime(),amount:String(r.amount).replace(/[.]?0+$/,""),txid:e.id,fee:e.fee_charged,memo:e.memo}}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){try{const[e,n,a]=await Promise.all([this.server.ledgers().limit(1).order("desc").call(),this.server.transactions().forAccount(t).limit(r).order("desc").call(),this.server.operations().forAccount(t).order("desc").limit(r).call()]),s=e.records[0].sequence,i=[];for(let e=0;e<n.records.length;e+=1){const r=n.records[e],o=a.records.filter(t=>t.transaction_hash===r.id);for(let e=0;e<o.length;e+=1){const n=o[e];"create_account"===n.type?i.push(this.parseCreateAccountOperation(s,r,n,t)):"payment"===n.type&&i.push(this.parsePaymentOperation(s,r,n,t))}}return super.modifyTransactionsResponse(i,t)}catch(t){if(h(t))return[];throw new l.d({type:d.i,error:t,instance:this})}}loadAccount(t){return new Promise((e,r)=>{this.server.loadAccount(t).then(t=>e(t)).catch(t=>r(t))})}async getFee(){return new this.wallet.BN(this.fee)}async getCurrentLedger(){return(await this.request("ledger_current")).ledger_current_index}getTxFee(t){return this.wallet.toCurrencyUnit(t&&t.fee||0)}}var g=XlmExplorer_XlmExplorer,m=r(1098),p=r(1099),T=r(1100),f=r(29),x=r(39);const w="PC65R3S3YXXM8H2WIRJQWCSUUAR8JKRGJ4";class PolyscanExplorer_PolyscanExplorer extends c.a{constructor({wallet:t,config:e}){super({wallet:t,config:e})}getAllowedTickers(){return["MATIC"]}modifyGeneralResponse(t){var e;if("1"===(null===(e=t.data)||void 0===e?void 0:e.status))return t.data;throw new l.d({type:d.f,error:new Error(JSON.stringify(t)),instance:this})}getTransactionsUrl(t){return""}getTransactionsParams(t){return{module:"account",action:"txlist",address:t,startblock:0,endblock:99999999,sort:"desc",apikey:w}}async getBalance(t){const e={module:"account",action:"balance",address:t,apikey:w},r=await this.request("","get",e);return this.modifyGeneralResponse(r)}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.result.filter(({value:t})=>t>0),e)}getTransactionsModifiedResponse(...t){return new f.a(super.getTransactionsModifiedResponse(...t))}getTxHash(t){return t.hash}getTxDateTime(t){return new Date(1e3*Number(t.timeStamp))}getTxFee(t){const e=new this.wallet.BN(t.gasPrice).mul(new this.wallet.BN(t.gasUsed));return this.wallet.toCurrencyUnit(e)}getTxConfirmations(t){return Number(t.confirmations)}getTxDirection(t,e){return t.toLowerCase()!==e.from.toLowerCase()}getTxOtherSideAddress(t,e){return t.toLowerCase()===e.from.toLowerCase()?e.to:e.from}getTxValue(t,e){return this.wallet.toCurrencyUnit(e.value)}async getTokenTransactions({address:t}){const e={module:"account",action:"tokentx",address:t,startblock:0,endblock:99999999,sort:"desc",apikey:w};return(await this.request(this.getTransactionsUrl(t),this.getTransactionsMethod(),e,d.i,this.getTransactionsOptions())).result.map(e=>new f.a({ticker:e.tokenSymbol,name:e.tokenName,walletid:this.getTokenId(e.tokenSymbol,e.contractAddress),txid:this.getTxHash(e),direction:this.getTxDirection(t,e),otherSideAddress:this.getTxOtherSideAddress(t,e),amount:this.getTokenTxAmount(e),datetime:this.getTxDateTime(e),confirmations:this.getTxConfirmations(e),nonce:this.getTxNonce(e),alias:this.wallet.alias,fee:this.getTxFee(e),feeTicker:this.getTxFeeTicker()}))}getTokenTxAmount(t){return Object(x.c)(t.value,Number(t.tokenDecimal))}}var y=PolyscanExplorer_PolyscanExplorer,k=r(1101),b=r(31);const v=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"}];class Web3Explorer_Web3Explorer extends c.a{constructor(...t){super(...t),this.requestId=0}getAllowedTickers(){return["ETH","ETC","BSC","MATIC","AVAX"]}async getInfo(t,e=!1){return{balance:t?await this.wallet.coreLibrary.eth.getBalance(t).catch(t=>{throw new l.d({type:d.f,error:t,instance:this})}):null,transactions:[]}}async getTokensInfo(t,e){const r=t.length;for(let n=0;n<r;n+=1){const r=t[n],a=r.contract;r.balance=await this.getTokenBalanceByContractAddress({address:e,contractAddress:a.toLowerCase()})}return r}async getTransaction(t,e,r){let n=this.wallet;const a=await this.wallet.coreLibrary.eth.getTransaction(t);if(!a)return null;const{timestamp:s}=await this.wallet.coreLibrary.eth.getBlock(a.blockNumber),{number:i}=await this.wallet.coreLibrary.eth.getBlock("latest"),o=await this.wallet.coreLibrary.eth.getTransactionReceipt(t);return"0x"!==a.input&&(a.inputDecode=this.decodeInput(a.input),o&&a.inputDecode&&"transfer"===a.inputDecode.method&&o.to&&void 0!==r[o.to.toLowerCase()]&&(n=r[o.to.toLowerCase()])),new f.a({ticker:n.ticker,name:n.name,walletid:n.id,txid:this.getTxHash(a),fee:this.getTxFee(a),feeTicker:this.wallet.parent,direction:this.getTxDirection(e,a),otherSideAddress:this.getTxOtherSideAddress(e,a),amount:this.getTxValue(e,a,n),datetime:new Date(Number(s+"000")),memo:this.getTxMemo(a),nonce:this.getTxNonce(a),confirmations:i-a.blockNumber,alias:n.alias,status:o&&o.status||""})}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){return[]}sendTransaction(t){return new Promise((e,r)=>{this.wallet.coreLibrary.eth.sendSignedTransaction(t).on("transactionHash",t=>{e({txid:t})}).catch(t=>r(t))})}async getGasPrice(){const t=await this.wallet.coreLibrary.eth.getGasPrice();return{node:new this.wallet.BN(t)}}getGasPriceConfig(){return b.a.get("eth-gas-price",!1,{timeout:1e4}).catch(t=>console.warn(t))}async getGasLimit(){const t=await this.wallet.coreLibrary.eth.getBlockNumber();return(await this.wallet.coreLibrary.eth.getBlock(t)).gasLimit}getTxHash(t){return t.hash}getTxDateTime(t){return new Date(Number(t.timeStamp+"000"))}getTxNonce(t){return t.nonce}getTxConfirmations(t){return Number(t.confirmations)}getTxDirection(t,e){return t.toLowerCase()!==e.from.toLowerCase()}getTxOtherSideAddress(t,e){let r=e.to;if(e.inputDecode&&"transfer"===e.inputDecode.method)try{r=e.inputDecode.params._to}catch(t){r="contr:"+r}return t.toLowerCase()===e.from.toLowerCase()?r:e.from}getTxValue(t,e,r=this.wallet){let n=e.value;if(e.inputDecode&&"transfer"===e.inputDecode.method)try{n=e.inputDecode.params._value}catch(t){n=0}return r.toCurrencyUnit(n)}async getTokenBalanceByContractAddress({address:t,contractAddress:e}){return new this.wallet.coreLibrary.eth.Contract(v,e).methods.balanceOf(t).call()}createSendTokenContract(t,e,r,n){return new this.wallet.coreLibrary.eth.Contract(this.getERC20ABI(),t,{from:e}).methods.transfer(r,n).encodeABI()}decodeInput(t){try{if(this.wallet.coreLibrary.utils.isHex(t)){try{return this.wallet.coreLibrary.utils.hexToString(t)}catch(t){}const e=4,r=Buffer.from(t.replace(/^0x/,""),"hex"),n="0x"+r.slice(0,e).toString("hex"),a=r.slice(e),s={method:null,params:{}};return this.getERC20ABI().forEach(t=>{try{const e=this.wallet.coreLibrary.eth.abi.encodeFunctionSignature(t),r=t.inputs?t.inputs.map(t=>t.type):[],i=t.inputs?t.inputs.map(t=>t.name):[];if(n===e){const e=this.wallet.coreLibrary.eth.abi.decodeParameters(r,"0x"+a.toString("hex"));s.method=t.name;for(const t in e)void 0!==e[t]&&(s.params[i[t]]=e[t])}}catch(t){return null}return null}),s}}catch(t){throw new l.g({type:d.l,error:t,instance:this})}return null}getERC20ABI(){return[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,type:"function"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_tokenName",type:"string"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenSymbol",type:"string"}],type:"constructor"},{payable:!1,type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}]}}var E=Web3Explorer_Web3Explorer;class YoroExplorer_YoroExplorer extends c.a{constructor(...t){super(...t),this.lastTx=void 0,this.updating=!1,this.txs=[],this.lastDelegationCert=null}getAllowedTickers(){return["ADA"]}async getInfo(t){return{balance:await this.getBalance(t),transactions:this.wallet.transactions}}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){const{hash:n=null}=await this.getLatestBlock();if(!n)return this.txs;return(await this.getTransactionsQueued({blockHash:n,address:t})).filter((a=new Set,({txid:t})=>!a.has(t)&&a.add(t))).sort((t,e)=>e.timestamp-t.timestamp);var a}async getTransactionsQueued({blockHash:t,address:e,recursion:r=!1,after:n}){if(this.updating&&!r)return this.txs;if(this.updating||r||(this.txs=[]),this.lastTx){const t={tx:this.lastTx.hash,block:this.lastTx.block_hash};n=n||t}this.updating=!0;const a=String(t),s=await this.request(this.getTransactionsUrl(e),this.getTransactionsMethod(),this.getTransactionsParams(e,a,n),"GetTxs",this.getInfoOptions()).catch(()=>{this.updating=!1});if(!s)return this.updating=!1,this.txs;const i=this.modifyTransactionsResponse(s,e);if(this.txs.push(...i),s.length>0){const t=s[s.length-1];t.certificates.length>0&&t.certificates.forEach(t=>{"StakeDelegation"===t.kind&&(this.lastDelegationCert=t)});const r={tx:t.hash,block:t.block_hash};this.lastTx=t;return await this.getTransactionsQueued({blockHash:a,address:e,recursion:!0,after:r})}return this.lastUpdatedTx=!1,this.updating=!1,this.txs}getLatestBlockUrl(){return"/api/v2/bestblock"}getTransactionsUrl(t){return"/api/v2/txs/history"}getUnspentOutputsUrl(){return"/api/txs/utxoForAddresses"}getUTXOUrl(){return"/api/txs/utxoForAddresses"}getRegistrationHistoryUrl(){return"/api/getRegistrationHistory"}getTxUrl(t){return"/api/txs/summary/"+t}getAccountStateUrl(){return"/api/getAccountState"}getInfoOptions(){return{headers:{"tangata-manu":"atomic"}}}getBroadcastUrl(){return this.config.submitUrl||"api/txs/signed"}getTransactionsMethod(){return"post"}getTransactionsParams(t,e,r){return{addresses:[t],untilBlock:e,after:r}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.reverse(),e)}getTxHash(t){return t.hash}getTxDirection(t,e){return!e.inputs.find(e=>t===e.address)}getTxOtherSideAddress(t,e){if(this.getTxDirection(t,e)){return e.inputs.find(e=>t!==e.address).address}const r=e.outputs.find(e=>t!==e.address);return r?r.address:t}getTxValue(t,e){const r=this.getTxDirection(t,e),n=[];e.outputs.forEach((e,a)=>{r&&e.address===t?n.push(a):r||e.address===t||n.push(a)});const a=e.inputs.map(t=>t.address),s=e.outputs.map(t=>t.address);let i;if(a.concat(s).every(e=>e===t)){const t=e.outputs.reduce((t,e)=>t.add(new this.wallet.BN(e.amount)),new this.wallet.BN(0));i=e.inputs.reduce((t,e)=>t.add(new this.wallet.BN(e.amount)),new this.wallet.BN(0)).sub(t).toString()}else i=n.reduce((t,r)=>t.add(new this.wallet.BN(e.outputs[r].amount)),new this.wallet.BN(0)).toString();return this.wallet.toCurrencyUnit(i)}getTxDateTime(t){return new Date(t.time)}getTxConfirmations(t){return Number(t.best_block_num)-Number(t.block_num)}async getBalance(t){return(await this.getUTXO(t).catch(t=>{throw new l.d({type:d.f,error:t,url:this.getUTXOUrl(),instance:this})})).reduce((t,{amount:e})=>t.add(new this.wallet.BN(e)),new this.wallet.BN(0)).toString()}async getUnspentOutputs(t){return this.getUTXO(t)}async getUTXO(t){return await this.request(this.getUTXOUrl(),"post",{addresses:[t]},void 0,this.getInfoOptions()).catch(t=>{throw new l.d({type:d.k,error:t,url:this.getUTXOUrl(),instance:this})})}async sendTransaction({rawtx:t,txid:e}){const r=Buffer.from(t).toString("base64");if(!await this.request(this.getBroadcastUrl(),"post",{signedTx:r},void 0,this.getInfoOptions()).catch(t=>{throw new l.d({type:d.s,error:t,url:this.getBroadcastUrl(),instance:this})}))throw new l.d({type:d.s,error:"ADA: sendTransaction: response.data doesn't have Right property",url:this.getBroadcastUrl(),instance:this});return{txid:e}}async getTxSummary(t){return this.request(this.getTxUrl(t),"get",{},void 0,this.getInfoOptions())}async getTxsSummary(t){const e=[];for(const r of t){const t=await this.getTxSummary(r);e.push(t)}return e}async getRegistrationHistory(t){return this.request(this.getRegistrationHistoryUrl(),"post",{addresses:[t]},void 0,this.getInfoOptions())}async getAccountState(t){return this.request(this.getAccountStateUrl(),"post",{addresses:[t]},void 0,this.getInfoOptions())}}var A=YoroExplorer_YoroExplorer;class TzktExplorer_TzktExplorer extends c.a{getAllowedTickers(){return["XTZ"]}getTransactionsUrl(t){return`${this.config.baseUrl}accounts/${t}/operations`}getTransactionUrl(t){return`${this.config.baseUrl}explorer/op/${t}`}getTransactionsParams(t,e,r=this.defaultTxLimit){return{lastId:e,limit:r}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t,e)}getTxConfirmations(t){return"applied"===t.status?1:0}getTxHash(t){return t.hash}getTxDirection(t,e){return e.sender.address!==t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.sender.address:e.target&&e.target.address||""}getTxValue(t,e){return this.wallet.toCurrencyUnit(e.amount)}getTxDateTime(t){return new Date(t.timestamp)}getTxMemo(t){return""}async getTransaction(t,e){const r=await this.request(this.getTransactionUrl(e),this.getTransactionsMethod(),this.getTransactionsParams(t,void 0,0),"tx",this.getTransactionsOptions());return this.modifyTransactionResponse(r,t)}async getTransactions({address:t,limit:e=this.defaultTxLimit}){const r=[];let n,a=0;do{const s=await this.request(this.getTransactionsUrl(t),this.getTransactionsMethod(),this.getTransactionsParams(t,n,e),"txs",this.getTransactionsOptions());if(r.push(s),s.length<e)break;a++;n=s[s.length-1].id}while(n>=0&&a<5);let s=[];return r.forEach(e=>{s=s.concat(this.modifyTransactionsResponse(e,t))}),s}getTxFee(){return this.wallet.toCurrencyUnit(this.wallet.feeDefault)}}var S=TzktExplorer_TzktExplorer;class TezosExplorer_TezosExplorer extends c.a{getAllowedTickers(){return["XTZ"]}getInfoUrl(t){return"v1/node_account/"+t}getTransactionUrl(t){return"v1/operation/"+t}getTransactionsUrl(t){return`v1/operations/${t}?type=Transaction&p=0&number=99`}modifyInfoResponse(t){return{balance:t.balance,transactions:[]}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t,e)}getTxHash(t){return t.hash}getTxDirection(t,e){return e.type.operations[0].destination.tz===t}getTxOtherSideAddress(t,e){return e.type.operations[0].destination.tz===t?t:e.type.operations[0].destination.tz}getTxValue(t,e){return this.wallet.toCurrencyUnit(e.type.operations[0].amount)}getTxDateTime(t){return new Date(t.type.operations[0].timestamp)}getTxConfirmations(t){return 10}async sendTransaction(t){return this.wallet.sendTransaction(t)}}var C=TezosExplorer_TezosExplorer,N=r(1102),U=r(1103),B=r(1104);class RippleExplorer_RippleExplorer extends c.a{constructor(...t){super(...t),this.requestId=0}getInitParams(){return{baseURL:this.config.baseUrl,headers:{"Content-Type":"text/plain"},credentials:!1}}async checkStatusTransaction(t){return(await this.request(this.getTransactionUrl(t),this.getTransactionMethod(),this.getTransactionParams(t),d.j,this.getTransactionOptions())).status}getAllowedTickers(){return["XRP"]}getInfoUrl(t){return"account_info"}getInfoParams(t){return{account:t}}modifyInfoResponse(t){return{balance:t.account_data.Balance,transactions:[],sequence:t.account_data.Sequence}}getTransactionsUrl(t){return"account_tx"}getTransactionsParams(t){return{account:t,limit:999}}modifyTransactionsResponse(t,e){return this.currentLedgerVersion=t.ledger_index_max,t.transactions.map(({tx:t})=>this.modifyTransactionResponse(t,e))}getTransactionUrl(t){return"tx"}getTransactionParams(t){return{transaction:t,binary:!1}}getTxHash(t){return t.hash}getTxDirection(t,e){return e.Destination===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.Account:e.Destination}getTxValue(t,e){return Number(this.wallet.toCurrencyUnit(e.Amount))}getTxDateTime(t){const e=t.date+946684800;return new Date(Number(e+"000"))}getTxMemo(t){return String(t.DestinationTag)||""}getTxConfirmations(t){return this.currentLedgerVersion-t.inLedger}async sendTransaction(t){const e=await this.request("submit",null,{tx_blob:t});if("tesSUCCESS"===!e.engine_result)throw new l.d({type:d.s,error:new Error(e.engine_result),instance:this});return{txid:e.tx_json.hash}}async getFee(){return(await this.request("fee")).drops.median_fee}async getCurrentLedger(){return(await this.request("ledger_current")).ledger_current_index}async getServerInfo(){return(await this.request("server_info")).info}async request(t,e,r={},n=d.w){this.requestId+=1;const a={jsonrpc:"2.0",method:t,params:[r],id:this.requestId},s=await this.client.post("",JSON.stringify(a)).catch(e=>{throw new l.d({type:n,error:e,url:t,instance:this})});if("actNotFound"===s.data.result.error)return{account_data:{Balance:0}};if("error"===s.data.result.status)throw new l.d({type:n,url:t,error:new Error(s.data.result.error_message),instance:this});return s.data.result}getTxFee(t){return this.wallet.toCurrencyUnit(t&&t.Fee||0)}}var _=RippleExplorer_RippleExplorer,P=r(1105),D=r(1106),I=r(1107),O=r(1126),R=r(1127),L=r(1128),F=r(1129),M=r(1182),V=r(1183),$=r(1184);class TzindexExplorer_TzindexExplorer extends c.a{getAllowedTickers(){return["XTZ"]}getTransactionsUrl(t){return`${this.config.baseUrl}explorer/account/${t}/op`}getTransactionUrl(t){return`${this.config.baseUrl}explorer/op/${t}`}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{offset:e,limit:r}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.ops,e)}getTxHash(t){return t.hash}getTxDirection(t,e){return e.receiver===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.sender:e.receiver||e.delegate}getTxValue(t,e){return e.volume}getTxDateTime(t){return new Date(t.time)}getTxMemo(t){return""}async getTransaction(t,e){const r=await this.request(this.getTransactionUrl(e),this.getTransactionsMethod(),this.getTransactionsParams(t,0,0),"tx",this.getTransactionsOptions());return this.modifyTransactionResponse(r,t)}async getTransactions({address:t}){const e=await this.request(this.getTransactionsUrl(t),this.getTransactionsMethod(),this.getTransactionsParams(t,0,0),"txs",this.getTransactionsOptions()),r=Number(e.n_ops),n=[];let a=100*Math.floor(r/100),s=0;do{const e=await this.request(this.getTransactionsUrl(t),this.getTransactionsMethod(),this.getTransactionsParams(t,a,100),"txs",this.getTransactionsOptions());s++,n.push(e),a-=100}while(a>=0&&s<5);let i=[];return n.forEach(e=>{i=i.concat(this.modifyTransactionsResponse(e,t))}),i}}var H=TzindexExplorer_TzindexExplorer,q=r(62),z=r.n(q),j=r(4219);z.a.config({DECIMAL_PLACES:50,EXPONENTIAL_AT:50});const W="0x0000000000000000000000000000456e65726779",X=new j.a.Event({anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"});class VetNodeExplorer_VetNodeExplorer extends c.a{getAllowedTickers(){return["VET","VTHO"]}getApiPrefix(){return""}getInfoUrl(t){return`${this.getApiPrefix()}accounts/${t}`}getInfoOptions(){return""}normalizeBalance(t){const e=String(t),r=e.match(/^[\d.]+e\+(\d+)$/);if(r)return Number(e).toPrecision(Number(r[1])+1);if(e.match(/^([\d.]+)e-(\d+)$/)){const t=String(e).match(/^([\d.]+)e-(\d+)$/);return`0.${new Array(parseInt(t[2],10)).join("0")}${t[1].replace(".","")}`}return e}modifyInfoResponse(t){return{balance:new z.a(t.balance).toString(),energy:new z.a(t.energy).toString()}}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){let n;this.latestBlock=await this.getLatestBlock();try{n=await super.getTransactions({address:t,offset:e,limit:r})}catch(t){var a,s;if(404===(null==t||null===(a=t.errorData)||void 0===a||null===(s=a.response)||void 0===s?void 0:s.status))return[];throw t}const i=await this.request(this.getTransfersUrl(),this.getTransactionsMethod(),this.getTransfersParams(t,e,r),"GetTxs",this.getTransactionsOptions()),o=this.modifyTransfersResponse(i,t);return n.concat(o)}getTransfersParams(t,e=0,r=this.defaultTxLimit){const n=this.addLeadingZeros(t),{number:a}=this.latestBlock,s={range:{unit:"block",from:0,to:a},options:{offset:e,limit:r},criteriaSet:[{address:W,topic0:n},{address:W,topic1:n},{address:W,topic2:n}],order:"desc"};return JSON.stringify(s)}getTransactionsParams(t,e=0,r=this.defaultTxLimit){const{number:n}=this.latestBlock,a={range:{unit:"block",from:1,to:n},options:{offset:e,limit:r},criteriaSet:[{recipient:t},{sender:t}],order:"desc"};return JSON.stringify(a)}getTransactionsMethod(){return"post"}getTransactionMethod(){return"get"}getTransactionUrl(t){return`transactions/${t}/receipt`}getTransactionParams(t){return{txId:t,raw:!0}}getTransactionsUrl(t){return"logs/transfer"}getTransfersUrl(){return"logs/event"}modifyTransactionResponse(t,e,r=this.wallet.ticker){const{meta:n,outputs:a}=t,s=a[0]&&a[0].transfers[0];if(s)return this.modifyTransactionsResponse([{meta:n,...s}],e)[0];const i=a[0]&&a[0].events[0];return i?this.modifyTransfersResponse([{meta:n,...i}],e)[0]:void 0}modifyTransactionsResponse(t,e){const r=[];return t.forEach(t=>{r.push(new f.a({ticker:this.wallet.ticker,name:this.wallet.name,walletid:this.wallet.id,txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(e,t.sender),otherSideAddress:this.getTxOtherSideAddress(e,t.sender,t.recipient),amount:this.getTxValue(e,t.amount),datetime:this.getTxDateTime(t.meta.blockTimestamp),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t.meta.blockNumber),alias:this.wallet.alias}))}),r}modifyTransfersResponse(t,e,r="VTHO"){const n=[];return t.forEach(t=>{const{_from:a,_to:s,_value:i}=X.decode(t.data,t.topics);n.push(new f.a({ticker:r,name:"VeThor",walletid:this.getTokenId(r,W),txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(e,a),otherSideAddress:this.getTxOtherSideAddress(e,a,s),amount:this.wallet.toCurrencyUnit(i),datetime:this.getTxDateTime(t.meta.blockTimestamp),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t.meta.blockNumber),alias:this.wallet.alias}))}),n}getTxHash(t){return t.meta.txID}getTxDirection(t,e){return e.toLowerCase()!==t.toLowerCase()}getTxOtherSideAddress(t,e,r){return e.toLowerCase()===t.toLowerCase()?r:e}getTxValue(t,e){return this.wallet.toCurrencyUnit(new z.a(e).toString())}getTxDateTime(t){return new Date(Number(t.toString()+"000"))}getTxConfirmations(t){return this.latestBlock?this.latestBlock.number-t:Number(10)}getLatestBlockUrl(){return this.getApiPrefix()+"blocks/best"}getSendTransactionParams(t){return{raw:t}}getSendTransactionUrl(){return"transactions"}async sendTransaction(t){const e=await this.request(this.getSendTransactionUrl(),this.getSendTransactionMethod(),this.getSendTransactionParams(t),d.s,this.getSendOptions());return this.modifySendTransactionResponse(e)}modifySendTransactionResponse(t){if(void 0===t.id)throw new TypeError(t);return{txid:t.id}}addLeadingZeros(t){let[e,r]=t.split("0x");e="0x";const n=66-r.length;for(;e.length<n;)e+="0";return e+r}removeLeadingZero(t){return String(t).replace(/^0+/,"")}getTxFee(){return this.wallet.feeDefault}}var G=VetNodeExplorer_VetNodeExplorer,K=r(1195),J=r(1196),Z=r(1197),Q=r(1236),Y=r(1237),tt=r(1238),et=r(1239),rt=r(219),nt=r.n(rt);class TrongridExplorer_TrongridExplorer extends c.a{constructor(...t){super(...t),this.defaultTxLimit=200}addressHex(t){return nt.a.address.toHex(t)}getAllowedTickers(){return["TRX"]}getApiPrefix(){return"v1/"}getInfoUrl(t){return`${this.getApiPrefix()}accounts/${this.addressHex(t)}`}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{address:t,limit:r}}modifyInfoResponse(t){var e,r;return{votes:null===(e=t.data[0])||void 0===e?void 0:e.votes,balance:null===(r=t.data[0])||void 0===r?void 0:r.balance}}getTransactionUrl(t){return"transaction-info?hash="+t}getTransactionsUrl(t){return`${this.getApiPrefix()}accounts/${this.addressHex(t)}/transactions/trc20`}modifyTransactionsResponse(t,e,r=this.wallet.ticker){return{trc20transfers:t.data.filter(t=>{var e;return null==t||null===(e=t.token_info)||void 0===e?void 0:e.symbol}).map(t=>new f.a({ticker:this.getTxAsset(t),name:t.token_info.name,txid:this.getTxHash(t),walletid:this.getTokenId(this.getTxAsset(t),t.token_info.address),fee:this.wallet.getTRC20Fee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t,t.token_info.decimals),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t),alias:this.wallet.alias}))}}async getBalance(){const t=await this.getInfo();return this.wallet.toCurrencyUnit(t.balance)}getTxAsset(t){const e=t.token_info.symbol;return"USDT"===e?"TRX-USDT":"USDC"===e?"TRX-USDC":e}getTxHash(t){return t.transaction_id}getTxDirection(t,e){return e.to===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.from:e.to}getTxValue(t,e,r=this.wallet.decimal){return this.wallet.toCurrencyUnit(e.value,r)}getTxDateTime(t){return new Date(Number(t.block_timestamp))}getTxConfirmations(t){return 1}}var at=TrongridExplorer_TrongridExplorer,st=r(467),it=r.n(st);const ot=1,ct=3,lt=4,dt=11,ut=12,ht=13,gt=14,mt=43;class TronscanExplorer_TronscanExplorer extends c.a{constructor(...t){super(...t),this.httpclient=new it.a.Client(this.config.baseUrl.replace("/api/","")),this.helper=it.a,this.defaultTxLimit=50}getAllowedTickers(){return["TRX","BTT","WIN","USDC","BTTOLD"]}getInfoUrl(t){return"account?address="+t}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{start:e,limit:r}}modifyInfoResponse(t){return{balance:String(t.balance),assets:t.trc20token_balances}}getAccount(t){return this.request("account?address="+t)}getVotes(t){return this.request("vote?voter="+t)}getTransactionUrl(t){return"transaction-info?hash="+t}getLatestBlockUrl(){return"block/latest"}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){return this.latestBlock=await this.getLatestBlock(),super.getTransactions({address:t,offset:e,limit:r})}getTransactionsUrl(t){return"transaction?sort=-timestamp&address="+t}modifyTransactionsResponse(t,e,r=this.wallet.ticker){const n=t.data.filter(t=>{var e;return"trx"!==(null===(e=t.tokenInfo)||void 0===e?void 0:e.tokenAbbr)});return{transactions:t.data.filter(t=>{var r;return"trx"===(null===(r=t.tokenInfo)||void 0===r?void 0:r.tokenAbbr)&&[t.ownerAddress,t.toAddress].includes(e)||"vote"===this.getTransactionType(t)||"regular"===this.getTransactionType(t)&&"0"===t.amount}).map(t=>this.getTransaction(e,t,this.getBatchTxValue(e,t),r,this.wallet.id,this.wallet.name)),transfers:n}}modifyTransactionResponse(t,e,r=this.wallet.ticker){return this.getTransaction(e,t,this.getTxValue(e,t),this.wallet.ticker,this.wallet.id,this.wallet.name)}modifyTokenTransactionResponse(t,e,r,n){return this.getTransaction(e,t,this.getTxValue(e,t,n),r,this.getTokenId(r,t.tokenName))}getSendTransactionUrl(){return"broadcast"}getSendTransactionParam(){return"transaction"}modifySendTransactionResponse(t){if("SUCCESS"!==t.data.code)throw new l.d({type:d.s,error:t.data.message,instance:this});return{txid:this.lastSendingTransactionHash}}async sendTransaction(t,e){try{return this.httpclient.apiUrl=this.config.baseUrl.replace("/api/",""),await this.httpclient.sendTransaction(e,t),{txid:this.SHA256(t.getRawData().serializeBinary())}}catch(t){throw new l.d({type:d.s,error:t,instance:this})}}async getBalance(){const t=await this.getInfo();return this.wallet.toCurrencyUnit(t.balance)}getTxHash(t){return t.hash}getTxDirection(t,e){return(e.contractType!==dt||e.ownerAddress.toLowerCase()!==t.toLowerCase())&&(e.toAddress.toLowerCase()===t.toLowerCase()||""===e.toAddress&&e.ownerAddress.toLowerCase()===t.toLowerCase())}getTxOtherSideAddress(t,e){switch(e.contractType){case dt:return"Freeze";case ut:case gt:return"Unfreeze";case ht:return"Reward";case ot:default:return e.toAddress.toLowerCase()===t.toLowerCase()?e.ownerAddress:e.toAddress}}getBatchTxValue(t,e,r=this.wallet.decimal){return"vote"===this.getTransactionType(e)?e.amount:this.wallet.toCurrencyUnit(e.amount,r)}getTxValue(t,e,r=this.wallet.decimal){switch(e.contractType){case dt:return"Freeze";case ut:case gt:return this.wallet.toCurrencyUnit(e.info.unfreeze_amount,r);case ht:return"Reward";case ot:default:return this.wallet.toCurrencyUnit(e.amount,r)}}getTxDateTime(t){return new Date(Number(t.timestamp))}getTxConfirmations(t){return this.latestBlock?this.latestBlock.number-t.block:Number(t.confirmed)}SHA256(t){const e=new it.a.sha256("SHA-256","HEX"),r=it.a.bytes.byteArray2hexStr(t);return e.update(r),e.getHash("HEX")}getTokenTransfers(t,e=10){return this.request(`token_trc20/transfers?limit=${e}&start=0&sort=-timestamp&count=false&relatedAddress=${t}`)}getTxFee(t){var e;return this.wallet.toCurrencyUnit((null==t||null===(e=t.cost)||void 0===e?void 0:e.fee)||this.wallet.feeDefault)}getTransaction(t,e,r,n,a,s){return new f.a({alias:this.wallet.alias,amount:r,confirmations:this.getTxConfirmations(e),datetime:this.getTxDateTime(e),direction:this.getTxDirection(t,e),fee:this.getTxFee(e),feeTicker:this.wallet.parent,memo:this.getTxMemo(e),name:s,otherSideAddress:this.getTxOtherSideAddress(t,e),ticker:n,txid:this.getTxHash(e),txType:this.getTransactionType(e),walletid:a})}getTransactionInfo(t){return this.request("transaction-info?hash="+t)}getTransactionType({contractType:t}){const e={freeze:[dt],reward:[ht,mt],unstake:[ut,gt],vote:[ct,lt]};for(const r of Object.keys(e))if(e[r].includes(t))return r;return"regular"}async isFirstTransfer(t){const{token_transfers:e}=await this.getTokenTransfers(t,1);return!e.length}}var pt=TronscanExplorer_TronscanExplorer,Tt=r(16),ft=r.n(Tt);class TronNodeExplorer_TronNodeExplorer extends c.a{getAllowedTickers(){return["TRX","BTT","USDT","WIN","USDC","BTTOLD"]}getInfoUrl(t){return"wallet/getaccount"}getInfoMethod(){return"post"}getInfoParams(t){return{address:nt.a.address.toHex(t)}}getRewardUrl(){return"wallet/getReward"}getRewardMethod(){return"post"}getRewardParams(t){return{address:t}}getTransactionUrl(t){return"wallet/gettransactionbyid?value="+t}getTxHash(t){return t.txID}getTxValue(t,e){let r=null;return r="FreezeBalanceContract"===e.raw_data.contract[0].type||"UnfreezeBalanceContract"===e.raw_data.contract[0].type?e.raw_data.contract[0].parameter.value.frozen_balance:e.raw_data.contract[0].parameter.value.amount,Object(x.c)(r,this.wallet.decimal)}getTxDirection(t,e){return nt.a.address.fromHex(e.raw_data.contract[0].parameter.value.owner_address)!==t}getTxOtherSideAddress(t,e){const r=nt.a.address.fromHex(e.raw_data.contract[0].parameter.value.owner_address);let n=null;return n="VoteWitnessContract"===e.raw_data.contract[0].type?nt.a.address.fromHex(e.raw_data.contract[0].parameter.value.votes[0].vote_address):"FreezeBalanceContract"===e.raw_data.contract[0].type?"Freeze balance":"UnfreezeBalanceContract"===e.raw_data.contract[0].type?"Unfreeze balance":"WithdrawBalanceContract"===e.raw_data.contract[0].type?"Reward":nt.a.address.fromHex(e.raw_data.contract[0].parameter.value.to_address),this.getTxDirection(t,e)?r:n}getTxDateTime(t){return new Date(t.raw_data.timestamp)}getTxConfirmations(t){return 1}getTxAsset(t,e){if(t.raw_data.contract[0].parameter.value.asset_name){const r=nt.a.toAscii(t.raw_data.contract[0].parameter.value.asset_name);return e[r]&&e[r].ticker}return this.wallet.ticker}getTxAssetId(t){if(t.raw_data.contract[0].parameter.value.asset_name){const e=nt.a.toAscii(t.raw_data.contract[0].parameter.value.asset_name);return this.getTokenId(this.wallet.tokens()[e].ticker,e)}return this.wallet.id}modifyTransactionResponse(t,e,r){return new f.a({ticker:this.getTxAsset(t,r),name:this.wallet.name,alias:this.wallet.alias,walletid:this.getTxAssetId(t),explorer:this.constructor.name,txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t)})}async getInfo(t){if(!t||"string"!=typeof t)throw this.createError("getInfo: address must be string with length > 0");if(this.defaultRequestTimeout&&Date.now()-this.defaultRequestTimeout*d.o<this.lastGetInfoRequestTime)return this.modifyInfoResponse(void 0);this.defaultRequestTimeout&&Date.now()-this.defaultRequestTimeout*d.o>this.lastGetInfoRequestTime&&(this.lastGetInfoRequestTime=Date.now());const e=await this.request(this.getInfoUrl(t),this.getInfoMethod(),this.getInfoParams(t),d.f,this.getInfoOptions()),r=await this.request(this.getRewardUrl(),this.getRewardMethod(),this.getRewardParams(t),d.f,this.getInfoOptions());return e&&r&&(e.reward=r.reward),this.modifyInfoResponse(e)}modifyInfoResponse(t){if(t.Error)throw new Error(t.Error);const{decimal:e}=this.wallet,{balance:r=0,frozen:n=[],votes:a=[],account_resource:s={}}=t||{},{frozen_balance_for_energy:{frozen_balance:i=0}={}}=s,o=new ft.a(r).toString(),c=Object(x.c)(o,e),l=n.length>0?new ft.a(n[0].frozen_balance).add(new ft.a(i)).toString():"0",d=n.length>0?String(n[0].expire_time):"0",u=Object(x.c)(t.reward||"0",e),h=Object(x.c)(new ft.a(o).add(new ft.a(l)).add(new ft.a(t.reward||"0")),e),g=a.length>0&&Object(x.d)(a[0].vote_count,e)||"0",m=Object(x.c)(g,e),p=Object(x.c)(l,e),T=p,f={energy:l&&g?Object(x.c)(new ft.a(l).sub(new ft.a(g)).toString(),e):"0",bandwith:p,totalSatoshis:p,total:m};return{balance:o,balances:{available:c,staking:f,frozen:p,frozenExpires:d,reward:u,votesUsed:m,votesTotal:T,votesAvailable:f.energy,total:h},assetV2:t.assetV2}}}var xt=TronNodeExplorer_TronNodeExplorer;class QtumInfoExplorer_QtumInfoExplorer extends c.a{getAllowedTickers(){return["QTUM"]}getInfoUrl(t){return`${this.getApiPrefix()}/address/${t}`}modifyInfoResponse(t){return{balance:t.balance,transactions:[]}}getTransactionsUrl(t){return`${this.getApiPrefix()}/address/${t}/basic-txs`}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{offset:e,limit:r,reversed:!0}}getTransactionUrl(t){return`${this.getApiPrefix()}/tx/${t}`}modifyTransactionsResponse(t){return Promise.all(t.transactions.map(async({id:t})=>this.getTransaction(t)))}getTxHash(t){return t.hash}getTxDirection(t,e){return e.inputs&&!e.inputs.find(({address:e})=>e===t)}getTxOtherSideAddress(t,e){if(!e.inputs)return"...";if(this.getTxDirection(t,e))return e.inputs[0].address;let r=new this.wallet.BN(0),n="...";return e.outputs.forEach(e=>{e.address!==t&&r.lt(new this.wallet.BN(e.value))&&(r=new this.wallet.BN(e.value),n=e.address)}),n}getTxValue(t,e){let r=new this.wallet.BN(0),n=new this.wallet.BN(0);if(!e.inputs||!e.outputs)return 0;e.inputs.forEach(e=>{e.address===t&&(r=r.add(new this.wallet.BN(e.value)))}),e.outputs.forEach(e=>{e.address===t&&(n=n.add(new this.wallet.BN(e.value)))});const a=r.sub(n),s=a.lt(new this.wallet.BN(0)),i=a.abs();return Number(this.wallet.toCurrencyUnit(s?i:i.sub(new this.wallet.BN(e.fees))))}getTxDateTime(t){return new Date(Number(t.timestamp+"000"))}getUnspentOutputsUrl(t){return`${this.getApiPrefix()}/address/${t}/utxo`}modifyUnspentOutputsResponse(t,e){return e.map(({transactionId:e,outputIndex:r,scriptPubKey:n,value:a})=>({txid:e,vout:r,address:t,script:n,satoshis:a,value:a}))}getSendTransactionUrl(){return this.getApiPrefix()+"/tx/send"}getSendTransactionParam(){return"rawtx"}modifySendTransactionResponse(t){if(1===t.status)throw new l.d({type:d.s,error:new Error(t.message),instance:this});return{txid:t.id}}calculateBalance(t=[]){return t.reduce((t,{value:e})=>new this.wallet.BN(e).add(t),new this.wallet.BN("0"))}}var wt=QtumInfoExplorer_QtumInfoExplorer;class YecChainExplorer_YecChainExplorer extends c.a{constructor(...t){super(...t),this.defaultTxLimit=20}getAllowedTickers(){return["YEC","ZEC"]}getApiPrefix(){return"v2/mainnet/"}getInfoUrl(t){return`${this.getApiPrefix()}accounts/${t}`}modifyInfoResponse(t){return{balance:this.wallet.toMinimalUnit(t.balance),transactions:[]}}getLatestBlockUrl(){return this.getApiPrefix()+"network"}getTransactionUrl(t){return`${this.getApiPrefix()}transactions/${t}`}getTransactionsUrl(t){return`${this.getApiPrefix()}accounts/${t}/recv`}getTransactionsSentUrl(t){return`${this.getApiPrefix()}accounts/${t}/sent`}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{offset:e,limit:r,sort:"timestamp",direction:"descending"}}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){this.latestBlock=await this.getLatestBlock();let n=await this.request(this.getTransactionsUrl(t),this.getTransactionsMethod(),this.getTransactionsParams(e,r),d.i),a=await this.request(this.getTransactionsSentUrl(t),this.getTransactionsMethod(),this.getTransactionsParams(e,r),d.i);const s=[];n=n.filter(t=>-1===s.indexOf(this.getTxHash(t))&&(s.push(this.getTxHash(t)),t.isIncoming=!0,!0)),a=a.filter(t=>-1===s.indexOf(this.getTxHash(t))&&(s.push(this.getTxHash(t)),t.isIncoming=!1,!0));const i=n.concat(a).sort((t,e)=>e.blockHeight-t.blockHeight);return this.modifyTransactionsResponse(i,t)}getTxHash(t){return t.hash}getTxDirection(t,e){return e.isIncoming}getTxOtherSideAddress(t,e){if(!this.getTxDirection(t,e)){let r=new this.wallet.BN(0),n="...";return e.vout.forEach(e=>{e.scriptPubKey.addresses.length>0&&e.scriptPubKey.addresses[0]!==t&&r.lt(new this.wallet.BN(this.wallet.toMinimalUnit(e.value)))&&(r=new this.wallet.BN(this.wallet.toMinimalUnit(e.value)),n=e.scriptPubKey.addresses[0])}),n}const r=this.wallet.coreLibrary.script.decompile(Buffer.from(e.vin[0].scriptSig.hex,"hex"));return this.wallet.coreLibrary.ECPair.fromPublicKeyBuffer(r[1],this.wallet.network).getAddress()}getTxValue(t,e){return Number(e.value)}getTxDateTime(t){return t.timestamp?new Date(Number(t.timestamp+"000")):new Date}getTxConfirmations(t){return this.latestBlock?this.latestBlock.blockNumber-t.blockHeight:1}calculateBalance(t=[]){return t.reduce((t,{value:e})=>new this.wallet.BN(e).add(t),new this.wallet.BN("0"))}}var yt=YecChainExplorer_YecChainExplorer,kt=r(1272),bt=r(1273),vt=r(1274),Et=r(1275),At=r(1276),St=r(1277),Ct=r(1324),Nt=r(1325),Ut=r(1326);class PurestakeExplorer_PurestakeExplorer extends c.a{getAllowedTickers(){return["ALGO"]}getApiPrefix(){return"v1"}getInfoOptions(){return{headers:{"X-API-Key":"ce8957trNG66bHturR9CL85cNxXo9EWE3ddoJJmf"}}}getTransactionsOptions(){return this.getInfoOptions()}getTransactionOptions(){return this.getInfoOptions()}getLatestBlockOptions(){return this.getInfoOptions()}getSendOptions(){return this.getInfoOptions()}getInfoUrl(t){return`${this.getApiPrefix()}/account/${t}`}modifyInfoResponse(t){return{balance:new ft.a(t&&t.amount).toString()}}getTransactionUrl(t){return`${this.getApiPrefix()}/transaction/${t}`}getTransactionsUrl(t){return`${this.getApiPrefix()}/account/${t}/transactions`}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{}}async getTransactions(t,e=0,r=this.defaultTxLimit){return this.latestBlock=await this.getLatestBlock(),super.getTransactions(t,e,r)}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t&&t.transactions,e)}getTxDirection(t,e){return e.payment.to===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.from:e.payment.to}getTxValue(t,e){return Number(this.wallet.toCurrencyUnit(this.getTxDirection(t,e)?e.payment.amount:new this.wallet.BN(e.payment.amount).add(new this.wallet.BN(e.fee))))}getTxDateTime(t){return new Date(Number(t.timestamp+"000"))}getTxConfirmations(t){return this.latestBlock?this.latestBlock.lastRound-t.lastRound:1}async getBalance(t,e=!1){const r=await this.getInfo(t,e);return r&&r.balance}getSendTransactionUrl(){return this.getApiPrefix()+"/transactions"}getSendTransactionParams(t){return{RawTransaction:t}}getLatestBlockUrl(){return this.getApiPrefix()+"/status"}}var Bt=PurestakeExplorer_PurestakeExplorer;class PolkaScanExplorer_PolkaScanExplorer extends c.a{getAllowedTickers(){return["DOT"]}getApiPrefix(){return"api"}getInfoUrl(t){return this.getApiPrefix()+"/scan/search"}getInfoMethod(){return"POST"}getInfoParams(t){return{key:t,page:0,row:1}}modifyInfoResponse(t){const e={balance:0,ring_lock:0,nonce:0};return t.data&&t.data.account&&(e.balance=new ft.a(this.wallet.toMinimalUnit(t.data.account.balance)).sub(new ft.a(this.wallet.toMinimalUnit(t.data.account.ring_lock))).toString(),e.ring_lock=t.data.account.ring_lock,e.nonce=t.data.account.nonce),{balance:e.balance,balances:{available:this.wallet.toCurrencyUnit(e.balance),staking:e.ring_lock},transactions:this.wallet.transactions,nonce:e.nonce}}getTransactionUrl(t){return this.getApiPrefix()+"/scan/extrinsic"}getTransactionMethod(){return"POST"}getTransactionParams(t){return{hash:t}}getTransactionsMethod(){return"POST"}getTransactionsUrl(t){return this.getApiPrefix()+"/scan/transfers"}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{address:t,page:e>this.defaultTxLimit?parseInt(e/this.defaultTxLimit,10):0,row:r}}modifyTransactionsResponse(t,e){var r;return null!=t&&null!==(r=t.data)&&void 0!==r&&r.transfers?super.modifyTransactionsResponse(t.data.transfers.filter(({success:t})=>t),e):[]}getTxHash(t){return t.hash}getTxDirection(t,e){return e.to===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.from:e.to}getTxValue(t,e){return Number(e.amount)}getTxDateTime(t){return new Date(Number(t.block_timestamp+"000"))}getTxConfirmations(t){return Number(t.success)||0}getTxFee(t){return this.wallet.toCurrencyUnit(t&&t.fee||0)}}var _t=PolkaScanExplorer_PolkaScanExplorer;class TezosNodeExplorer_TezosNodeExplorer extends c.a{getAllowedTickers(){return["XTZ"]}getInfoUrl(t){return`${this.config.baseUrl}/chains/main/blocks/head/context/contracts/${t}/balance`}getDelegate(t){return this.request(`${this.config.baseUrl}/chains/main/blocks/head/context/contracts/${t}/delegate`)}getTransaction(t,e){return super.modifyTransactionResponse(e,t)}async isValidator(t){return!!await this.request(`${this.config.baseUrl}/chains/main/blocks/head/context/delegates/${t}`).catch(t=>console.warn(t))}modifyInfoResponse(t){return{balance:t}}getTxDirection(t,e){return e.contents[0].destination===t}getTxConfirmations(t){return 1}getTxDateTime(t){return new Date}getTxValue(t,e){return this.wallet.toCurrencyUnit(e.contents[0].amount)}getTxHash(t){return t.hash}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.contents[0].source:e.contents[0].destination}}var Pt=TezosNodeExplorer_TezosNodeExplorer;class StackFundExplorer_StackFundExplorer extends c.a{constructor(...t){super(...t),this.defaultTxLimit=7}getAllowedTickers(){return["ATOM"]}getTransactionUrl(t){return`${this.getApiPrefix()}/tx/${t}`}getTransactionsUrl(t){return`${this.getApiPrefix()}/address/${t}`}getTransactionsParams(t,e=0){return{page:e>this.defaultTxLimit?parseInt(e/this.defaultTxLimit,10):1}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.txs.filter(({msg:t})=>{try{const[{type:e}]=JSON.parse(Buffer.from(t,"base64").toString("ascii"));return!!e}catch(t){return!1}}),e)}getTxHash(t){return t.hash}getTxDateTime(t){return new Date(t.time)}getTxDirection(t,e){try{const[r]=JSON.parse(Buffer.from(e.msg,"base64").toString("ascii"));return"cosmos-sdk/MsgSend"===r.type&&t===r.value.to_address}catch(t){return void u.a.error({instance:this,error:t})}}getTxOtherSideAddress(t,e){try{const[r]=JSON.parse(Buffer.from(e.msg,"base64").toString("ascii"));return"cosmos-sdk/MsgSend"!==r.type?r.value.validator_address:this.getTxDirection(t,e)?r.value.from_address:r.value.to_address}catch(t){return u.a.error({instance:this,error:t}),"Parse Error"}}getTxValue(t,e){try{const[r]=JSON.parse(Buffer.from(e.msg,"base64").toString("ascii")),[n]=JSON.parse(Buffer.from(e.fees,"base64").toString("ascii"));let a="0";return r.value.amount&&(a=Array.isArray(r.value.amount)?r.value.amount[0].amount:r.value.amount.amount),Number(this.wallet.toCurrencyUnit(this.getTxDirection(t,e)?a:new this.wallet.BN(a).add(new this.wallet.BN(n.amount))))}catch(t){return u.a.error({instance:this,error:t}),0}}getTxMemo(t){return t.memo}getTxConfirmations(t){return 1}}var Dt=StackFundExplorer_StackFundExplorer;class VergeNodeExplorer_VergeNodeExplorer extends c.a{getAllowedTickers(){return["XVG"]}getSendTransactionUrl(){return this.config.baseUrl}getSendTransactionParams(t){return{method:"sendrawtransaction",params:[t]}}modifySendTransactionResponse(t){return{txid:t.result}}}var It=VergeNodeExplorer_VergeNodeExplorer;class ViewblockExplorer_ViewblockExplorer extends c.a{constructor(...t){super(...t),this.defaultTxLimit=25,this.defaultRequestTimeout=4}getAllowedTickers(){return["ZIL"]}getWalletAddress(){return this.activeWalletAddress}getInfoUrl(t){return"/addresses/"+t}getTransactionsUrl(t){return`/addresses/${t}/txs`}getTransactionUrl(t){return"/txs/"+t}getInfoParams(){return{network:"mainnet",page:1,type:"all"}}getInfoOptions(){return{headers:{"X-APIKEY":"64e4ff5271a101d7e73f4ef8df119a01e578fb4215cca4a62e93282c87d67e53"}}}getTransactionsOptions(){return this.getInfoOptions()}getTransactionOptions(){return this.getInfoOptions()}getUtxoOptions(){return this.getInfoOptions()}getSendOptions(){return this.getInfoOptions()}getLatestBlockOptions(){return this.getInfoOptions()}modifyInfoResponse(t=[]){const e=t;return{balance:e.balance,nonce:e.nonce}}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{network:"mainnet",page:1+parseInt(e/r,10),type:"all"}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t,e)}getTxHash(t){return t.hash}getTxDateTime(t){return new Date(Number(""+t.timestamp))}getTxDirection(t,e){return e.to===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.from:e.to}getTxValue(t,e){return this.wallet.toCurrencyUnit(new this.wallet.BN(e.value))}getTxConfirmations(t){return 1}}var Ot=ViewblockExplorer_ViewblockExplorer;class WavesNodeExplorer_WavesNodeExplorer extends c.a{getAllowedTickers(){return["WAVES"]}getWalletAddress(){return this.wallet.address}getInfoUrl(t){return"/addresses/balance/"+t}getInfoOptions(){return{transformResponse:[t=>JSON.parse(t.replace(/:(\d+)([,}])/g,':"$1"$2'))]}}modifyInfoResponse(t){return{balance:t.balance,transactions:this.wallet.transactions}}getTransactionUrl(t){return"/transactions/info/"+t}getTransactionsUrl(t){return`/transactions/address/${t}/limit/${this.defaultTxLimit}`}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t[0].filter(({assetId:t})=>null===t),e)}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){return this.latestBlock=await this.getLatestBlock(),super.getTransactions({address:t,offset:e,limit:r})}getLatestBlockUrl(){return"/blocks/height"}getTxHash(t){return t.id}getTxDateTime(t){return new Date(Number(""+t.timestamp))}getTxDirection(t,e){return t===e.recipient}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.sender:e.recipient}getTxValue(t,e){return Number(this.wallet.toCurrencyUnit(this.getTxDirection(t,e)?e.amount:new this.wallet.BN(e.amount).add(new this.wallet.BN(e.fee))))}getTxConfirmations(t){return this.latestBlock?this.latestBlock.height-t.height:Number(1)}getSendTransactionUrl(){return"/transactions/broadcast"}getSendTransactionParams(t){return JSON.parse(t)}modifySendTransactionResponse(t){return{txid:t.id}}getTxFee(t){return this.wallet.toCurrencyUnit(t&&t.fee||0)}}var Rt=WavesNodeExplorer_WavesNodeExplorer,Lt=r(1327),Ft=r(1328),Mt=r(1329),Vt=r(604),$t=r(1330),Ht=r(603),qt=r(1331),zt=r(72),jt=r(468),Wt=r(885),Xt=r(28),Gt=r.n(Xt),Kt=r(87),Jt=r(623),Zt=r(265);class SolanaNodeExplorer_SolanaNodeExplorer extends c.a{constructor({wallet:t,config:e}){super({wallet:t,config:e}),this.connection=new zt.Connection(e.baseUrl),this.socket=void 0}setAxiosClient(){const{baseURL:t}=this.getInitParams();this.connection=new zt.Connection(t)}setSocketClient(t){this.socket=new zt.Connection(t)}getAllowedTickers(){return["SOL"]}async getInfo(t){const e=new zt.PublicKey(t),r=await this.connection.getBalance(e,"finalized");return this.modifyInfoResponse(r)}modifyInfoResponse(t){return{balance:String(t)}}async getCurrentSigs(t,e="finalize"){return(await this.connection.getConfirmedSignaturesForAddress2(t,{},e)).map(({confirmationStatus:t,signature:r})=>{if(t===e)return r}).filter(Boolean)}async getLatestBlock(){return await this.connection.getRecentBlockhash()}modifyLatestBlockResponse(t){return t&&t.value}async sendTransaction({rawtx:t,signer:e}){return{txid:await this.connection.sendTransaction(t,[e])}}async sendRawTransaction(t){return{txid:await this.connection.sendRawTransaction(t)}}async getFee(){const t=await this.getLatestBlock(),e=await this.connection.getFeeCalculatorForBlockhash(t.blockhash),r=e&&e.value.lamportsPerSignature;return String(r)}getAccountInfo(t){return this.connection.getParsedAccountInfo(t)}getEpochInfo(){return this.connection.getEpochInfo("finalized")}getStakeProgramInfo(t){return this.connection.getParsedProgramAccounts(zt.StakeProgram.programId,{commitment:"finalize",filters:[{memcmp:{bytes:t,offset:12}}]})}async getStakeAccountInfo(t){const e=await this.connection.getParsedAccountInfo(new zt.PublicKey(t),"processed");return this.modifyStakeAccountInfo(e,t)}modifyStakeAccountInfo(t,e){return{account:t.value,pubkey:new zt.PublicKey(e)}}async getStakingBalance(t){const e=await Jt.a.getAddrCache(this.wallet.ticker,d.t);let r=[];e&&(r=e.map(({address:t})=>t));const n=r.length>0?await Promise.all(r.map(t=>this.getStakeAccountInfo(t))):await this.getStakeProgramInfo(t.address);(0===r.length&&n||t.ignoreCache)&&(r=n.map(({pubkey:t})=>{try{return t.toBase58()}catch{return t}}),Jt.a.setAddrCache({ticker:this.wallet.ticker,type:d.t,addresses:r}));const{epoch:a}=await this.getEpochInfo(),s=n.map(t=>{if(!t.account)return void Jt.a._removeItem(t.pubkey.toBase58());if("delegated"!==t.account.data.parsed.type)return;const e=t.pubkey.toBase58(),r=t.account.lamports,n=t.account.data.parsed.info.stake.delegation.voter,s=Number.isSafeInteger(Number(t.account.data.parsed.info.stake.delegation.deactivationEpoch));return{accountAddress:e,staked:r,validator:n,isDeactivated:s,isAvailableForWithdraw:s&&Number(t.account.data.parsed.info.stake.delegation.deactivationEpoch)<a}}).filter(Boolean),i=s.reduce((t,e)=>t.add(new this.wallet.BN(e.staked)),new this.wallet.BN(0));return{staking:s,staked:i,total:s.reduce((t,e)=>t.add(new ft.a(e.staked)),new ft.a(0))}}getTxInstruction(t){const e={destination:"",source:"",lamports:0};return t.transaction.message.instructions.forEach(t=>{["transfer","createAccount","createAccountWithSeed","delegate","deactivate","withdraw"].includes(t.parsed.type)&&(e.destination=t.parsed.info.destination||t.parsed.info.voteAccount||t.parsed.info.stakeAccount,e.source=t.parsed.info.source||t.parsed.info.stakeAuthority||t.parsed.info.stakeAccount,t.parsed.info.lamports&&(e.lamports=t.parsed.info.lamports))}),e}getTxHash(t){return t.transaction.signatures[0]}getTxDirection(t,e){return this.getTxInstruction(e).destination===t}getTxOtherSideAddress(t,e){const{destination:r,source:n}=this.getTxInstruction(e);return r===t?n:r}getTxValue(t,e){return Object(x.c)(this.getTxInstruction(e).lamports,this.wallet.decimal)}getTxDateTime(t){return new Date(Number(t.blockTime+"000"))}getTxMemo(t){return""}async getTransactions({address:t}){const e=await this.getCurrentSigs(new zt.PublicKey(t),"finalized"),r=await this.connection.getParsedConfirmedTransactions(e,"finalized");return this.modifyTransactionsResponse(r,t)}async getSpecifiedTransactions(t,e){const r=await this.connection.getParsedConfirmedTransactions(t,"confirmed");return this.modifyTransactionsResponse(r,e)}modifyTransactionResponse(t,e){return t.map(t=>new zt.Transaction({ticker:this.wallet.ticker,name:this.wallet.name,alias:this.wallet.alias,walletid:this.wallet.id,explorer:this.constructor.name,txid:this.getTxHash(t),direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:1}))}getMinRent(t=200){return this.connection.getMinimumBalanceForRentExemption(t)}async connectSocket(t){const{baseUrl:e,websocketUrl:r}=this.config;this.setSocketClient(r||e);const n=new zt.PublicKey(t);this.socket&&(this.socket.onAccountChange(n,t=>this.processBalanceChangeEvent(t,n),"finalized"),this.socket.onAccountChange(n,t=>this.processTxsChangeEvent(t,n),"confirmed"))}async processTxsChangeEvent(t,e){const r=await this.getCurrentSigs(e,"confirmed"),n=await this.getSpecifiedTransactions(r,e.toBase58());await Kt.a.filterAndUpdateTransactions(n),n.forEach(t=>{t.direction&&this.eventEmmiter.emit(`${this.wallet.parent}-${this.wallet.id}::new-socket-tx`,{unconfirmedTx:t})})}processBalanceChangeEvent(t,e){this.eventEmmiter.emit(`update::${this.wallet.id}::balance`,t.lamports)}getTxFee(t){return this.wallet.toCurrencyUnit(t.meta&&t.meta.fee||0)}getTxConfirmations(){return 1}async fetchRawList(t){try{const e=await Object(Wt.resolveToWalletAddress)({text:t,connection:this.connection}),r=await Object(Wt.getParsedNftAccountsByOwner)({publicAddress:e,connection:this.connection}),n=[],a=r.map(({mint:t,data:{name:e,uri:r}})=>(n.push(r),{tokenId:t,name:e})),s=await Promise.allSettled(n.map(t=>Gt.a.get(t)));for(let t=0;t<a.length;t++){const e=a[t],{status:r,value:n,reason:i}=s[t];if("fulfilled"===r){const{data:{description:t,image:r}}=n;e.description=t,e.imageUrl=r}else console.warn(i)}return a}catch(t){throw console.warn(t),new l.e({type:d.e,error:t,instance:this})}}async fetchNftList(t){const{address:e,ticker:r}=t;try{return(await this.fetchRawList(e)).map(({tokenId:t,name:e,description:n,imageUrl:a})=>new Zt.c(t,r,e,n,a))}catch(t){throw console.warn(t),new l.e({type:d.e,error:t,instance:this})}}async sendNft(t,e,r,n,a,s){const i=zt.Keypair.fromSecretKey(t.getPrivateKey()),o=new zt.PublicKey(n),c=new zt.PublicKey(e);try{const t=await Object(jt.c)(this.connection,i,o,i.publicKey),e=await Object(jt.c)(this.connection,i,o,c),r=(new zt.Transaction).add(Object(jt.b)(t.address,o,e.address,i.publicKey,1,0,[],jt.a));return{tx:await this.connection.sendTransaction(r,[i])}}catch(t){throw console.warn(t),new l.e({type:d.e,error:t,instance:this})}}makeNftInfoUrl(t,e){return`${Object(x.b)(this.config.baseUrl,"/")}${e}`}}var Qt=SolanaNodeExplorer_SolanaNodeExplorer,Yt=r(9);class SolanaSurfExplorer_SolanaSurfExplorer extends c.a{getAllowedTickers(){return["SOL"]}getApiPrefix(){return"/v1"}getTransactionsMethod(){return"get"}getTransactionsUrl(t){return`${this.getApiPrefix()}/account/${t}/transactions`}getTransactionsParams(){return{}}getTransactionOptions(){return{}}async getTransactions({address:t,offset:e,limit:r,pageNum:n}){const a=await this.request(this.getTransactionsUrl(t),this.getTransactionsMethod(),this.getTransactionsParams(),Yt.t,this.getTransactionsOptions());return this.modifyTransactionsResponse(a,t)}modifyTransactionsResponse(t,e){return t.map(t=>{const r=this.getInstruction(t);return new f.a({ticker:this.wallet.ticker,name:this.wallet.name,alias:this.wallet.alias,walletid:this.wallet.id,explorer:this.constructor.name,txid:this.getTxHash(t),direction:this.getTxDirection(e,r),otherSideAddress:this.getTxOtherSideAddress(e,r),amount:this.getTxValue(e,r),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:1})})}getInstruction(t){return t.instructions[0].parsed.Transfer}getTxHash(t){return t.transactionHash}getTxDirection(t,e){return e.account.address!==t}getTxOtherSideAddress(t,e){return e.recipient.address}getTxValue(t,e){return Object(x.c)(e.lamports,this.wallet.decimal)}getTxDateTime(t){return new Date(Number(t.blocktime.absolute+"000"))}}var te=SolanaSurfExplorer_SolanaSurfExplorer,ee=r(20);const re={TRANSFER_COIN:{isMatch:t=>{const{transaction:{message:{instructions:[{program:e,parsed:{type:r}={}}]=[{}]}}={}}=t||{};return"system"===e&&"transfer"===r},parse:t=>{const{transaction:{message:{instructions:[{parsed:{info:{source:e,destination:r,lamports:n=0}}}]}}}=t;return{source:e,destination:r,isNft:!1,amount:n}}},TRANSFER_NFT:{isMatch:t=>{const{meta:{postTokenBalances:e=[]}={}}=t||{};return e.length>0},parse:t=>{const{meta:{postTokenBalances:e}}=t;return e.reduce((t,e)=>{const{owner:r,uiTokenAmount:{amount:n}}=e;switch(n){case"1":t.destination=r;break;case"0":t.source=r}return t},{source:"",destination:"",isNft:!0,amount:1})}}};class SolanaTritonExplorer_SolanaTritonExplorer extends c.a{constructor({wallet:t,config:e}){super({wallet:t,config:e}),this.connection=new zt.Connection(e.baseUrl+"ff2c5556-29f4-4ec0-8f4a-58a85f366aaf",{httpHeaders:{"Access-Control-Allow-Origin":"atomicwallet.io"}})}getAllowedTickers(){return["SOL"]}async fetchTxSignaturesForChunk(t,e,r){try{return(await this.connection.getSignaturesForAddress(t,{limit:r,before:e},"finalized")).map(({signature:t})=>t)}catch(t){return console.warn(t),[]}}async fetchTxSignatures(t){const e=[];let r,n;do{n=await this.fetchTxSignaturesForChunk(t,r,500),r=n[n.length-1],e.push(...n)}while(500===n.length);return e}getTxInstruction(t){return Object.entries(re).reduce((e,[r,{isMatch:n,parse:a}])=>({...e,...n(t)?a(t):{}}),{destination:"",source:"",isNft:!1,amount:0})}getTxHash(t){return t.transaction.signatures[0]}getTxDateTime(t){return Object(x.a)(t.blockTime)}getTxMemo(t){return t.memo||""}getTxFee(t){var e;return this.wallet.toCurrencyUnit((null===(e=t.meta)||void 0===e?void 0:e.fee)||0)}async fetchTxsForChunk(t){try{return this.connection.getParsedConfirmedTransactions(t,"finalized")}catch(t){return console.warn(t),[]}}async getTransactions({address:t,offset:e,limit:r=this.defaultTxLimit,pageNum:n=0}){const a=await this.fetchTxSignatures(new zt.PublicKey(t)),s=Object(ee.c)(a,r)[n]||[],i=await this.fetchTxsForChunk(s);return this.modifyTransactionsResponse(i,t)}modifyTransactionsResponse(t,e){return t.map(t=>{const{destination:r,source:n,isNft:a,amount:s}=this.getTxInstruction(t);return new f.a({ticker:this.wallet.ticker,name:this.wallet.name,alias:this.wallet.alias,walletid:this.wallet.id,explorer:this.constructor.name,txid:this.getTxHash(t),direction:r===e,otherSideAddress:r===e?n:r,amount:a?"NFT":Object(x.c)(s,this.wallet.decimal),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:1,fee:this.getTxFee(t),feeTicker:this.getTxFeeTicker(),isNft:this.getTxInstruction(t).isNft})})}}var ne=SolanaTritonExplorer_SolanaTritonExplorer,ae=r(606),se=r(1338),ie=r(1339),oe=r(1340),ce=r(1341),le=r(794),de=r(463),ue=r(182),he=r(1632),ge=r(243);class ZilliqaAbstractExplorer_ZilliqaAbstractExplorer extends c.a{getAllowedTickers(){return["ZIL"]}getBech32Address(t){return Object(ge.toBech32Address)(t)}getValidChecksumAddress(t){let e="";try{e=Object(ge.toChecksumAddress)(t)}catch(r){e=Object(ge.toChecksumAddress)(Object(ge.fromBech32Address)(t))}return e.toLowerCase()}toValidChecksumAddress(t){return this.getValidChecksumAddress(t).replace(/^0x/,"")}}var me=ZilliqaAbstractExplorer_ZilliqaAbstractExplorer;var pe=class ZilliqaNodeExplorer_ZilliqaNodeExplorer extends me{constructor(...t){super(...t),this.zilliqa=new le.Zilliqa(this.config.baseUrl)}async sendTransaction({rawtx:t,privateKey:e}){const r=new de.Transaction(t);let n;try{this.zilliqa.wallet.addByPrivateKey(e);const t=await this.zilliqa.wallet.sign(r);t.amount=t.amount.toString(),t.gasLimit=t.gasLimit.toString(),t.gasPrice=t.gasPrice.toString(),n=await this.request(this.config.baseUrl,"POST",{id:"atomic",jsonrpc:"2.0",method:ue.RPCMethod.CreateTransaction,params:[{...t.txParams,priority:t.toDS}]},d.f)}catch(t){throw new l.d({type:d.s,error:new Error(t.message),instance:this})}if(void 0!==n.error)throw new l.d({type:d.s,error:new Error(n.error.message),instance:this});return{txid:n.result.TranID}}async getBalance(t,e){const{balance:r,nonce:n=0}=await this.getInfo(this.toValidChecksumAddress(t)).catch(t=>console.warn(t))||{};return{balance:r,nonce:Number(n)}}async getStakingBalance(t,e){const r=this.toValidChecksumAddress(e);return{staking:await this.getStakedAmountFromContract(t,r),withdrawals:await this.getWithdrawalsFromContract(t,r)}}async getRewards(t,e,r){const n=this.toValidChecksumAddress(e);return await this.getRewardsFromContract(t,n,r)||{total:"0"}}async getTokenBalance(t,e){const r=e.map(async e=>{if(!e)return null;const r="0x"+this.toValidChecksumAddress(t),n=await this.request(this.config.baseUrl,"POST",{id:"atomic",jsonrpc:"2.0",method:ue.RPCMethod.GetSmartContractSubState,params:[this.toValidChecksumAddress(e),"balances",[r]]},d.f);return{contract:e,balance:n&&n.result&&n.result.balances[r]}}).filter(Boolean);return Promise.all(r)}getInfoUrl(t){return""}getInfoMethod(){return"POST"}getInfoParams(t){return{id:"atomic",jsonrpc:"2.0",method:ue.RPCMethod.GetBalance,params:[t]}}async getRewardsFromContract(t,e,{validators:r}){const n=new he.a(this.config.baseUrl,e),a="0x"+this.toValidChecksumAddress(t),s=Object.keys(r);if(0===s.length)return;const i={total:"0",validators:{}};for(let t=0;t<s.length;t+=1){const e=s[t],r=await n.getRewards(e,a);i.total=new this.wallet.BN(i.total).add(r).toString(),i.validators[e]=r.toString()}return i.total=i.total.toString(),i}async getStakedAmountFromContract(t,e){const r="0x"+this.toValidChecksumAddress(t),n=await this.request(this.config.baseUrl,"POST",{id:"atomic",jsonrpc:"2.0",method:ue.RPCMethod.GetSmartContractSubState,params:[e,"deposit_amt_deleg",[r]]},d.f),a=await this.request(this.config.baseUrl,"POST",{id:"atomic",jsonrpc:"2.0",method:ue.RPCMethod.GetSmartContractSubState,params:[e,"buff_deposit_deleg",[r]]},d.f),{deposit_amt_deleg:s={}}=n&&n.result||{},{buff_deposit_deleg:i={}}=a&&a.result||{};return Object.keys(s[r]||{}).reduce((t,e)=>(t.validators[e]={address:this.getBech32Address(e),amount:s[r][e],buffered:!!(Object.keys(i).length>0&&i[r][e])&&Object.keys(i[r][e]).length>0},t.total=new this.wallet.BN(t.total).add(new this.wallet.BN(s[r][e])).toString(),t),{validators:{},total:"0"})}async getWithdrawalsFromContract(t,e){const r="0x"+this.toValidChecksumAddress(t),{CurrentMiniEpoch:n}=await this.getBlockchainInfo(),a=await this.request(this.config.baseUrl,"POST",{id:"atomic",jsonrpc:"2.0",method:ue.RPCMethod.GetSmartContractSubState,params:[e,"withdrawal_pending",[r]]},d.f),{withdrawal_pending:s={}}=a&&a.result||{},i={availableWithdrawal:{total:"0"},pendingWithdrawal:{total:"0"}};if(!s[r])return{...i,total:"0"};Object.keys(s[r]||{}).forEach(t=>{const e=Number(n)-Number(t),a=s[r][t];e<30800?(i.pendingWithdrawal[t]=a,i.pendingWithdrawal.total=new this.wallet.BN(i.pendingWithdrawal.total).add(new this.wallet.BN(a)).toString()):(i.availableWithdrawal[t]=a,i.availableWithdrawal.total=new this.wallet.BN(i.availableWithdrawal.total).add(new this.wallet.BN(a)).toString())});const o=Object.keys(s[r]||{}).reduce((t,e)=>t=new this.wallet.BN(t).add(new this.wallet.BN(s[r][e])).toString(),"0");return{...i,total:o}}async getBlockchainInfo(){const{result:t}=await this.request(this.config.baseUrl,"POST",{id:"atomic",jsonrpc:"2.0",method:ue.RPCMethod.GetBlockchainInfo,params:[]},d.f);return t}modifyInfoResponse(t){const{result:e,error:r}=t;if(r)throw new l.d({type:d.f,error:new Error(`[${this.wallet.ticker}] modifyInfoResponse error: ${JSON.stringify(r)}`),instance:this});const{balance:n,nonce:a=0}=e;return{balance:n,nonce:a}}},Te=r(129);var fe=class ZilliqaAtomicExplorer_ZilliqaAtomicExplorer extends me{async getTransactions(t){try{return await super.getTransactions(t)}catch(t){var e,r,n;if("Transactions not found"===(null==t||null===(e=t.errorData)||void 0===e||null===(r=e.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error))return[];throw t}}getTransactionsModifiedResponse(t,e,r=this.wallet.ticker){return Object.assign({txType:this.getTxType(t)},super.getTransactionsModifiedResponse(t,e,r))}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{address:t,limit:r,offset:e}}getTransactionsUrl(t){return"transactions"}getTransactionParams(t){return{txId:t}}getTransactionUrl(t){return"transaction"}getTxDateTime(t){return new Date(t.timestamp)}getTxDirection(t,e){return e.toAddr===this.getValidChecksumAddress(t)}getTxHash(t){return t.txId}getTxOtherSideAddress(t,e){return this.getBech32Address(this.getTxDirection(t,e)?e.fromAddr:e.toAddr)}getTxType(t){switch(t.operation){case"Claim rewards":return Te.b;case"Stake":return Te.e;case"Unstake":return Te.f;case"Withdraw stake":return Te.h;default:return Te.d}}getTxValue(t,e){return this.wallet.toCurrencyUnit(new this.wallet.BN(e.amount))}getTxConfirmations(t){return null!=t&&t.isConfirmed?1:0}};const xe=new(r(1346).a)(()=>Promise.all([r.e(4),r.e(0),r.e(258),r.e(266),r.e(227),r.e(215),r.e(203),r.e(276),r.e(195)]).then(r.bind(null,6139)));class PolkadotNodeExplorer_PolkadotNodeExplorer extends c.a{constructor(...t){super(...t),this.endpoint=null}async loadEndpoint(){if(!this.endpoint){const t=new(await xe.get("WsProvider"))(this.config.baseUrl),e=await xe.get("ApiPromise");this.endpoint=await e.create({provider:t})}return!0}getAllowedTickers(){return["DOT"]}async getInfo(t){if(!t)return{};await this.loadEndpoint();const{nonce:e,data:r}=await this.endpoint.query.system.account(t);return{balance:r.free.sub(r.miscFrozen).toString(),balances:{available:r.free.sub(r.miscFrozen).toString(),free:r.free.toString(),frozen:r.miscFrozen.toString()},transactions:this.wallet.transactions,nonce:e.toString()}}async sendTransaction({rawtx:t,privateKey:e}){await this.loadEndpoint();return{txid:(await this.endpoint.rpc.author.submitExtrinsic(t)).toHex()}}async sendDelegationTransaction({rawtx:t,privateKey:e}){await this.loadEndpoint();const r=new(await xe.get("Keyring"))({type:"sr25519"}),n=Buffer.from(e,"hex"),a=r.addFromSeed(n),s=this.endpoint.tx.staking.bond(a.publicKey,Number(t.amount),t.rewardDestination);try{return new Promise(e=>{s.signAndSend(a,async({events:r=[],status:n})=>{if(n.isInBlock)try{const r=this.endpoint.tx.staking.nominate(t.validatorAddresses),n=await r.signAndSend(a);return e({txid:n.toString("hex")})}catch(t){throw new l.d({type:d.s,error:new Error(t.message),instance:this})}})})}catch(t){throw new l.d({type:d.s,error:new Error(t.message),instance:this})}}async sendUnDelegationTransaction({rawtx:t,privateKey:e}){await this.loadEndpoint();const r=new(await xe.get("Keyring"))({type:"sr25519"}),n=Buffer.from(e,"hex"),a=r.addFromSeed(n);try{const e=this.endpoint.tx.staking.unbond(Number(t.amount));return{txid:(await e.signAndSend(a)).toString("hex")}}catch(t){throw new l.d({type:d.s,error:new Error(t.message),instance:this})}}}var we=PolkadotNodeExplorer_PolkadotNodeExplorer;class PolkadotSidecarExplorer_PolkadotSidecarExplorer extends c.a{getAllowedTickers(){return["DOT"]}getInfoUrl(t){return`accounts/${t}/balance-info`}getLatestBlockUrl(){return"blocks/head"}getSendTransactionUrl(){return"transaction"}getSendTransactionParam(){return"tx"}getTxMetaUrl(){return"transaction/material"}getTxMetaMethod(){return super.getInfoMethod()}getTxMetaParams(){return{noMeta:!1}}getTxMeta(){return this.request(this.getTxMetaUrl(),this.getTxMetaMethod(),this.getTxMetaParams())}async sendTransaction({rawtx:t}){return super.sendTransaction(t)}modifyInfoResponse(t){if(!t)return{};const{free:e,miscFrozen:r,nonce:n}=t,a=new this.wallet.BN(e).sub(new this.wallet.BN(r)).toString();return{balance:a,balances:{available:this.wallet.toCurrencyUnit(a),free:e,frozen:r},nonce:n}}modifySendTransactionResponse(t){return{txid:t.hash}}}var ye=PolkadotSidecarExplorer_PolkadotSidecarExplorer;class VergeInsightExplorer_VergeInsightExplorer extends c.a{constructor(...t){super(...t),this.canPaginate=!0}getAllowedTickers(){return["XVG"]}getApiPrefix(){return"api/XVG/mainnet/"}getInfoUrl(t){return`${this.getApiPrefix()}address/${t}/balance`}modifyInfoResponse(t){return{balance:t.confirmed}}getTransactionUrl(t){return`${this.getApiPrefix()}tx/${t}/coins`}getTransactionsUrl(t){return`${this.getApiPrefix()}address/${t}/txs`}getTransactionsParams(t,e,r,n){return{pageNum:n}}modifyTransactionsResponse(t,e,r){return e.map(t=>{const e=this.getTxDirection(r,t);return new f.a({ticker:this.wallet.ticker,name:this.wallet.name,walletid:this.wallet.id,txid:this.getTxHash(t),direction:e,otherSideAddress:this.getTxOtherSideAddress(r,t,e),amount:this.getTxValue(r,t,e),datetime:this.getTxDateTime(t),alias:this.wallet.alias})})}getUnspentOutputsUrl(t){return`${this.getApiPrefix()}address/${t}`}getUnspentOutputsParams(){return{unspent:!0}}modifyUnspentOutputsResponse(t,e){return e.map(({value:t,script:e,mintTxid:r,mintIndex:n,address:a})=>({satoshis:t,value:t,script:e,txid:r,vout:n,address:a}))}getSendTransactionUrl(){return this.getApiPrefix()+"tx/send"}getSendTransactionParam(){return"rawTx"}getTxDateTime(t){return new Date(t.blockTimeNormalized)}getTxValue(t,e,r){const n=r?e=>e.address===t:e=>e.address!==t,a=e.outputs.filter(n).reduce((t,e)=>t.add(new this.wallet.BN(e.value)),new this.wallet.BN(0));return this.wallet.toCurrencyUnit(a)}getTxDirection(t,e){return e.inputs.every(e=>e.address!==t)}getTxOtherSideAddress(t,e,r){if(r)return e.inputs[0].address;const n=e.outputs.find(e=>e.address!==t);return(null==n?void 0:n.address)||t}calculateBalance(t=[]){return t.reduce((t,{value:e})=>new this.wallet.BN(e).add(t),new this.wallet.BN("0"))}modifyTransactionResponse(t,e){const r=this.getTxDirection(e,t);return new f.a({ticker:this.wallet.ticker,name:this.wallet.name,walletid:this.wallet.id,txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:r,otherSideAddress:this.getTxOtherSideAddress(e,t,r),amount:this.getTxValue(e,t,r),datetime:this.getTxDateTime(t),confirmations:this.getTxConfirmations(t),alias:this.wallet.alias})}getTxFee(t){return this.wallet.toCurrencyUnit((null==t?void 0:t.fee)||this.wallet.feeDefault||0)}getTxConfirmations(t){return t.confirmations}getTxHash(t){return t.txid}async getTransactionCoins(t){return this.request(`${this.getApiPrefix()}tx/${t}/coins`)}async getTransaction(t){return this.request(`${this.getApiPrefix()}tx/${t}`)}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit,pageNum:n}){const a=await this.request(this.getTransactionsUrl(t),this.getTransactionsMethod(),this.getTransactionsParams(t,e||0,r||this.defaultTxLimit,n),d.i,this.getTransactionsOptions()),s=[];return a.forEach(t=>{t.mintTxid&&-1===s.findIndex(e=>e===t.mintTxid)&&s.push(t.mintTxid),t.spentTxid&&-1===s.findIndex(e=>e===t.spentTxid)&&s.push(t.spentTxid)}),Promise.all(s.map(async e=>{const r=await this.getTransaction(e),n=await this.getTransactionCoins(e);return this.modifyTransactionResponse({txid:e,...r,...n},t)}))}}var ke=VergeInsightExplorer_VergeInsightExplorer,be=r(130);class VetNodeWithBlockscannerExplorer_VetNodeWithBlockscannerExplorer extends(Object(be.c)(G)){}var ve=VetNodeWithBlockscannerExplorer_VetNodeWithBlockscannerExplorer;class TronNodeWithBlockscannerExplorer_TronNodeWithBlockscannerExplorer extends(Object(be.c)(xt)){}var Ee=TronNodeWithBlockscannerExplorer_TronNodeWithBlockscannerExplorer;class TezosNodeWithBlockscannerExplorer_TezosNodeWithBlockscannerExplorer extends(Object(be.c)(Pt)){}var Ae=TezosNodeWithBlockscannerExplorer_TezosNodeWithBlockscannerExplorer;class CosmosNodeWithBlockscannerExplorer_CosmosNodeWithBlockscannerExplorer extends(Object(be.c)(Vt.a)){}var Se=CosmosNodeWithBlockscannerExplorer_CosmosNodeWithBlockscannerExplorer;class BlockbookV2WithBlockscannerExplorer_BlockbookV2WithBlockscannerExplorer extends(Object(be.c)(ae.a)){}var Ce=BlockbookV2WithBlockscannerExplorer_BlockbookV2WithBlockscannerExplorer,Ne=r(1347),Ue=r(1348),Be=r(18),_e=r.n(Be),Pe=r(35),De=r.n(Pe);class SnowTraceExplorer_SnowTraceExplorer extends c.a{constructor(...t){super(...t),_e()(this,"getGasPrice",De.a.throttle(this._getGasPrice,1e3))}getAllowedTickers(){return["AVAX"]}async getTransactions(...t){try{return super.getTransactions(...t)}catch(t){return u.a.error({instance:this,error:this.wallet.ticker+": failed to load transactions"}),[]}}getTransactionsUrl(){return""}getTransactionsParams(t){return{module:"account",action:"txlist",address:t.toLowerCase()}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.result,e).filter(Boolean)}getTxHash(t){return t.hash}getTxDirection(t,e){return t.toLowerCase()===e.to}getTxOtherSideAddress(t,e){return t.toLowerCase()===e.to?e.from:e.to}getTxValue(t,e){return this.wallet.toCurrencyUnit(e.value)}getTxDateTime(t){return new Date(1e3*Number(t.timeStamp))}getTxMemo(t){return t.memo}getTxNonce(t){return t.nonce}getTxFee(t){return this.wallet.toCurrencyUnit(new this.wallet.BN(t.gasUsed).mul(new this.wallet.BN(t.gasPrice)))}getTxFeeTicker(){return this.wallet.ticker}getTransactionsModifiedResponse(t,e){return Number(t.isError)?null:super.getTransactionsModifiedResponse(t,e)}async _getGasPrice(){try{const t=await this.request("https://gavax.blockscan.com/gasapi.ashx","get",{method:"gasoracle",apikey:"key"});return{fastest:t.result.FastGasPrice,fast:t.result.ProposeGasPrice,safeLow:t.result.SafeGasPrice}}catch(t){return u.a.error({instance:this,error:this.wallet.ticker+": failed to get gas prices"}),{}}}}var Ie=SnowTraceExplorer_SnowTraceExplorer,Oe=r(550);class TerraLCDExplorer_TerraLCDExplorer extends c.a{getAllowedTickers(){return["LUNA","LUNC"]}async getBalance(t,e,r=this.wallet.denom){var n;return(null===(n=(await this.wallet.coreLibrary.bank.balance(t))[0].get(r))||void 0===n?void 0:n.amount.toString())||"0"}async getTokenBalanceByContractAddress({address:t,contractAddress:e}){return(await this.wallet.coreLibrary.wasm.contractQuery(e,{balance:{address:t}})).balance||"0"}waitForTx(t){return new Promise(e=>{let r,n=4;const a=setInterval(async()=>{n-=1;try{r=await this.wallet.coreLibrary.tx.txInfo(t),0===r.code&&(clearInterval(a),e(r))}catch(t){console.warn(this.wallet.ticker+" can't find tx!")}n||(clearInterval(a),e(null))},4e3)})}async sendTransaction(t){const e=await this.wallet.coreLibrary.tx.broadcastSync(t).catch(t=>(console.warn(t),null));if(!e||Object(Oe.isTxError)(e))throw new Error((null==e?void 0:e.raw_log)||"Failed to send tx");return{txid:e.txhash}}async getUserDenomList(t){try{const e=await this.wallet.coreLibrary.bank.balance(t);return Object.keys(e[0]._coins).map(t=>({symbol:this.wallet.getTickerFromDenom(t),name:"Terra "+this.wallet.getTickerFromDenom(t),decimals:this.wallet.decimal,denom:t}))}catch(t){return[]}}async estimateFee(t,e,r){return this.wallet.coreLibrary.tx.estimateFee([{sequenceNumber:t}],{msgs:[e],memo:r}).catch(t=>{var e,r,n;const a=429===(null==t||null===(e=t.response)||void 0===e?void 0:e.code),s=null==t||null===(r=t.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message;throw new Error(`${this.wallet.ticker} ${a?"too many requests!":s||"failed to estimate fee"}`)})}async getLatestBlock(){return this.wallet.coreLibrary}}var Re=r(653);class TerraFCDExplorer_TerraFCDExplorer extends c.a{constructor(...t){super(...t),this.network="mainnet"}getAllowedTickers(){return["LUNA"]}async getGasPrice(t=this.wallet.feeDenom()){return(await this.request("/v1/txs/gas_prices","GET"))[t]}getTransactionsUrl(){return"/v1/txs"}getTransactionsParams(t,e,r){return{account:t,offset:e,limit:r}}modifyLatestBlockResponse(t){return t.height}async modifyTransactionsResponse({txs:t},e){if(!Array.isArray(t))return[];const r=Object(Re.createAmountRuleSet)(this.network),n=Object(Re.createLogMatcherForAmounts)(r);let a;try{const t=await this.wallet.coreLibrary.tendermint.blockInfo();a=Number(t.block.last_commit.height)}catch(t){console.warn("[TerraFinderExplorer] modifyTransactionsResponse error: Could not get blockInfo")}return t.flatMap(t=>{const r=Object(Re.getTxAmounts)(JSON.stringify(t),n,e);if(!r)return[];const s=this.getAmountsFromLogs(r,e);if(!s)return[];const{addressFrom:i,addressTo:o,amount:c,isIncoming:l,denom:d,contractAddress:u}=s,h=u?this.wallet.getTickerFromContractAddress(u):this.wallet.getTickerFromDenom(d);if(!h)return[];const g=this.getTxAssetId(h);if(!g)return[];try{var m,p,T,f;return[{ticker:h,name:this.wallet.name,walletid:g,txid:t.txhash,direction:l,otherSideAddress:l?i:o,amount:Number(this.wallet.toCurrencyUnit(c)),datetime:new Date(t.timestamp),memo:t.tx.body.memo,alias:this.wallet.alias,fee:this.wallet.toCurrencyUnit(null===(m=t.tx)||void 0===m||null===(p=m.auth_info)||void 0===p||null===(T=p.fee)||void 0===T||null===(f=T.amount[0])||void 0===f?void 0:f.amount),feeTicker:this.wallet.getTickerFromDenom(t.tx.auth_info.fee.amount.denom),confirmations:void 0!==a?a-t.height:1}]}catch(e){return console.error(e),console.warn("[TerraFinderExplorer] modifyTransactionsResponse error: Could not parse tx:",t),[]}})}getTxAssetId(t){if(t===this.wallet.ticker)return this.wallet.id;const e=this.wallet.tokens(),r=Object.keys(e).find(r=>{var n;return(null===(n=e[r])||void 0===n?void 0:n.ticker)===t});return r?e[r].id:null}getAmountsFromLogs(t,e){const r=[],n=[];let a="",s="";t.forEach(t=>{var i,o;t&&"multiSend"!==(null===(i=t[0])||void 0===i||null===(o=i.transformed)||void 0===o?void 0:o.type)&&t.forEach(t=>{var i,o,c,l;const d=null===(i=t.transformed)||void 0===i||null===(o=i.amount)||void 0===o?void 0:o.split(","),u=null===(c=t.transformed)||void 0===c?void 0:c.sender,h=null===(l=t.transformed)||void 0===l?void 0:l.recipient;e===u&&n.push(...this.getAmount(d)),a=a!==e&&u?u:a,e===h&&r.push(...this.getAmount(d)),s=s!==e&&h?h:s})});const[i,o]=[r,n].map(t=>t.find(t=>t.denom||t.contractAddress)),c=i||o;return c?{addressFrom:a,addressTo:s,amount:null==c?void 0:c.amount,isIncoming:Boolean(i),contractAddress:null==c?void 0:c.contractAddress,denom:null==c?void 0:c.denom}:null}getAmount(t){return Array.isArray(t)?t.map(t=>this.splitCoinData(t.trim())).filter(Boolean):[]}splitCoinData(t){const e=/(terra\d[a-z0-9]{38})/g;try{const r=Oe.Coin.fromString(t),n=r.amount.toString(),{denom:a}=r;return a.match(e)?{amount:n,contractAddress:a}:{amount:n,denom:a}}catch{var r;const n=null===(r=t.match(e))||void 0===r?void 0:r[0],a=t.replace(e,"");return n&&a?{amount:a,denom:n}:null}}}var Le=r(654);class TerraClassicFCDExplorer_TerraClassicFCDExplorer extends TerraFCDExplorer_TerraFCDExplorer{constructor(...t){super(...t),this.network="classic"}getAllowedTickers(){return["LUNC"]}getLatestBlockUrl(){return"/oracle/denoms/actives"}modifyLatestBlockResponse(t){return t.height}async modifyTransactionsResponse({txs:t},e){if(!Array.isArray(t))return[];const r=Object(Le.createAmountRuleSet)(),n=Object(Le.createLogMatcherForAmounts)(r),a=await this.getLatestBlock();return t.flatMap(t=>{const r=Object(Le.getTxAmounts)(JSON.stringify(t),n,e);if(!r)return[];const s=this.getAmountsFromLogs(r,e);if(!s)return[];const{addressFrom:i,addressTo:o,amount:c,isIncoming:l,denom:d,contractAddress:u}=s,h=u?this.wallet.getTickerFromContractAddress(u):this.wallet.getTickerFromDenom(d);if(!h)return[];const g=this.getTxAssetId(h);if(!g)return[];try{var m,p,T,f;return[{ticker:h,name:this.wallet.name,walletid:g,txid:t.txhash,direction:l,otherSideAddress:l?i:o,amount:Number(this.wallet.toCurrencyUnit(c)),datetime:new Date(t.timestamp),memo:t.tx.value.memo,alias:this.wallet.alias,fee:this.wallet.toCurrencyUnit(null===(m=t.tx)||void 0===m||null===(p=m.value)||void 0===p||null===(T=p.fee)||void 0===T||null===(f=T.amount[0])||void 0===f?void 0:f.amount),feeTicker:this.wallet.getTickerFromDenom(t.tx.value.fee.amount[0].denom),confirmations:a-t.height}]}catch(e){return console.error(e),console.warn("[TerraClassicFinderExplorer] modifyTransactionsResponse error: Could not parse tx:",t),[]}})}}class TerraMantleExplorer_TerraMantleExplorer extends c.a{getAllowedTickers(){return["LUNA","LUNC"]}async getUserTokenList(t,e=!1){const r=Object.values(await this.getTokenList(e)),n=r.map(({token:e})=>`${e}: WasmContractsContractAddressStore(ContractAddress: "${e}", QueryMsg : ${JSON.stringify(`{"balance": { "address" : "${t}" } }`)}) {\n Result\n }\n`),a=await Promise.all(De.a.chunk(n,40).map(async t=>this.request("/","POST",{operationName:null,variables:{},query:`{\n ${t.join()}}\n`})));return r.map(t=>a.map(t=>t.data).filter(Boolean).some(e=>{try{var r;const{balance:n}=JSON.parse(null===(r=e[t.token])||void 0===r?void 0:r.Result);return new z.a(n).isGreaterThan(0)}catch(t){return!1}})?t:null).filter(Boolean)}async getTokenList(t=!1){const e=await this.request("https://assets.terra.money/cw20/tokens.json","GET");return t?e.classic:this.wallet.isTestnet()?e.testnet:e.mainnet}async getBannedTokensList(){let t;try{t=await b.a.get("luna-tokens-banned")}catch(t){u.a.error({instance:this,error:t})}return Array.isArray(t)?t:[]}}class ThetaExplorer_ThetaExplorer extends c.a{constructor(...t){super(...t),this.defaultTxLimit=20}getAllowedTickers(){return["THETA","TFUEL"]}async getTransactions(t){try{return await super.getTransactions(t)}catch(t){var e,r,n;if("error_not_found"===(null==t||null===(e=t.errorData)||void 0===e||null===(r=e.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.type))return[];throw t}}getTransactionsUrl(t){return"accountTx/"+t}getTransactionsParams(t,e,r=this.defaultTxLimit,n=0){return{pageNumber:n+1,limitNumber:r}}async modifyTransactionsResponse(t,e){const r=t.body;if(!Array.isArray(r))return[];const n=await this.wallet.getProvider("node").getLatestBlockNumber();return r.flatMap(t=>this.getTransactionsModifiedResponse(t,e,n))}getTransactionsModifiedResponse(t,e,r){var n,a,s,i;const o=e.toLowerCase(),c=(null===(n=t.data.outputs)||void 0===n?void 0:n.find(t=>t.address===o))||(null===(a=t.data.outputs)||void 0===a?void 0:a[0]),l=(null===(s=t.data.inputs)||void 0===s?void 0:s.find(t=>t.address===o))||(null===(i=t.data.inputs)||void 0===i?void 0:i[0]);if(null==c||!c.coins||!l||![c,l].some(t=>(null==t?void 0:t.address)===o))return[];const d=this.wallet.getTokens();return Object.entries(c.coins).reduce((e,[n,a])=>{const s=this.wallet.getProvider("node").getTickerFromProvider(n),i=d[s]||this.wallet;if(new this.wallet.BN(a).lte(new this.wallet.BN(0)))return e;const u=c.address===o;return[...e,new f.a({walletid:i.id,name:i.name,ticker:s,txid:this.getTxHash(t),direction:u,otherSideAddress:(u?l:c).address,amount:i.toCurrencyUnit(a),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),nonce:l.sequence,alias:i.alias,fee:this.getTxFee(t),feeTicker:this.getTxFeeTicker(t),confirmations:this.getTxConfirmations(t,r)})]},[])}getTxHash(t){return t.hash}getTxConfirmations(t,e=0){return"pending"!==t.status?new this.wallet.BN(e).sub(new this.wallet.BN(t.block_height)).toString():"0"}getTxDateTime(t){return new Date(1e3*Number(t.timestamp))}getTxFee(t){return this.wallet.toCurrencyUnit(Object.values(t.data.fee).find(t=>new this.wallet.BN(t).gt(new this.wallet.BN(0))))}getTxFeeTicker(t){const{fee:e}=t.data,r=Object.keys(e).find(t=>new this.wallet.BN(e[t]).gt(new this.wallet.BN(0)));return this.wallet.getProvider("node").getTickerFromProvider(r)}}var Fe=r(624);const Me=/(theta|tfuel)wei/i;class ThetaJSExplorer_ThetaJSExplorer extends c.a{getAllowedTickers(){return["THETA","TFUEL"]}constructor(...t){super(...t),this.initProvider()}initProvider({chainId:t,baseUrl:e}=this.config){try{this.provider=new Fe.providers.HttpProvider(t||Fe.networks.Mainnet.chainId,e||Fe.networks.Mainnet.rpcUrl)}catch(r){u.a.error({instance:this,error:r}),setTimeout(()=>this.initProvider({chainId:t,baseUrl:e}),1e4)}}async getLatestBlockNumber(){return this.provider.getBlockNumber()}async getAccount(t){try{const e=await this.provider.getAccount(t);return{...e,coins:Object.entries(e.coins).reduce((t,[e,r])=>({...t,[this.getTickerFromProvider(e)]:r}),{}),emptyAddress:!1}}catch(t){return-32e3===t.code||u.a.error({instance:this,error:t}),{sequence:0,coins:{},emptyAddress:!0}}}async sendTransaction(t){return{txid:(await this.provider.sendTransaction(t)).hash}}getTickerFromProvider(t){var e;return((null===(e=t.match(Me))||void 0===e?void 0:e[1])||t).toUpperCase()}}}}]);