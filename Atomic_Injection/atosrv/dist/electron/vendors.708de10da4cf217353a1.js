(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1098:function(t,e,r){"use strict";var s=r(8),n=r(29),a=r(4),i=r(3),o=r(39);class AlgoExplorer extends s.a{getAllowedTickers(){return["ALGO"]}getApiPrefix(){return"v2"}getInfoUrl(t){return`${this.getApiPrefix()}/accounts/${t}`}modifyInfoResponse(t){return{balance:t.account.amount}}getTransactionUrl(t){return`${this.getApiPrefix()}/transaction/${t}`}getTransactionsUrl(t){return`${this.getApiPrefix()}/accounts/${t}/transactions`}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{}}async getTransactions(t,e=0,r=this.defaultTxLimit){return super.getTransactions(t,e,r)}modifyTransactionsResponse(t,e){if(!1===Array.isArray(null==t?void 0:t.transactions))throw new a.d({type:i.i,error:t,instance:this});const r=t["current-round"];return t.transactions.map(t=>new n.a({walletid:this.wallet.id,ticker:this.wallet.ticker,name:this.wallet.name,alias:this.wallet.alias,explorer:this.constructor.name,txid:this.getTxHash(t),direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t),fee:this.wallet.toCurrencyUnit(t.fee),feeTicker:this.wallet.parent,datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(r,t)}))}getTxHash(t){return t.id}getTxDirection(t,e){return e["payment-transaction"].receiver===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.sender:e["payment-transaction"].receiver}getTxValue(t,e){return Number(this.wallet.toCurrencyUnit(this.getTxDirection(t,e)?e["payment-transaction"].amount:new this.wallet.BN(e["payment-transaction"].amount).add(new this.wallet.BN(e.fee))))}getTxDateTime(t){return Object(o.a)(t["round-time"])}getTxConfirmations(t,e){return t-e["confirmed-round"]}}e.a=AlgoExplorer},1099:function(t,e,r){"use strict";var s=r(8),n=r(29);class DoraExplorer extends s.a{constructor(t){super(t),this.ticker=this.wallet.ticker.toUpperCase().substr(0,3),this.height=0}getAllowedTickers(){return["NEO","GAS"]}getInitParams(){return{...super.getInitParams(),headers:{"X-Referer":"https://atomicwallet.io"}}}async getInfo(t){let e=[];this.request("height").then(t=>{this.height=Number(t.height)});try{e=await this.request("balance/"+t)}catch(t){console.error(t)}const r={NEO:"0",GAS:"0"};let s;return e.forEach(({asset_name:t,balance:e})=>{t===this.ticker&&(s=e),["NEO","GAS"].includes(t)&&(r[t]=s)}),{balance:s,balances:r}}async getTransactions({address:t}){const e=await this.request(`transfer_history/${t}/1`);return this.modifyTransactionsResponse(e,t)}modifyTransactionsResponse(t,e){return t.items.filter(t=>t.symbol===this.ticker).map(t=>new n.a({ticker:this.ticker,name:this.wallet.name,alias:this.wallet.alias,txid:this.getTxHash(t),walletid:this.wallet.id,datetime:this.getTxDateTime(t),amount:this.getTxValue(e,t),direction:this.getTxDirection(e,t),confirmations:this.getTxConfirmations(t),otherSideAddress:this.getTxOtherSideAddress(e,t)}))}getTxConfirmations(t){return this.height?this.height-t.block:1}getTxHash(t){return t.txid}getTxDirection(t,e){return e.to===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.from:e.to}getTxValue(t,e){return e.amount}getTxDateTime(t){return new Date(1e3*Number(t.time.split(".")[0]))}}e.a=DoraExplorer},1100:function(t,e,r){"use strict";var s=r(8),n=r(3);class IconExplorer extends s.a{getAllowedTickers(){return["ICX"]}getApiPrefix(){return"v3/"}getInfoUrl(t){return this.getApiPrefix()+"address/info"}getInfoParams(t){return{address:t}}modifyInfoResponse(t){var e;return{balance:this.wallet.toMinimalUnit(null===(e=t.data)||void 0===e?void 0:e.balance),transactions:[]}}getTransactionsUrl(t){return this.getApiPrefix()+"address/txList"}getTransactionsParams(t,e=0){return{address:t,page:e>this.defaultTxLimit?parseInt(e/this.defaultTxLimit,10):1,count:this.defaultTxLimit}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.data,e)}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){return this.latestBlock=await this.getLatestBlock(),super.getTransactions({address:t,offset:e,limit:r})}getTxHash(t){return t.txHash}getTxDirection(t,e){switch(e.txType){case n.m.TXTYPE_CLAIM:return!0}return e.toAddr===t}getTxOtherSideAddress(t,e){switch(e.txType){case n.m.TXTYPE_STAKE:return"Stake";case n.m.TXTYPE_DELEGATE:return"Delegate";case n.m.TXTYPE_CLAIM:return"Claim reward";default:return this.getTxDirection(t,e)?e.fromAddr:e.toAddr}}getTxValue(t,e){return e.amount}getTxDateTime({createDate:t=""}){return new Date(t)}getTxConfirmations(t){return this.latestBlock?this.latestBlock.height-t.height:1}getLatestBlockUrl(){return this.getApiPrefix()+"block/list"}getLatestBlockParams(){return{count:1}}modifyLatestBlockResponse(t){return t.data[0]}getSendTransactionUrl(){super.getSendTransactionUrl()}getTxFee(t){return t&&t.fee||0}}e.a=IconExplorer},1101:function(t,e,r){"use strict";var s=r(8);class LiskExplorer extends s.a{getAllowedTickers(){return["LSK"]}getWalletAddress(){return this.wallet.address}getInfo(){return null}modifyInfoResponse(t){return{balance:null==t?void 0:t.balance,transactions:this.wallet.transactions}}getTransactionUrl(t){return this.getApiPrefix()+"/getTransaction"}getTransactionParams(t){return{transactionId:t}}getTransactions(){return Promise.resolve([])}modifyTransactionsResponse(t,e){var r;return super.modifyTransactionsResponse(null!==(r=null==t?void 0:t.transactions)&&void 0!==r?r:[],e)}getTxHash(t){return t.id}getTxDateTime(t){const e=Date.UTC(2016,4,24,17,0,0,0),r=1e3*Number(t.timestamp)+e;return new Date(Number(""+r))}getTxDirection(t,e){return t===e.recipientId}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.senderId:e.recipientId}getTxValue(t,e){return Number(this.wallet.toCurrencyUnit(this.getTxDirection(t,e)?e.amount:new this.wallet.BN(e.amount).add(new this.wallet.BN(e.fee))))}getTxConfirmations(t){return t.confirmations}getTxFee(t){return this.wallet.toCurrencyUnit(t&&t.fee||0)}}e.a=LiskExplorer},1102:function(t,e,r){"use strict";var s=r(8),n=r(4),a=r(3);class AtomicExplorer extends s.a{getAllowedTickers(){return["KMD"]}async getInfo(t){const e=await this.request("rewards?address="+t);if("success"!==e.msg)throw new n.d({type:a.s,error:new Error(JSON.stringify(e)),instance:this});return{balance:e.result.balanceSats,balances:e.result}}async getRewards(t){const e=await this.request("rewards?address="+t);if("success"!==e.msg)throw new n.d({type:a.s,error:new Error(JSON.stringify(e)),instance:this});return e.result.interest}}e.a=AtomicExplorer},1103:function(t,e,r){"use strict";var s=r(8),n=r(3),a=r(29),i=r(39);class KabutoExplorer extends s.a{getAllowedTickers(){return["HBAR"]}getApiPrefix(){return""}async getInfo(t){if(!t)throw new Error("[HBAR] KabutoExplorer: address is not defined");const e=await this.request(this.getInfoUrl(t),this.getInfoMethod(),this.getInfoParams(),n.f,this.getInfoOptions());return this.modifyInfoResponse(e,t)}getInfoUrl(t){return"account/"+t}getTxValue(t,e){return Object(i.c)(e.value,this.wallet.decimal)}getTxDateTime(t){return new Date(t.consensusAt)}getTxDirection(t,e){return e.transfers.find(t=>t.amount===e.value).account===t}getTxHash(t){return t.hash}getTxMemo(t){return t.memo||""}getTxOtherSideAddress(t,e){const r=e.transfers.find(t=>t.amount===e.value);return this.getTxDirection(t,e)?e.operator:r.account}modifyInfoResponse(t){return{balance:t.balance.amount,transactions:[]}}async getTransaction(t,e){const r=await this.request("transaction/"+e);return this.modifyTransactionResponse(r,t)}async getTransactions({address:t}){if(!t)throw new Error("KabutoExplorer: no address");const e=await this.request(`account/${t}/transaction`);return this.modifyTransactionsResponse(e,t)}modifyTransactionsResponse(t,e){return t.transactions.filter(t=>"CRYPTO_TRANSFER"===t.type).map(t=>({ticker:this.wallet.ticker,name:this.wallet.name,alias:this.wallet.alias,walletid:this.wallet.id,explorer:"KabutoExplorer",txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:"HBAR",direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:1})).map(t=>new a.a(t))}getTxFee(t){return Object(i.c)(t&&t.fee||0,this.wallet.decimal)}}e.a=KabutoExplorer},1104:function(t,e,r){"use strict";var s=r(8),n=r(29),a=r(3),i=r(39);class KabutoExplorerV2 extends s.a{getAllowedTickers(){return["HBAR"]}getApiPrefix(){return""}async getInfo(t){if(!t)throw new Error("[HBAR] KabutoExplorerV2: address is not defined");const e=await this.request(this.getInfoUrl(t),this.getInfoMethod(),this.getInfoParams(),a.f,this.getInfoOptions());return this.modifyInfoResponse(e,t)}getInfoUrl(t){return"id/"+t}getTransactionsUrl(t){return"/transaction?filter[entityId]="+t}getTxValue(t,e){const r=this.getTxDirection(t,e),s=this.getTxOtherSideAddress(t,e),n=r?this.getTransferFromTx(s,e):this.getTransferFromTx(t,e);return Object(i.c)(n.amount,this.wallet.decimal)}getTxDateTime(t){return new Date(t.consensusAt)}getTxDirection(t,e){return this.getTransferFromTx(t,e).amount<0}getTxHash(t){return t.hash}getTxMemo(t){return t.memo||""}getTransferFromTx(t,e){const r=[t,e.nodeAccountId,"0.0.98"];return e.transfers.find(t=>!r.includes(t.accountId))}getTxOtherSideAddress(t,e){return this.getTransferFromTx(t,e).accountId}modifyInfoResponse(t){return{balance:t.balance.amount,transactions:[]}}async getTransaction(t,e){const r=await this.request("transaction/"+e);return this.modifyTransactionResponse(r,t)}async getTransactions({address:t}){if(!t)throw new Error("KabutoExplorerV2: no address");const e=await this.request(this.getTransactionsUrl(t));return this.modifyTransactionsResponse(e,t)}modifyTransactionsResponse(t,e){return t.data.filter(t=>"TRANSFER"===t.type).map(t=>({ticker:this.wallet.ticker,name:this.wallet.name,alias:this.wallet.alias,walletid:this.wallet.id,explorer:"KabutoExplorerV2",txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:"HBAR",direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:1})).map(t=>new n.a(t))}getTxFee(t){return Object(i.c)(t&&t.fee||0,this.wallet.decimal)}}e.a=KabutoExplorerV2},1105:function(t,e,r){"use strict";var s=r(8),n=r(130);class BCDNodeExplorer extends(Object(n.a)(s.a)){getAllowedTickers(){return["BCD"]}}e.a=BCDNodeExplorer},1106:function(t,e,r){"use strict";var s=r(8);class DcrDataExplorer extends s.a{getAllowedTickers(){return["DCR"]}getInfoUrl(t){return`${this.getApiPrefix()}/address/${t}/totals`}modifyInfoResponse(t){return{balance:this.wallet.toMinimalUnit(t.dcr_unspent),transactions:[]}}getTransactionUrl(t){return`${this.getApiPrefix()}/tx/${t}`}getTransactionsUrl(t,e,r){return`${this.getApiPrefix()}/address/${t}/count/${r}/skip/${e}/raw`}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){const s=await this.request(this.getTransactionsUrl(t,e,r),this.getTransactionsMethod(),this.getTransactionsParams(),"GetTxs");return this.modifyTransactionsResponse(s,t)}getTxValue(t,e){let r=new this.wallet.BN(0),s=new this.wallet.BN(0),n=new this.wallet.BN(0),a=new this.wallet.BN(0);e.vin.forEach(e=>{e.prevOut.addresses&&e.prevOut.addresses.length>0&&e.prevOut.addresses[0]===t&&(r=r.add(new this.wallet.BN(this.wallet.toMinimalUnit(e.amountin)))),n=n.add(new this.wallet.BN(this.wallet.toMinimalUnit(e.amountin)))}),e.vout.forEach(e=>{e.scriptPubKey.addresses&&e.scriptPubKey.addresses.length>0&&e.scriptPubKey.addresses[0]===t&&(s=s.add(new this.wallet.BN(this.wallet.toMinimalUnit(e.value)))),a=a.add(new this.wallet.BN(this.wallet.toMinimalUnit(e.value)))});const i=r.sub(s),o=i.lt(new this.wallet.BN(0)),c=i.abs(),l=n.sub(a);return Number(this.wallet.toCurrencyUnit(o?c:c.sub(l)))}getTxDirection(t,e){return e.vin&&!e.vin.find(({prevOut:e})=>e.addresses&&e.addresses.length>0&&e.addresses[0]===t)}getTxOtherSideAddress(t,e){if(!e.vin)return"...";if(this.getTxDirection(t,e))return e.vin[0].prevOut.addresses&&e.vin[0].prevOut.addresses.length>0?e.vin[0].prevOut.addresses[0]:"...";let r=new this.wallet.BN(0),s="...";return e.vout.forEach(e=>{e.scriptPubKey.addresses.length>0&&e.scriptPubKey.addresses[0]!==t&&r.lt(new this.wallet.BN(this.wallet.toMinimalUnit(e.value)))&&(r=new this.wallet.BN(this.wallet.toMinimalUnit(e.value)),s=e.scriptPubKey.addresses[0])}),s}}e.a=DcrDataExplorer},1107:function(t,e,r){"use strict";var s=r(1628),n=r(883),a=r(8),i=r(4),o=r(3);class EOSNodeExplorer extends a.a{getAllowedTickers(){return["EOS"]}async getKeyAccounts(t){const e=await this.request(this.getApiPrefix()+"history/get_key_accounts","post",{public_key:t},"KeyAccountInfo");if(!e.account_names)throw new i.i({type:o.n,error:new Error(`${o.p}${this.config.baseUrl}`),instance:this});return e.account_names}async checkAccountName(t){const e=await this.request(this.getApiPrefix()+"chain/get_account","post",{account_name:t},"checkAccountName").catch(()=>{console.warn(t+" is already in use")});return!(e&&e.permissions&&e.permissions.length>0)}getInfoUrl(t){return this.getApiPrefix()+"chain/get_currency_balance"}getApiPrefix(){return"/v1/"}getInfoMethod(){return"post"}getInfoParams(t){return{code:this.wallet.assetName,account:t}}modifyInfoResponse(t){return{balance:t,transactions:[]}}getTransactionsUrl(t){return this.getApiPrefix()+"history/get_actions"}getTransactionsMethod(){return"post"}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{pos:-1,offset:-r,account_name:t}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.actions.filter(t=>this.wallet.assetName===t.action_trace.act.account&&"transfer"===t.action_trace.act.name).reduce((t,e)=>(t.some(t=>t.action_trace.trx_id===e.action_trace.trx_id)||t.push(e),t),[]).reverse(),e)}getTxHash(t){return t.action_trace.trx_id}getTxDirection(t,e){return e.action_trace.act.data.to===t}getTxOtherSideAddress(t,e){return e.action_trace.act.data.to===t?e.action_trace.act.data.from:e.action_trace.act.data.to}getTxValue(t,e){const r=e.action_trace.act.data.quantity.split(" ");return Number(r[0])}getTxDateTime(t){return new Date(t.action_trace.block_time)}getTxConfirmations(t){return 10}getTxMemo(t){return t.action_trace.act.data.memo}async sendTransaction(t,e){const r=JSON.parse(t),a=new n.Api({rpc:new n.JsonRpc(this.config.baseUrl.replace(/\/$/,""),{fetch:fetch}),signatureProvider:new s.JsSignatureProvider([JSON.parse(e).active.privateKey]),textDecoder:new TextDecoder,textEncoder:new TextEncoder});try{return{txid:(await a.transact(r,{blocksBehind:10,expireSeconds:3600})).transaction_id}}catch(t){if(t.message&&t.message.indexOf("CPU")+1)return{error:"CPU"};if(t.message&&t.message.indexOf("RAM")+1)return{error:"RAM"};throw new i.d({type:o.s,error:t,instance:this})}}async getAccount(t){return this.request(this.getApiPrefix()+"chain/get_account","post",{account_name:t})}getTxFee(){return 0}}e.a=EOSNodeExplorer},1126:function(t,e,r){"use strict";var s=r(8),n=r(4),a=r(3);class EOSApiExplorer extends s.a{constructor(...t){super(...t),this.apiKey=t[3]}getAllowedTickers(){return["EOS"]}async validateNewAccountName(t){const e=await this.request(this.config.baseUrl,"get",{module:"account",action:"get_account_info",apikey:this.apiKey,account:t}).catch(t=>{throw new n.d({type:a.d,error:t,instance:this})});return!(e.data&&e.data.permissions&&e.data.permissions.length>0)&&(this.wallet.address=t,!0)}}e.a=EOSApiExplorer},1127:function(t,e,r){"use strict";var s=r(28),n=r.n(s),a=r(106),i=r.n(a),o=r(8),c=r(4),l=r(3),d=r(29);class InsightExplorer extends o.a{constructor(...t){super(...t),this.canPaginate=!0}getAllowedTickers(){return["BTC","LTC","ZEC","DGB","DASH","DOGE","BTG","QTUM","BCH","BSV","SMART","DCR","GRS","YEC","RVN","KMD","BCD"]}getWalletAddress(t){return["BCH","BSV"].includes(this.wallet.ticker)&&i.a.isCashAddress(t)?i.a.toLegacyAddress(t):t}getApiPrefix(){return["BTG","BCD"].includes(this.wallet.ticker)?"insight-api/":"YEC"===this.wallet.ticker?"api/YEC/mainnet/":"KMD"===this.wallet.ticker?"insight-api-komodo/":"api/"}getInfoUrl(t){return`${this.getApiPrefix()}addr/${t}`}modifyInfoResponse(t){return{balance:t.balanceSat,transactions:[]}}getTransactionUrl(t){return`${this.getApiPrefix()}tx/${t}`}getTransactionsUrl(t){return"DCR"===this.wallet.ticker?`${this.getApiPrefix()}addr/${t}/txs`:`${this.getApiPrefix()}txs?address=${t}`}getTransactionsParams(t,e,r,s){return{pageNum:s}}modifyTransactionsResponse(t,e){return"DCR"===this.wallet.ticker?Promise.all(t.transactions.map(async t=>this.getTransaction(t))):super.modifyTransactionsResponse(t.txs,e)}getUnspentOutputsUrl(t){return"YEC"===this.wallet.ticker?`${this.getApiPrefix()}address/${t}/`:`${this.getApiPrefix()}addr/${t}/utxo`}getUnspentOutputsParams(){return"YEC"===this.wallet.ticker?{unspent:!0,limit:1e3}:{}}modifyUnspentOutputsResponse(t,e){return"YEC"===this.wallet.ticker?e.map(({address:t,mintTxid:e,mintIndex:r,script:s,value:n})=>({txid:e,vout:r,script:s,value:n,address:t,outputIndex:r,satoshis:n})):e.map(({address:t,txid:e,vout:r,scriptPubKey:s,satoshis:n,amount:a})=>({txid:e,txId:e,vout:r,script:s,value:n||a,address:this.modifyUnspentAddress(t),outputIndex:r,satoshis:"DGB"===this.wallet.ticker?Number(this.wallet.toMinimalUnit(n||a)):n||a,atoms:Number(n)}))}modifyUnspentAddress(t){return["BCH","BSV"].includes(this.wallet.ticker)?i.a.isCashAddress(t)?t:i.a.toCashAddress(t):t}getSendTransactionUrl(){return this.getApiPrefix()+"tx/send"}getSendTransactionParam(){return"YEC"===this.wallet.ticker?"rawTx":"rawtx"}async sendTransaction(t){let e;const r=`${this.config.baseUrl}${this.getSendTransactionUrl()}`;try{e="BTG"===this.wallet.ticker?await n.a.post(r,`${this.getSendTransactionParam()}=${t}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}):await n.a.post(r,{[this.getSendTransactionParam()]:t})}catch(t){throw new c.d({type:l.s,error:t,url:r,instance:this})}return this.modifyGeneralResponse(this.modifySendTransactionResponse(e))}getTxDateTime(t){return t.time?new Date(Number(t.time+"000")):new Date}getTxValue(t,e){let r=new this.wallet.BN(0),s=new this.wallet.BN(0);if(!e.vin||!e.vout)return 0;e.vin.forEach(e=>{e.addr===t&&(r=r.add(new this.wallet.BN(e.valueSat)))}),e.vout.forEach(e=>{e.scriptPubKey.addresses&&e.scriptPubKey.addresses.length>0&&e.scriptPubKey.addresses[0]===t&&(s=s.add(new this.wallet.BN(this.wallet.toMinimalUnit(e.value))))});const n=r.sub(s),a=n.lt(new this.wallet.BN(0)),i=n.abs();return Number(this.wallet.toCurrencyUnit(a?i:i.sub(new this.wallet.BN(this.wallet.toMinimalUnit(e.fees)))))}getTxDirection(t,e){return e.vin&&!e.vin.find(({addr:e})=>e===t)}getTxOtherSideAddress(t,e){if(!e.vin)return"...";if(this.getTxDirection(t,e))return e.vin[0].addr;let r=new this.wallet.BN(0),s="...";return e.vout.forEach(e=>{e.scriptPubKey&&e.scriptPubKey.addresses&&e.scriptPubKey.addresses.length>0&&e.scriptPubKey.addresses[0]!==t&&r.lt(new this.wallet.BN(this.wallet.toMinimalUnit(e.value)))&&(r=new this.wallet.BN(this.wallet.toMinimalUnit(e.value)),s=e.scriptPubKey.addresses[0])}),s}calculateBalance(t=[]){return t.reduce((t,{value:e})=>new this.wallet.BN(e).add(t),new this.wallet.BN("0"))}modifyTransactionResponse(t,e){return new d.a({ticker:this.wallet.ticker,name:this.wallet.name,walletid:this.wallet.id,txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t),alias:this.wallet.alias,locktime:t.locktime})}getTxFee(t){return"SMART"===this.wallet.ticker?t&&t.fees||0:this.wallet.toCurrencyUnit(t&&t.fees||0)}}e.a=InsightExplorer},1128:function(t,e,r){"use strict";var s=r(8),n=r(3);class IquidusExplorer extends s.a{getAllowedTickers(){return["TPAY"]}getWalletAddress(){return this.wallet.address}getInfoUrl(t){return"ext/getaddress/"+t}modifyInfoResponse(t){if(void 0!==t.error)throw new TypeError("Can't get info from the explorer!");return{balance:this.wallet.toMinimalUnit(t.balance),transactions:[]}}getTransactionsUrl(t){return this.getInfoUrl(t)}async getRawTransaction(t){return await this.request(this.getTransactionUrl(t),this.getTransactionMethod(),this.getTransactionParams(t),n.i)}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return"XVG"===this.wallet.ticker?{}:{from:e,to:e+r}}modifyTransactionsResponse(t,e){return this.txList=[],Promise.all(t.last_txs.reverse().reduce((t,{addresses:r})=>(-1===this.txList.indexOf(r)&&(t.push(this.getTransaction(e,r)),this.txList.push(r)),t),[]))}getTransactionUrl(t){return"api/getrawtransaction"}getTransactionParams(t){return{txid:t,decrypt:1}}getTxDirection(t,e){let r=!1;return e.vin.forEach(e=>{try{const s=this.wallet.coreLibrary.script.decompile(Buffer.from(e.scriptSig.hex,"hex"));this.wallet.getAddressFromPublicKey(s[1])!==t&&(r=!0)}catch(t){console.error(t)}}),r}getTxOtherSideAddress(t,e){if(!this.getTxDirection(t,e)){let t=new this.wallet.BN(0),r="...";return e.vout.forEach(e=>{e.scriptPubKey.addresses.length>0&&e.scriptPubKey.addresses[0]!==this.getWalletAddress()&&t.lt(new this.wallet.BN(this.wallet.toMinimalUnit(e.value)))&&(t=new this.wallet.BN(this.wallet.toMinimalUnit(e.value)),r=e.scriptPubKey.addresses[0])}),r}const r=this.wallet.coreLibrary.script.decompile(Buffer.from(e.vin[0].scriptSig.hex,"hex"));return this.wallet.getAddressFromPublicKey(r[1])}getTxValue(t,e){let r=new this.wallet.BN(0),s=new this.wallet.BN(0);return e.vout.forEach(t=>{t.scriptPubKey.addresses.length>0&&(t.scriptPubKey.addresses[0]===this.getWalletAddress()&&(s=s.add(new this.wallet.BN(this.wallet.toMinimalUnit(t.value)))),r=r.add(new this.wallet.BN(this.wallet.toMinimalUnit(t.value))))}),this.getTxDirection(t,e)?Number(this.wallet.toCurrencyUnit(s)):Number(this.wallet.toCurrencyUnit(r.sub(s)))}getUnspentOutputsUrl(t){return this.getInfoUrl(t)}async modifyUnspentOutputsResponse(t,e){return this.txList=[],Promise.all(e.last_txs.reverse().reduce((t,{addresses:e})=>(-1===this.txList.indexOf(e)&&(t.push(this.getRawTransaction(e)),this.txList.push(e)),t),[]))}async getUnspentOutputs(t){const e=await this.request(this.getUnspentOutputsUrl(t),this.getUnspentOutputsMethod(),this.getUnspentOutputsParams(t),n.k),r=await this.modifyUnspentOutputsResponse(t,e),s=[];return r.forEach(e=>{e.vout.forEach(r=>{r.scriptPubKey.addresses[0]===t&&s.push({unSpent:!0,txid:e.txid,vout:r.n,script:r.scriptPubKey.hex,satoshis:this.wallet.toMinimalUnit(r.value),value:this.wallet.toMinimalUnit(r.value)})})}),r.forEach(e=>{e.vin.forEach(e=>{try{const r=this.wallet.coreLibrary.script.decompile(Buffer.from(e.scriptSig.hex,"hex")),n=this.wallet.coreLibrary.ECPair.fromPublicKey(r[1],this.wallet.network);if(this.wallet.getAddressFromPublicKey(n.publicKey)===t){const t=s.find(({txid:t})=>t===e.txid);void 0!==t&&(t.unSpent=!1)}}catch(t){console.error("Error: Could not parse input "+e.txid)}})}),s.filter(({unSpent:t})=>t)}calculateBalance(t=[]){return t.reduce((t,{value:e})=>new this.wallet.BN(e).add(t),new this.wallet.BN("0"))}getSendTransactionUrl(){if("TPAY"===this.wallet.ticker)return"https://electrum-us.tpay.ai/api-tpay/send"}getSendTransactionParam(){return"rawtx"}getSendTransactionParams(t){return super.getSendTransactionParams(t)}modifySendTransactionResponse(t){return{txid:t}}}e.a=IquidusExplorer},1129:function(t,e,r){"use strict";var s=r(184),n=r.n(s),a=r(8),i=r(4),o=r(3),c=r(20);const l=n.a.model.network.data.mainnet;class NemNodeExplorer extends a.a{constructor(...t){super(...t),this.endpoint=n.a.model.objects.create("endpoint")(this.config.baseUrl,n.a.model.nodes.defaultPort)}getAllowedTickers(){return["XEM"]}getWalletAddress(){return this.wallet.address}updateEndpoint(t){this.config.baseUrl=t,this.endpoint=n.a.model.objects.create("endpoint")(t,n.a.model.nodes.defaultPort)}async getInfo(t){const e=await n.a.com.requests.account.data(this.endpoint,t);return this.modifyInfoResponse(e)}modifyInfoResponse(t){return{balance:t.account.balance,transactions:this.wallet.transactions}}async getTransaction(t){const e=await n.a.com.requests.transaction.byHash(this.endpoint,t);return this.modifyTransactionResponse(e)}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){this.latestBlock=await this.getLatestBlock();const s=await n.a.com.requests.account.transactions.all(this.endpoint,t);return this.modifyTransactionsResponse(s.data,t)}async getLatestBlock(){return await n.a.com.requests.chain.height(this.endpoint)}getTxHash(t){return t.meta.hash.data}getTxDateTime(t){const e=Date.UTC(2015,2,29,0,6,25,0),r=1e3*Number(t.transaction.timeStamp)+e;return new Date(Number(""+r))}getTxMemo(t){return Object(c.f)(t.transaction.message.payload)}getTxDirection(t,e){return t===e.transaction.recipient}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?n.a.model.address.toAddress(e.transaction.signer,l.id):e.transaction.recipient}getTxValue(t,e){return Number(this.wallet.toCurrencyUnit(this.getTxDirection(t,e)?e.transaction.amount:new this.wallet.BN(e.transaction.amount).add(new this.wallet.BN(e.transaction.fee))))}getTxConfirmations(t){return this.latestBlock?this.latestBlock.height-t.meta.height:Number(1)}async sendTransaction(t){try{const e=await n.a.com.requests.transaction.announce(this.endpoint,t);return this.modifySendTransactionResponse(e)}catch(t){throw new i.d({type:o.s,error:t,instance:this})}}modifySendTransactionResponse(t){if("SUCCESS"!==t.message)throw new Error(t.message);return{txid:t.transactionHash.data}}getTxFee(t){return this.wallet.toCurrencyUnit(t&&t.transaction&&t.transaction.fee||0)}}e.a=NemNodeExplorer},1182:function(t,e,r){"use strict";var s=r(8);const n={NEO:"c56f33fc6ecfcd0c225c4ab356fee59390af8560be0e930faebe74a6daff7c9b",GAS:"602c79718b16e442de58778e148d0b1084e3b2dffd5de6b7b16cee7969282de7"};class NeoscanExplorer extends s.a{getAllowedTickers(){return["NEO","GAS"]}async getInfo(t){const[e,{unclaimed:r}]=await Promise.all([this.request("get_balance/"+t),this.request("get_unclaimed/"+t)]),s=this.modifyInfoResponse(e),n=this.wallet.ticker.substr(0,3).toLowerCase(),a=this.wallet.toMinimalUnit(s[n]);return{balance:a,balances:{available:this.wallet.toCurrencyUnit(a),rewards:r,...s}}}getTransactionUrl(t){return"get_transaction/"+t}getTransactionsUrl(t){return`get_last_transactions_by_address/${t}/0`}modifyInfoResponse(t){const e={};return t.balance.forEach(({asset_symbol:t,amount:r})=>{["NEO","GAS"].includes(t)&&(e[t.toLowerCase()]=r)}),e}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(this.filterTransactionList(t,e),e)}filterTransactionList(t,e){const r=this.wallet.ticker.substr(0,3);return t.filter(t=>{let s=!1;return this.getTxDirection(e,t)?t.vouts.forEach(t=>{t.asset===n[r]&&(s=!0)}):t.vin.forEach(t=>{t.asset===n[r]&&(s=!0)}),s})}getTxHash(t){return t.txid}getTxDirection(t,e){return!(e.vouts&&e.vouts.find(({address_hash:e})=>e!==t))}getTxOtherSideAddress(t,e){if(!e.vin)return"...";if(this.getTxDirection(t,e))return e.vin.length>0?e.vin[0].address_hash:"-";let r=new this.wallet.BN(0),s="...";const a=this.wallet.ticker.substr(0,3);return e.vouts.forEach(e=>{e.address_hash!==t&&e.asset===n[a]&&r.lt(new this.wallet.BN(this.wallet.toMinimalUnit(e.value)))&&(r=new this.wallet.BN(this.wallet.toMinimalUnit(e.value)),s=e.address_hash)}),s}getTxValue(t,e){let r=new this.wallet.BN(0),s=new this.wallet.BN(0);const a=this.wallet.ticker.substr(0,3);e.vin.forEach(e=>{e.address_hash===t&&e.asset===n[a]&&(r=r.add(new this.wallet.BN(this.wallet.toMinimalUnit(e.value))))}),e.vouts.forEach(e=>{e.address_hash===t&&e.asset===n[a]&&(s=s.add(new this.wallet.BN(this.wallet.toMinimalUnit(e.value))))});const i=r.sub(s).abs();return Number(this.wallet.toCurrencyUnit(i))}getTxDateTime(t){return new Date(Number(t.time+"000"))}getTxConfirmations(t){return 10}async sendTransaction(t){return this.wallet.sendTransaction(t)}getTxFee(t){return t&&t.net_fee||0}getTxFeeTicker(){return"GAS"}}e.a=NeoscanExplorer},1183:function(t,e,r){"use strict";var s=r(8);class NeoNodeExplorer extends s.a{constructor(...t){super(...t);const{wallet:e,config:r}=t[0];this.nodeClientPromise=e.coreLib.api.NetworkFacade.fromConfig({node:r.baseUrl})}getAllowedTickers(){return["NEO","GAS"]}async sendTransaction({tx:t,signingConfig:e}){return(await this.getClient()).transferToken([t],e)}async getFeeInformation(t){const e=await this.getClient();return t.getFeeInformation(e)}async sendRawTransaction(t){return(await this.getClient()).sendRawTransaction(t)}async getClient(){return(await this.nodeClientPromise).client}}e.a=NeoNodeExplorer},1184:function(t,e,r){"use strict";var s=r(8),n=r(4),a=r(3),i=r(29);const o={SIDECHAIN_DELEGATE:"stake",SIDECHAIN_UNDELEGATE:"unstake",TRANSFER:"transfer"};class BinanceExplorer extends s.a{getAllowedTickers(){return["BNB"]}async getBalance(t){const{balance:e}=await this.request(`${this.config.baseUrl}api/v1/balances/${t}`);return e}async getAssetTransfers({address:t,txArray:e}){const r=[],s=e.reduce((t,e)=>{if(Object.keys(o).includes(e.txType)){if(e.hasChildren)return r.push({hash:e.txHash,height:e.blockHeight}),t;t.push(e)}return t},[]);return{transactions:this.modifyTransactionsResponse(s,t),multisend:r}}async getTransactions({address:t}){const e=`${this.config.baseUrl}api/v1/txs?page=1&rows=100&address=${t}`,r=await this.request(e).catch(t=>{throw new n.d({type:a.i,error:t,instance:this})});if(0===r.txNums)return[];return await this.getAssetTransfers({txArray:r.txArray,address:t})}modifyTransactionsResponse(t,e){return Array.isArray(t)?t.map(t=>new i.a({ticker:t.txAsset,name:this.wallet.name,txid:this.getTxHash(t),walletid:this.getTxAssetId(t.txAsset),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t),txType:this.getTransactionType(t),alias:this.wallet.alias})):[]}getTransactionType({txType:t}){return o[t]||o.TRANSFER}getTxAssetId(t){if(t===this.wallet.ticker)return this.wallet.id;const e=Object.keys(this.wallet.tokens()).find(e=>this.wallet.tokens()[e].ticker===t);return this.wallet.tokens()[e].id}getTxHash(t){return t.txHash}getTxDirection(t,e){return"TRANSFER"===e.txType&&(e.hasChildren||e.toAddr===t)}getTxOtherSideAddress(t,e){if(e.hasChildren)return"Multiple Addresses";if("TRANSFER"!==e.txType)try{return JSON.parse(e.data).validatorAddress}catch{return this.getTxDirection(t,e)?e.fromAddr:e.toAddr}return this.getTxDirection(t,e)?e.fromAddr:e.toAddr}getTxValue(t,e){if(void 0===e.value)return"0";const r=String(e.value).replace(/(\.\d*[1-9])0+$|\.0*$/,"$1");let s=!1;return-1!==r.search("e")&&(s=!0),s?e.value.toFixed(8).replace(/(\.\d*[1-9])0+$|\.0*$/,"$1"):r}getTxDateTime(t){return new Date(t.timeStamp)}getTxMemo(t){return t.memo}getTxConfirmations(t){return t.txAge}getTxFee(t){return t&&t.txFee||0}}e.a=BinanceExplorer},1195:function(t,e,r){"use strict";var s=r(8);class AlgoNodeExplorer extends s.a{getAllowedTickers(){return["ALGO"]}getApiPrefix(){return"v2"}getSendTransactionUrl(){return this.getApiPrefix()+"/transactions"}getSendTransactionParams(t){return t}getSendOptions(){return{headers:{"Content-Type":"application/x-binary"}}}getLatestBlockUrl(){return this.getApiPrefix()+"/transactions/params"}getTxFee(t){return this.wallet.toCurrencyUnit(t&&t.fee||0)}modifySendTransactionResponse(t){return{txid:t.txId}}}e.a=AlgoNodeExplorer},1196:function(t,e,r){"use strict";var s=r(622),n=r.n(s),a=r(8),i=r(4),o=r(3);class IconNodeExplorer extends a.a{constructor(...t){super(...t);const e=new n.a.HttpProvider(`${this.config.baseUrl}${this.getApiPrefix()}`),r=new n.a(e);this.service=r,this.sdk=n.a}getAllowedTickers(){return["ICX"]}getApiPrefix(){return"api/v3/"}async getInfo(t){return{balance:(await this.service.getBalance(t).execute()).toString()}}async sendTransaction(t){try{return{txid:await this.service.sendTransaction(t).execute()}}catch(t){throw new i.d({type:o.s,error:t,instance:this})}}async call(t){try{return this.service.call(t).execute()}catch(t){throw new i.d({type:o.s,error:t,instance:this})}}getTransactionByHash(t){try{return this.service.getTransaction(t).execute()}catch(t){throw new i.d({type:o.s,error:t,instance:this})}}getTransactionResult(t){try{return this.service.getTransactionResult(t).execute()}catch(t){throw new i.d({type:o.s,error:t,instance:this})}}}e.a=IconNodeExplorer},1197:function(t,e,r){"use strict";var s=r(1198),n=r(8);class HashnodeExplorer extends n.a{constructor(...t){super(...t),this.node={[this.config.baseUrl]:"0.0.3"}}getAllowedTickers(){return["HBAR"]}async getInfo(t){if(!t)throw new Error("[HBAR] HashnodeExplorer: address is not defined");return{balance:(await this.wallet.getClient().getAccountBalance(t)).asTinybar().toString()}}async sendTransaction({rawtx:t,account:e,privateKey:r}){if(!t)throw new Error(`HBAR: sendTransaction error: incorrect tx: got "${t}" of type ${typeof t}`);const n=s.Transaction.fromBytes(new Uint8Array(Buffer.from(t,"hex"))),a=await n.execute(this.wallet.getClient()),i=await a.getReceipt(this.wallet.getClient());if(i.status&&22!==i.status.code)throw new Error(i.status);const o={txid:a.toString()};try{o.accountId=i.accountId}catch(t){console.warn("[HashnodeExplorer] sendTransaction:",t)}return o}}e.a=HashnodeExplorer},1236:function(t,e,r){"use strict";var s=r(8);class LiskNodeExplorer extends s.a{getAllowedTickers(){return["LSK"]}getWalletAddress(){return this.wallet.address}getSendTransactionUrl(){return this.getApiPrefix()+"/transactions/"}getSendTransactionParams(t){return JSON.parse(t)}async sendTransaction(t){const e=JSON.parse(t);return this.txId=e.id,super.sendTransaction(t)}modifySendTransactionResponse(t){return{txid:this.txId}}}e.a=LiskNodeExplorer},1237:function(t,e,r){"use strict";var s=r(8);class MintscanExplorer extends s.a{getAllowedTickers(){return["ATOM"]}getApiPrefix(){return"v1"}getInfoUrl(t){return`${this.getApiPrefix()}/account/${t}`}modifyInfoResponse(t){const{balance:e,rewards:r,delegations:s,unbonding_delegations:n}=t;let a="0";const i={validators:{},total:new this.wallet.BN("0")},o={validators:{},total:new this.wallet.BN("0")};let c=new this.wallet.BN(0);if(e&&e.length>0&&(a=new this.wallet.BN(e[0].amount).toString()),r&&r.length>0&&r.forEach(({amount:t})=>{c=c.add(new this.wallet.BN(t.split(".")[0]))}),s&&s.length>0){let t=new this.wallet.BN("0");s.forEach(({moniker:e,shares:r,validator_address:s})=>{i.validators[e]={shares:this.wallet.toCurrencyUnit(r.split(".")[0]),address:s},t=t.add(new this.wallet.BN(r.split(".")[0]))}),i.total=this.wallet.toCurrencyUnit(t.toString())}if(n&&n.length>0){let t=new this.wallet.BN("0");n.forEach(({moniker:e,entries:r})=>{o.validators[e]=r.map(t=>new this.wallet.BN(t.balance.split(".")[0])).reduce((t,e)=>t.add(new this.wallet.BN(e)),new this.wallet.BN("0")),t=t.add(o.validators[e])}),o.total=this.wallet.toCurrencyUnit(t.toString().split(".")[0])}return{balance:a,balances:{available:this.wallet.toCurrencyUnit(a),staking:i,unbonding:o,rewards:this.wallet.toCurrencyUnit(c)},transactions:this.wallet.transactions}}}e.a=MintscanExplorer},1238:function(t,e,r){"use strict";var s=r(8),n=r(3),a=r(4);class CovalentHQExplorer extends s.a{constructor({wallet:t,config:e}){super({wallet:t,config:e})}getAllowedTickers(){return["MATIC"]}modifyTokenResponse(t){if(t.data&&!t.data.error)return t.data.items;throw new a.d({type:n.f,error:new Error(JSON.stringify(t)),instance:this})}async getUserTokenList(t){try{const e=await this.request(`${this.wallet.chainId}/address/${t}/balances_v2/`,"get",{key:"ckey_8287d484c9bd41658d9a8473398"});return this.modifyTokenResponse(e)}catch(t){return console.error(t),[]}}}e.a=CovalentHQExplorer},1239:function(t,e,r){"use strict";var s=r(619),n=r(8),a=r(4),i=r(3),o=r(29),c=r(87);const l={WebSocket:global.WebSocket,connectionTimeout:2e3,maxReconnectionDelay:2e4,minReconnectionDelay:1e4,maxRetries:10};class NanonodeExplorer extends n.a{getAllowedTickers(){return["NANO"]}getBaseUrl(){return""+this.config.baseUrl}getSendTransactionUrl(){return this.getBaseUrl()}getInfoUrl(t){return this.getBaseUrl()}getTransactionUrl(t){return this.requestedTxId=t,""}getActionMethod(){return"POST"}getTransactionsMethod(){return this.getActionMethod()}getInfoMethod(){return this.getActionMethod()}getTransactionMethod(){return this.getActionMethod()}getSendTransactionParams(t){return{action:"process",json_block:!0,...t}}workGenerateParams(t){return{action:"work_generate",hash:t}}pendingTransactionsParams(t){return{action:"pending",account:t,count:"100"}}blockInfoParams(t){return{action:"block_info",hash:t,json_block:!0,source:!0}}getInfoParams(t){return{action:"account_info",account:t,pending:!0,representative:!0}}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{action:"account_history",account:t,count:"100"}}modifySendTransactionResponse(t){if(void 0!==t.error)throw new a.d({type:i.s,error:new Error(t.error),instance:this});return this.eventEmmiter.emit("socket::newtx::outgoing",{id:this.wallet.id,ticker:this.wallet.ticker}),{txid:t.hash}}async workGenerate(t){return(await this.request(this.getBaseUrl(),this.getActionMethod(),this.workGenerateParams(t),"Work generate",this.getSendOptions())).work}async getPendingTransactions(t){return await this.request(this.getBaseUrl(),this.getActionMethod(),this.pendingTransactionsParams(t))}async getBlockInfo(t){const e=await this.request(this.getBaseUrl(),this.getActionMethod(),this.blockInfoParams(t),"Block info",this.getSendOptions());return e.requestedTxId=t,e}modifyInfoResponse(t){if(t.error)throw new Error(t.error);return t}modifyTransactionResponse(t,e){return t.hash=t.requestedTxId,super.modifyTransactionResponse(t,e)}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit,pending:s}){const n=await this.request(this.getBaseUrl(),this.getTransactionsMethod(),this.getTransactionsParams(t,e,r),i.i);if(n.error)throw new Error(n.error);return this.modifyTransactionsResponse(n.history,this.wallet.address,this.wallet.ticker,s)}modifyTransactionsResponse(t,e,r=this.wallet.ticker,s){return Array.isArray(t)?t.map(t=>new o.a({ticker:r,name:this.wallet.name,walletid:this.wallet.id,txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t,s),alias:this.wallet.alias})):[]}getTxHash(t){return t.hash}getTxDirection(t,e){return"receive"===e.type}getTxOtherSideAddress(t,e){return e.account}getTxValue(t,e){return Number(this.wallet.toCurrencyUnit(e.amount))}getTxDateTime(t){return new Date(Number(t.local_timestamp+"000"))}getTxConfirmations(t,e){return e&&e.includes(t.hash)?0:1}async getTransaction(t,e){const r=await this.getBlockInfo(e);return this.modifyTransactionResponse(r,t)}setSocketClient(t){this.socket[this.wallet.ticker]=new s.a(t,[],l)}async connectSocket(t){const{websocketUrl:e}=this.config,{ticker:r}=this.wallet;if(!e)throw new a.d({type:i.s,error:new Error(`[${r}] connectSocket error: no websocket url in coin config`),instance:this});this.setSocketClient(e);const s=this.socket[r];return s.addEventListener("message",async e=>{const r=JSON.parse(e.data).data;"send"===r.subtype&&this.processSendEvent(r,t),"receive"===r.subtype&&this.processReceiveEvent(r,t)}),new Promise((r,n)=>{s.addEventListener("open",()=>(s.removeEventListener("error"),r(s.send(JSON.stringify({event:"subscribe",data:[t]}))))),s.addEventListener("error",t=>(console.error("[NANO][socket] connection failed",e,t),n(t)))})}disconnectSocket(){this.socket[this.wallet.ticker].close()}async processSendEvent(t,e){if(t.confirmed)return;const r=t.account!==e;if(this.eventEmmiter.emit(`${this.wallet.parent}-${this.wallet.id}::mine-txs`),r)return;const s=new o.a({ticker:this.wallet.ticker,name:this.wallet.name,walletid:this.wallet.id,txid:r?"pending":t.hash,direction:r,otherSideAddress:r?t.account:t.block.link_as_account,amount:this.wallet.toCurrencyUnit(t.amount),datetime:new Date,alias:this.wallet.alias});await c.a.updatePendingOrInsert(s),this.eventEmmiter.emit(`${this.wallet.parent}-${this.wallet.id}::new-socket-tx`,{unconfirmedTx:s})}async processReceiveEvent(t){const e=await this.getBlockInfo(t.block.link),r=new o.a({ticker:this.wallet.ticker,name:this.wallet.name,txid:t.hash,walletid:this.wallet.id,direction:!0,otherSideAddress:e.block_account,amount:this.wallet.toCurrencyUnit(t.amount),datetime:new Date,alias:this.wallet.alias});await c.a.updatePendingOrInsert(r),this.eventEmmiter.emit(`${this.wallet.parent}-${this.wallet.id}::new-socket-tx`,{unconfirmedTx:r})}async getInfo(t){try{const e=await super.getInfo(t);return e.pending>0&&(e.pending=await this.getPendingTransactions(t)),e}catch(t){if("Account not found"===t.message)return{balance:0};throw t}}getTxFee(){return 0}}e.a=NanonodeExplorer},1272:function(t,e,r){"use strict";var s=r(8),n=r(4),a=r(3);class AeternityExplorer extends s.a{getAllowedTickers(){return["AE"]}getApiPrefix(){return"v2/"}getInfoUrl(t){return`${this.getApiPrefix()}accounts/${t}`}getInfoOptions(){return{transformResponse:[t=>JSON.parse(t.replace(/:(\d+)([,}])/g,':"$1"$2'))]}}modifyInfoResponse(t){return{balance:new this.wallet.BN(t.balance).toString(),nonce:t.nonce,transactions:[]}}getTransactionUrl(t){return`${this.getApiPrefix()}transactions/${t}`}getTransactionsUrl(t){return"middleware/transactions/account/"+t}getTransactionsOptions(){return this.getInfoOptions()}getLatestBlockUrl(){return this.getApiPrefix()+"status"}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){return this.latestBlock=await this.getLatestBlock(),super.getTransactions({address:t,offset:e,limit:r})}getTxHash(t){return t.hash}getTxDateTime(t){return new Date(Number(""+t.time))}getTxDirection(t,e){return t.toLowerCase()===e.tx.recipient_id.toLowerCase()}getTxOtherSideAddress(t,e){return t.toLowerCase()===e.tx.sender_id.toLowerCase()?e.tx.recipient_id:e.tx.sender_id}getTxValue(t,e){const r=e.tx.amount||0,s=e.tx.fee||0,n=new this.wallet.BN(String(r)),a=new this.wallet.BN(String(s));return Number(this.wallet.toCurrencyUnit(this.getTxDirection(t,e)?n:n.add(a)))}getTxConfirmations(t){return this.latestBlock?this.latestBlock.top_block_height-t.block_height:1}getSendTransactionUrl(){return this.getApiPrefix()+"transactions"}getSendTransactionParam(){return"tx"}modifySendTransactionResponse(t){if(void 0!==t.reason)throw new n.d({type:a.i,error:t.reason,instance:this});return{txid:t.tx_hash}}getTxFee(t){return this.wallet.toCurrencyUnit(t&&t.tx&&t.tx.fee||0)}}e.a=AeternityExplorer},1273:function(t,e,r){"use strict";var s=r(16),n=r.n(s),a=r(8),i=r(3);class AdaAtomicExplorer extends a.a{getAllowedTickers(){return["ADA"]}getApiPrefix(){return"/"}getLatestBlockUrl(){return this.getApiPrefix()+"lastblock"}getInfoUrl(t){return this.getApiPrefix()+"balance"}getInfoParams(t){return{address:t}}getAccountStateUrl(){return this.getApiPrefix()+"stakingAccount"}getTransactionUrl(){return this.getApiPrefix()+"tx"}getTransactionParams(t){return{txid:t}}getTransactionsUrl(){return this.getApiPrefix()+"txs"}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{address:t,limit:r}}getUnspentOutputsUrl(){return this.getApiPrefix()+"utxo"}getUnspentOutputsParams(t){return{address:t}}getSendTransactionUrl(){return this.getApiPrefix()+"submit"}getSendTransactionMethod(){return"POST"}getSendTransactionParams(t){return{tx:Buffer.from(t).toString("hex"),network:"mainnet"}}getTxHash(t){return t.hash}getTxDirection(t,e){return!e.inputs.find(({address:e})=>t===e)}getTxOtherSideAddress(t,e){if(!!this.getTxDirection(t,e)){return e.inputs.find(({address:e})=>e!==t).address}{const r=e.outputs.find(({address:e})=>e!==t);if(r)return r.address}return t}getTxValueSatoshis(t,e){const r=this.getTxDirection(t,e);if(e.inputs.concat(e.outputs).every(({address:e})=>e===t))return e.outputs.reduce((t,e)=>t.add(new n.a(e.value)),new n.a("0"));return e.outputs.reduce((e,s)=>r?s.address===t?e.add(new n.a(s.value)):e:s.address!==t?e.add(new n.a(s.value)):e,new n.a("0"))}getTxValue(t,e){return this.wallet.toCurrencyUnit(this.getTxValueSatoshis(t,e))}getTxDateTime(t){return new Date(t.block.time)}async getBalance(t){const e=await this.getInfo(t);return e&&e.balance}async getAccountState(t){return this.request(this.getAccountStateUrl(),"get",{address:t},this.getInfoOptions()).catch(t=>console.warn("Error",t))}modifyInfoResponse(t){let e=t.balance;return 0===Number(e)&&(e="0"),{balance:e}}modifyUnspentOutputsResponse(t,e){return e.map(({amount:t,hash:e,tx_index:r,receiver:s})=>({amount:t,tx_hash:e,tx_index:r,receiver:s}))}modifySendTransactionResponse(t,e){return console.warn("RESPONSE",t),{txid:e}}async sendTransaction({rawtx:t,txid:e}){const r=await this.request(this.getSendTransactionUrl(),this.getSendTransactionMethod(),this.getSendTransactionParams(t),i.s,this.getSendOptions());return this.modifySendTransactionResponse(r,e)}getTxFee(){return null}getTxConfirmations(){return 1}}e.a=AdaAtomicExplorer},1274:function(t,e,r){"use strict";var s=r(28),n=r.n(s),a=r(106),i=r.n(a),o=r(8);class BlockbookExplorer extends o.a{constructor({config:t}){super(...arguments),this.version=t.version}get args(){return{wallet:Object,baseUrl:String,webUrl:String,version:Number}}getWalletAddress(){return this.wallet.address}getAllowedTickers(){return["GRS"]}getApiPrefix(){return`api/v${this.version}/`}getAddressUrl(t){return`${this.getApiPrefix()}address/${t}`}getInfoUrl(t){return`${this.getApiPrefix()}address/${t}`}modifyInfoResponse(t){return{balance:t.balanceSat,transactions:[]}}getTransactionUrl(t){return`${this.getApiPrefix()}tx/${t}`}getTransactionsUrl(t){return`${this.getApiPrefix()}address/${t}?details=txs&filter=All`}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.txs,e)}getUnspentOutputsUrl(t){return`${this.getApiPrefix()}addrs/${t}/utxo`}modifyUnspentOutputsResponse(t){return t.map(({address:t,txid:e,vout:r,scriptPubKey:s,satoshis:n})=>({txid:e,txId:e,vout:r,script:s,value:n,address:this.modifyUnspentAddress(t),outputIndex:r,satoshis:Number(n)}))}modifyUnspentAddress(t){return["BCH","BSV"].includes(this.wallet.ticker)?i.a.isCashAddress(t)?t:i.a.toCashAddress(t):t}getTransactionsParams(t,e,r){return{}}getSendTransactionUrl(){return this.getApiPrefix()+"tx/send"}getSendTransactionParam(){return"rawtx"}async sendTransaction(t){const e=await n.a.post(`${this.config.baseUrl}${this.getSendTransactionUrl()}`,{[this.getSendTransactionParam()]:t});return this.modifyGeneralResponse(this.modifySendTransactionResponse(e))}getTxDateTime(t){return t.time?new Date(Number(t.time+"000")):new Date}getTxValue(t,e){let r=new this.wallet.BN(0),s=new this.wallet.BN(0);if(!e.vin||!e.vout)return 0;e.vin.forEach(e=>{e.addresses.includes(t)&&(r=r.add(new this.wallet.BN(this.wallet.toMinimalUnit(e.value))))}),e.vout.forEach(e=>{e.scriptPubKey&&e.scriptPubKey.addresses&&e.scriptPubKey.addresses.length>0&&e.scriptPubKey.addresses[0]===t&&(s=s.add(new this.wallet.BN(this.wallet.toMinimalUnit(e.value))))});const n=r.sub(s),a=n.lt(new this.wallet.BN(0)),i=n.abs();return Number(this.wallet.toCurrencyUnit(a?i:i.sub(new this.wallet.BN(this.wallet.toMinimalUnit(e.fees)))))}getTxDirection(t,e){return e.vin&&!e.vin.find(({addresses:e})=>e.includes(t))}getTxOtherSideAddress(t,e){if(!e.vin)return"...";if(this.getTxDirection(t,e))return e.vin[0].addresses[0];let r=new this.wallet.BN(0),s="...";return e.vout.forEach(e=>{e.scriptPubKey&&e.scriptPubKey.addresses&&e.scriptPubKey.addresses.length>0&&e.scriptPubKey.addresses[0]!==t&&r.lt(new this.wallet.BN(this.wallet.toMinimalUnit(e.value)))&&(r=new this.wallet.BN(this.wallet.toMinimalUnit(e.value)),s=e.scriptPubKey.addresses[0])}),s}calculateBalance(t=[]){return t.reduce((t,{value:e})=>new this.wallet.BN(e).add(t),new this.wallet.BN("0"))}}e.a=BlockbookExplorer},1275:function(t,e,r){"use strict";var s=r(8),n=r(4),a=r(3);class DogeChainExplorer extends s.a{getAllowedTickers(){return["DOGE"]}getApiPrefix(){return"api/v1/"}getInfoUrl(t){return`${this.getApiPrefix()}address/balance/${t}`}modifyInfoResponse(t){if(1===t.success)return{balance:this.wallet.toMinimalUnit(t.balance),transactions:[]};throw new n.d({type:a.f,error:new Error(t.error),instance:this})}getSendTransactionUrl(){return this.getApiPrefix()+"pushtx"}getSendTransactionParam(){return"tx"}modifySendTransactionResponse(t){if(void 0===t.tx_hash||0===t.success)throw new n.d({type:a.s,error:new Error(t.error),instance:this});return{txid:t.tx_hash}}async getBalance(){const t=await this.getInfo();return this.wallet.toCurrencyUnit(t.balance)}getUnspentOutputsUrl(t){return`${this.getApiPrefix()}unspent/${t}`}modifyUnspentOutputsResponse(t){return t.unspent_outputs.map(({address:t,tx_hash:e,tx_output_n:r,script:s,value:n})=>({txid:e,vout:r,script:s,value:n,address:t}))}calculateBalance(t=[]){return t.reduce((t,{value:e})=>new this.wallet.BN(e).add(t),new this.wallet.BN("0"))}}e.a=DogeChainExplorer},1276:function(t,e,r){"use strict";var s=r(8),n=r(3),a=r(4);const{ETHERSCAN_API_KEY:i}=process.env;class EtherscanExplorer extends s.a{getAllowedTickers(){return["ETH"]}modifyGeneralResponse(t){if(t.data&&"1"===t.data.status)return t.data;throw new a.d({type:n.f,error:new Error(JSON.stringify(t)),instance:this})}getTransactionsUrl(t){return""}getTransactionsParams(t){return{module:"account",action:"txlist",address:t,startblock:0,endblock:99999999,sort:"desc",apikey:i}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.result.filter(({value:t})=>t>0),e)}async sendTransaction(t){const e=await this.request("submit",null,{tx_blob:t});if("tesSUCCESS"===!e.engine_result)throw new a.d({type:n.s,error:new Error(e.engine_result),instance:this});return{txid:e.tx_json.hash}}getTxHash(t){return t.hash}getTxDateTime(t){return new Date(Number(t.timeStamp+"000"))}getTxConfirmations(t){return Number(t.confirmations)}getTxDirection(t,e){return t.toLowerCase()!==e.from.toLowerCase()}getTxOtherSideAddress(t,e){return t.toLowerCase()===e.from.toLowerCase()?e.to:e.from}getTxValue(t,e){return this.wallet.toCurrencyUnit(e.value)}}e.a=EtherscanExplorer},1277:function(t,e,r){"use strict";var s=r(903),n=r.n(s),a=r(3),i=r(4),o=r(39),c=r(8),l=r(167);const d=[{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],u=[{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];class ETHNftExplorer extends c.a{constructor({wallet:t,config:e}){super({wallet:t,config:e}),this.baseUrl=Object(o.b)(e.baseUrl,"/"),this.web3=new n.a(e.baseUrl),this.ticker=t.ticker}getAllowedTickers(){return["ETH","BSC"]}makeNftInfoUrl(t,e){return`${this.baseUrl}${t}?a=${e}`}async getGasPrice(){return this.web3.eth.getGasPrice()}async estimateGas(t,e,r,s){return this.web3.eth.estimateGas({from:t,to:e,nonce:r+1,data:s})}sendTransaction(t){return new Promise((e,r)=>{this.wallet.coreLibrary.eth.sendSignedTransaction(t).on("transactionHash",t=>{e({tx:t})}).catch(t=>r(t))})}async getNftContractData(t,e,r,s,n){if(![l.b,l.a].includes(n))throw new i.g({type:a.l,error:"Unrecognized nft token standard",instance:this});const{address:o}=t;return{[l.a]:(t,e,r,s)=>new this.web3.eth.Contract(d,r).methods.safeTransferFrom(t,e,s,1,"0x0").encodeABI(),[l.b]:(t,e,r,s)=>new this.web3.eth.Contract(u,r).methods.safeTransferFrom(t,e,s).encodeABI()}[n](o,e,r,s)}async sendNft(t,e,r,s,n,o){try{const a=await this.getNftContractData(t,e,r,s,n),i=await t.createNftTransaction({toAddress:e,contractAddress:r,data:a,userOptions:o});return await this.sendTransaction(i)}catch(t){throw console.warn(t),new i.e({type:a.e,error:t,instance:this})}}}e.a=ETHNftExplorer},1324:function(t,e,r){"use strict";var s=r(28),n=r.n(s),a=r(4),i=r(3),o=r(8),c=r(1723),l=r(265),d=r(167);const u=[[d.f,d.b],[d.e,d.a]];class ETHNftMoralisExplorer extends o.a{constructor({wallet:t,config:e}){super({wallet:t,config:e}),this.chain=e.chain||"eth",this.baseUrl=e.baseUrl}getAllowedTickers(){return["ETH","BSC"]}async getInfo(t){try{const e=await this.request(this.getInfoUrl(t),this.getInfoMethod(),this.getInfoParams(t,this.chain));return this.modifyInfoResponse(e)}catch(t){throw new a.e({type:i.e,error:t,instance:this})}}getInfoUrl(t){return`/${t}/nft`}getInitParams(){return{...super.getInitParams(),baseUrl:this.baseUrl,headers:{"X-API-Key":"sA9pBlEiuyZFgcTuS0HqhMvR7r37Fsvkb7xAgJLXNz6KpDEE5yDCd9vEfZp3VPwb",accept:"application/json"}}}getInfoParams(t,e){return{chain:e,format:"decimal"}}async modifyInfoResponse(t){const{result:e}=t,r=[],s=e.map((t,e)=>{const{token_address:s,token_id:o,token_uri:l,contract_type:d,metadata:u}=t;if(!u){const t=Object(c.a)({tokenId:o,tokenUri:l});return r.push(Promise.all([e,n.a.get(t).catch(t=>{throw new Error(JSON.stringify({index:e,error:t}))})])),{contractAddress:s,tokenId:o,tokenStandard:d}}try{const{name:t,description:e,image:r}=JSON.parse(u);return{contractAddress:s,tokenId:o,tokenStandard:d,name:t,description:e,imageUrl:r}}catch(t){throw console.warn(t),new a.g({type:i.l,error:t,instance:this})}});try{(await Promise.allSettled(r)).forEach(t=>{if("fulfilled"===t.status){const{value:[e,{data:r}]}=t,{name:n,description:a,image:i}=r;s[e]={...s[e],name:n,description:a,imageUrl:i}}else{const{reason:{message:e}}=t;try{const{index:t,message:r}=JSON.parse(e);console.warn("Failed to get NFT metadata for tokenUri="+s[t],r)}catch(t){console.warn(t)}}})}catch(t){throw console.warn(t),new a.e({type:i.e,error:t,instance:this})}return s}fixTokenStandard(t){for(const[e,r]of u)if(e.test(t))return r;return d.c}async fetchNftList(t){const{address:e}=t;return(await this.getInfo(e)).map(({contractAddress:e,tokenId:r,tokenStandard:s,name:n,description:a,imageUrl:i})=>new l.a(e,r,t.ticker,this.fixTokenStandard(s),n,a,i))}}e.a=ETHNftMoralisExplorer},1325:function(t,e,r){"use strict";var s=r(31),n=r(8),a=r(29),i=r(3),o=r(22),c=r(602);const{ETHPLORER_API_KEY:l}=process.env;class EthplorerExplorer extends n.a{getAllowedTickers(){return["ETH"]}async getBalance(){let t;try{t=await this.getInfo()}catch(t){throw t}return String(this.wallet.toCurrencyUnit(t.balance))}async getInfo(t){try{const e=await this.request(this.getInfoUrl(t),this.getInfoMethod(),this.getInfoParams(t),i.f);return this.modifyInfoResponse(e,t)}catch(e){return{balance:t?await this.wallet.coreLibrary.eth.getBalance(t):0}}}getInfoUrl(t){return"service/service.php"}getInfoParams(t){return{data:t,apiKey:l,page:"pageSize=1000"}}modifyInfoResponse(t){if(Array.isArray(t.transfers)){const e=[],r={};t.transfers.forEach(t=>{t.contract=t.contract.toLowerCase();const s=t.isEth?this.modifyTransactionResponse(t):this.modifyTokenTransactionResponse(t,this.wallet.tokens[t.contract]);t.isEth?e.push(s):this.wallet.tokens[t.contract]&&(r[t.contract]=r[t.contract]||[],r[t.contract].push(s))}),this.wallet.transactions=e;for(const t in r)this.wallet.tokens[t].transactions=r[t]}return{balance:this.wallet.toMinimalUnit(t.balance),transactions:[]}}getTransactionsUrl(t){return"service/service.php"}getTransactionsParams(t,e,r){return{data:t,apiKey:l,page:"pageSize=1000"}}modifyTransactionsResponse(t){return t.transfers.map(t=>{if(t.isEth)return this.modifyTransactionResponse(t);const e=this.wallet.tokens[t.contract.toLowerCase()];return this.modifyTokenTransactionResponse(t,e),!1}).filter(Boolean)}modifyTokenTransactionResponse(t,e,r){return new a.a({ticker:e.ticker,name:e.name,walletid:this.wallet.id,txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(r,t),otherSideAddress:this.getTxOtherSideAddress(r,t),amount:this.getTxValue(r,t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t),alias:this.wallet.alias})}getTxHash(t){return t.transactionHash}getTxDateTime(t){return new Date(Number(t.timestamp+"000"))}getTxConfirmations(t){return Number(t.blockNumber>0?10:0)}getTxDirection(t,e){return t.toLowerCase()!==e.from.toLowerCase()}getTxOtherSideAddress(t,e){return t.toLowerCase()===e.from.toLowerCase()?e.to:e.from}getTxValue(t,e){if(e.isEth)return e.value;const r=this.wallet.tokens[e.contract.toLowerCase()];return r?r.toCurrencyUnit(e.value):this.wallet.toCurrencyUnit(e.value)}getUserTokenListUrl(t){return"https://api.ethplorer.io/getAddressInfo/{address}?apiKey=jgsh10179vezF82".replace("{address}",t)}modifyTokenListResponse(t){return t.data}async getTokenList(){let t=c;try{t=await s.a.get("ethereum-tokens")}catch(t){o.a.error({instance:this,error:t})}return t}async getUserTokenList(t){if(!t)return[];return await this.request(this.getUserTokenListUrl(t)).then(t=>t.tokens).catch(()=>[])}}e.a=EthplorerExplorer},1326:function(t,e,r){"use strict";var s=r(16),n=r.n(s),a=r(8),i=r(29);class GuardaMoneroProxy extends a.a{getAllowedTickers(){return["XMR"]}async getAccount(t){return this.request("account/"+t,"GET",void 0,void 0,{headers:{"api-key":this.config.apiKey}})}async postAccount(t){return this.request("account","POST",{address:t,API_key:this.config.apiKey})}async balance(t,e){if(!t)throw new Error("XMR: GuardaMoneroProxy: no address");if(!e)throw new Error("XMR: GuardaMoneroProxy: no viewKey");return this.request("balance","POST",{address:t,viewKey:e,API_key:this.config.apiKey})}async random(t){return this.request("random","POST",{...t,API_key:this.config.apiKey})}async resync(t,e){return this.request("resync","POST",{address:t,viewKey:e,API_key:this.config.apiKey})}async submit({tx:t,address:e,viewKey:r}){return this.request("submit","POST",{tx:t,address:e,viewKey:r,API_key:this.config.apiKey})}async txData(t){return this.request("tx/data/"+t,"GET",void 0,void 0,{headers:{API_key:this.config.apiKey}})}async unspent({address:t,secViewKey:e,mixin:r,dustThreshold:s,useDust:n=!1,amount:a="0"}){return this.request("unspend","POST",{address:t,viewKey:e,amount:a,useDust:n,mixin:r,dustThreshold:String(s),API_key:this.config.apiKey})}async txs(t,e){if(!t)throw new Error("XMR: GuardaMoneroProxy: no address");if(!e)throw new Error("XMR: GuardaMoneroProxy: no viewKey");return this.request("txs","POST",{address:t,viewKey:e,API_key:this.config.apiKey})}getTxHash(t){return t.hash}getTxDirection(t){return void 0===t.spent_outputs}getTxOtherSideAddress(t){return t.tx_pub_key}getTxValue(t){return Number(this.wallet.toCurrencyUnit(this.getTxDirection(t)?t.total_received:new n.a(t.total_sent).sub(new n.a(t.total_received))))}getTxDateTime(t){return new Date(Number(""+t.timestamp))}getTxConfirmations(t,e){return e-t.height}async getTransactions({address:t,viewKey:e,lastHeight:r}){const s=await this.txs(t,e);return this.modifyTransactionsResponse(t,s,r)}modifyTransactionsResponse(t,e,r){if(!e||!Array.isArray(e.transactions))throw new Error("Wrong response");return e.transactions.filter(this.wallet.filterTransactions).map(t=>new i.a({walletid:this.wallet.id,ticker:this.wallet.ticker,name:this.wallet.name,alias:this.wallet.alias,explorer:this.constructor.name,txid:this.getTxHash(t),direction:this.getTxDirection(t),otherSideAddress:this.getTxOtherSideAddress(t),amount:this.getTxValue(t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t,r)}))}async getInfo({address:t,viewKey:e}){return this.balance(t,e)}async request(...t){const e="XMR:GuardaMoneroProxy:"+t[0];return new Promise((r,s)=>{const n=this.eventEmmiter._events[e];this.eventEmmiter.once(e,t=>{t instanceof Error?s(t):r(t)}),n||super.request(...t).then(t=>{this.eventEmmiter.emit(e,t)}).catch(t=>{this.eventEmmiter.emit(e,t)})})}}e.a=GuardaMoneroProxy},1327:function(t,e,r){"use strict";var s=r(8),n=r(4),a=r(3);class BinanceBCExplorer extends s.a{getAllowedTickers(){return["BNB","BSC"]}getStakingInfoMethod(){return"get"}getStakingInfoBaseUrl(t){return`${this.config.baseUrl}v1/staking/chains/bsc/delegators/${t}`}getDelegationsUrl(t){return this.getStakingInfoBaseUrl(t)+"/delegations"}getUnDelegationsUrl(t){return this.getStakingInfoBaseUrl(t)+"/ubds"}getReDelegationsUrl(t){return this.getStakingInfoBaseUrl(t)+"/reds"}getRewardsUrl(t){return this.getStakingInfoBaseUrl(t)+"/rewards"}async getDelegations({address:t=this.wallet.address,offset:e=0,limit:r=100}={}){const s=await this.request(this.getDelegationsUrl(t),this.getStakingInfoMethod(),{offset:e,limit:r}).catch(t=>{throw new n.d({type:a.i,error:t,instance:this})});return null==s?void 0:s.delegations}async getUnDelegations({address:t=this.wallet.address,offset:e=0,limit:r=100}={}){const s=await this.request(this.getUnDelegationsUrl(t),this.getStakingInfoMethod(),{offset:e,limit:r}).catch(t=>{throw new n.d({type:a.i,error:t,instance:this})});return null==s?void 0:s.unbondingDelegations.filter(({completeHeight:t})=>!t)}async getReDelegations({address:t=this.wallet.address,offset:e=0,limit:r=100}={}){const s=await this.request(this.getReDelegationsUrl(t),this.getStakingInfoMethod(),{offset:e,limit:r}).catch(t=>{throw new n.d({type:a.i,error:t,instance:this})});return null==s?void 0:s.redelegations}async getRewards({address:t=this.wallet.address,offset:e=0,limit:r=100}={}){const s=await this.request(this.getRewardsUrl(t),this.getStakingInfoMethod(),{offset:e,limit:r}).catch(t=>{throw new n.d({type:a.i,error:t,instance:this})});return null==s?void 0:s.rewardDetails}async getUserValidators(t=this.wallet.address,e){try{e||(e=await Promise.all([this.getDelegations({address:t}),this.getUnDelegations({address:t})]));const r=new Map;return e.flatMap(t=>t).forEach(t=>{Object.keys(t).forEach(e=>{r.set(t.validator,{...r.get(t.validator),[e]:t[e]})})}),Array.from(r.values())}catch(t){throw new n.d({type:a.e,error:t,instance:this})}}async getStakingBalances(t){const[e,r,s]=await Promise.all([this.getDelegations({address:t}),this.getUnDelegations({address:t}),this.getRewards({address:t})]),n=e.reduce((t,e)=>t.set(e.validator,e),new Map),a=r.reduce((t,e)=>t.set(e.validator,e),new Map),i=s.reduce((t,e)=>{const r=t.get(e.validator);return r&&(e.reward+=r.reward),t.set(e.validator,e)},new Map),o=(await this.getUserValidators(t,[e,r])).reduce((t,{validatorName:e,validator:r,valName:s})=>{var o,c,l;return t[r]={staked:this.toBNMinimalUnit(null===(o=n.get(r))||void 0===o?void 0:o.amount).toString(),unstaked:this.toBNMinimalUnit(null===(c=a.get(r))||void 0===c?void 0:c.balance).toString(),rewards:this.toBNMinimalUnit(null===(l=i.get(r))||void 0===l?void 0:l.reward).toString(),name:e||s},t},{}),[c,l,d]=["unstaked","staked","rewards"].map(t=>Object.values(o).reduce((e,r)=>e.add(new this.wallet.BN(r[t])),new this.wallet.BN("0")));return{total:l.add(c),staking:{total:l.toString(),unstake:c.toString(),rewards:d.toString(),validators:o}}}}e.a=BinanceBCExplorer},1328:function(t,e,r){"use strict";var s=r(31),n=r(8),a=r(3),i=r(4),o=r(29),c=r(602),l=r(22);class BlockscoutExplorer extends n.a{getAllowedTickers(){return["ETH","ETC"]}async request(t,e="get",r={},s=a.w){const n=await super.request(t,e,r,s);if("0"===n.status)throw new i.d({type:s,error:n.message,url:`${this.config.baseUrl}${t}`,instance:this});return n.result?n.result:n}getInfoUrl(t){return this.getApiPrefix()}getTokenInfoParams(t){return{module:"account",action:"tokenlist",address:t}}getInfoParams(t){return{module:"account",action:"balance",address:t}}async getInfo(t){const e=await this.request(this.getInfoUrl(t),this.getInfoMethod(),this.getInfoParams(t),a.f),r=await this.request(this.getInfoUrl(t),this.getInfoMethod(),this.getTokenInfoParams(t),a.f);return this.modifyInfoResponse({balance:e,tokens:r})}modifyInfoResponse(t){return{balance:t.balance,tokensBalances:t.tokens||[],transactions:[]}}getTransactionsUrl(t){return this.getApiPrefix()}getTransactionsParams(t,e,r){return{module:"account",action:"txlist",address:t}}getTransferParams(t,e,r){return{module:"account",action:"tokentx",address:t}}async getTransactions({address:t,offset:e=0,limit:r=this.defaultTxLimit}){try{const s=await this.request(this.getTransactionsUrl(t),this.getTransactionsMethod(),this.getTransactionsParams(t,e,r),a.i);let n=[];return["ETH"].includes(this.wallet.ticker)&&(n=await this.request(this.getTransactionsUrl(t),this.getTransactionsMethod(),this.getTransferParams(t,e,r),a.i)),this.modifyTokenTransactionsResponse(n.reverse()),this.modifyTransactionsResponse(s.filter(({input:t})=>"0x"===t).reverse(),t)}catch(t){return console.error(t),[]}}modifyTokenTransactionsResponse(t){const e={};t.forEach(t=>{const r=t.contractAddress.toLowerCase();if(this.wallet.tokens&&this.wallet.tokens[r]){const s=this.wallet.tokens[r],n=new o.a({ticker:s.ticker,name:s.name,txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(t),otherSideAddress:this.getTxOtherSideAddress(t),amount:this.getTxValue(t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t),alias:this.wallet.alias});e[r]=e[r]||[],e[r].push(n)}});for(const t in e)this.wallet.tokens[t].transactions=e[t]}getTxHash(t){return t.hash}getTxDateTime(t){return new Date(Number(t.timeStamp+"000"))}getTxDirection(t,e){return t.toLowerCase()!==e.from.toLowerCase()}getTxOtherSideAddress(t,e){return t.toLowerCase()===e.from.toLowerCase()?e.to:e.from}getTxValue(t,e){return e.contractAddress,this.wallet.toCurrencyUnit(e.value)}getTxConfirmations(t){return Number(t.confirmations)}getUserTokenListUrl(t){return"https://blockscout.com/eth/mainnet/api/?action=tokenlist&module=account&address={address}".replace("{address}",t)}modifyTokenListResponse(t){return t.data}async getTokenList(){let t;try{t=await s.a.get("ethereum-tokens")}catch(t){l.a.error({instance:this,error:t})}return t||c}async getBannedTokensList(){let t;try{t=await s.a.get("ethereum-tokens-banned")}catch(t){l.a.error({instance:this,error:t})}return JSON.stringify(t)||[]}async getUserTokenList(t){if(!t)return[];return await this.request(this.getUserTokenListUrl(t)).then(t=>t).catch(()=>[])||[]}getTxFee(t){const e=new this.wallet.BN(t.gasUsed),r=new this.wallet.BN(t.gasPrice),s=new this.wallet.BN(this.wallet.feeCoefficient||1).mul(e.mul(r)).toString();return this.wallet.toCurrencyUnit(s)}}e.a=BlockscoutExplorer},1329:function(t,e,r){"use strict";var s=r(28),n=r.n(s),a=r(603);class BtgInsightExplorer extends a.a{getAllowedTickers(){return["BTG"]}getInfoUrl(t){return"insight-api/addr/"+t}getTransactionUrl(t){return"insight-api/tx/"+t}getTransactionsUrl(t){return`insight-api/addrs/${t}/txs`}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.items,e)}getUnspentOutputsUrl(t){return`insight-api/addr/${t}/utxo`}getSendTransactionUrl(){return"insight-api/tx/send"}getSendTransactionParam(){return"rawtx"}async sendTransaction(t){const e=await n.a.post(`${this.config.baseUrl}${this.getSendTransactionUrl()}`,`${this.getSendTransactionParam()}=${t}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return this.modifyGeneralResponse(this.modifySendTransactionResponse(e))}}e.a=BtgInsightExplorer},1330:function(t,e,r){"use strict";var s=r(35),n=r(8),a=r(4),i=r(3),o=r(217),c=r(130);class CosmosNodeExplorerV2 extends(Object(c.b)(n.a)){constructor(){super(...arguments),this.defaultTxLimit=50,this.canPaginate=!1,this.lastKnownHeight=0;const t=o.find(t=>t.currency===this.wallet.ticker);this.validatorMoniker={},t.validators.forEach(t=>{this.validatorMoniker[t.address]=t.name})}getAllowedTickers(){return["ATOM","BAND"]}async request(){const t=await super.request(...arguments);return t&&t.height&&this.lastKnownHeight<Number(t.height)&&(this.lastKnownHeight=t.height),t&&t.result?t.result:t}async getAuth(t){return(await this.request("cosmos/auth/v1beta1/accounts/"+t)).account}getLatestBlockUrl(){return"cosmos/base/tendermint/v1beta1/blocks/latest"}getSendTransactionUrl(){return"cosmos/tx/v1beta1/txs"}getSendTransactionParams(t){return{tx_bytes:Buffer.from(t).toString("base64"),mode:"BROADCAST_MODE_SYNC"}}modifySendTransactionResponse(t){var e;if(t.tx_response.code)throw new a.d({type:i.s,error:new Error(JSON.stringify(t)),instance:this});return{txid:null===(e=t.tx_response)||void 0===e?void 0:e.txhash}}async sendDelegationTransaction(t,e){const r=await this.request(`staking/delegators/${t}/delegations`,"post",e);if(r.value&&"0"===r.value.account_number)throw new a.d({type:i.s,error:new Error(r),instance:this});return r.value}async getTransaction(t,e){const r=await this.request("txs/"+e);return this.modifyTransactionResponse(r,t)}async getTransactions({address:t,limit:e,denom:r}){const n=await this.request(`/cosmos/tx/v1beta1/txs?events=message.sender=%27${t}%27`),a=await this.request(`/cosmos/tx/v1beta1/txs?events=transfer.recipient=%27${t}%27`),i=new Map;n.tx_responses.forEach(t=>{i.set(t.txhash,{...t,direction:!1})}),a.tx_responses.forEach(t=>{i.set(t.txhash,{...t,direction:!0})});const o=[];for(const[,t]of i.entries())o.push(t);o.sort((t,e)=>Number(t.height)<Number(e.height));const c=o.flatMap(t=>[...t.tx.body.messages.map(e=>({...e,...Object(s.pick)(t,"from_address","to_address","amount","txhash","height","gas_used","gas_wanted","direction","logs","timestamp"),memo:t.tx.body.memo,messages:t.tx.body.messages}))]).filter(t=>"MsgBeginRedelegate"!==this.getTransactionNativeType(t));return this.modifyTransactionsResponse(Object(s.uniqBy)(c,({"@type":t,txhash:e})=>`${e}/${t}`),t)}getTxValue(t,e){var r;const s=Array.isArray(e.amount)?e.amount[0].amount:(null===(r=e.amount)||void 0===r?void 0:r.amount)||e.withdraw_amount||this.getAmountFromLogs(e);return this.wallet.toCurrencyUnit(s)}getAmountFromLogs(t){return(t.logs||[]).reduce((t,{events:e})=>t.concat(e||[]),[]).filter(({type:t})=>"transfer"===t).reduce((t,{attributes:e})=>t.concat(e),[]).filter(({key:t})=>"amount"===t).reduce((t,{value:e})=>t+parseInt((e||"0").replace(/\D/gi,""),10),0)}getTxDirection(t,e){return e.direction}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.from_address||e.validator_address:e.to_address}getTxDateTime(t){return new Date(t.timestamp)}getTxConfirmations(t){return this.lastKnownHeight-Number(t.height)}getTxHash(t){return t.txhash}getTxMemo(t){return t.memo}getTotalDelegations(t,e){let r=new this.wallet.BN("0");return t.forEach(({delegation:t,balance:s})=>{const n=this.validatorMoniker[t.validator_address]||t.validator_address;e.validators[n]={shares:this.wallet.toCurrencyUnit(s.amount),address:t.validator_address},r=r.add(new this.wallet.BN(s.amount))}),r}async getInfo(t,e){var r;await this.getLatestBlock();const s=null===(r=(await this.request("cosmos/bank/v1beta1/balances/"+t)).balances.find(t=>t.denom===e))||void 0===r?void 0:r.amount,n=await this.request(`cosmos/distribution/v1beta1/delegators/${t}/rewards`).catch(t=>console.warn(t)),a=n.total&&n.total.length>0?this.wallet.toCurrencyUnit(n.total[0].amount.split(".")[0]):"0",i={validators:{},total:new this.wallet.BN("0")},o=await this.request("cosmos/staking/v1beta1/delegations/"+t).catch(t=>console.warn(t));let c;if(o&&o.delegation_responses&&(c=o.delegation_responses),c&&c.length>0){const t=this.getTotalDelegations(c,i);i.total=this.wallet.toCurrencyUnit(t.toString())}else i.total=i.total.toString();const l=await this.request(`cosmos/staking/v1beta1/delegators/${t}/unbonding_delegations`).catch(t=>console.warn(t)),d={validators:{},total:new this.wallet.BN("0")};let u;if(l&&l.unbonding_responses&&(u=l.unbonding_responses),u&&u.length>0){let t=new this.wallet.BN("0");u.forEach(({entries:e,validator_address:r})=>{const s=r;d.validators[s]=e.map(t=>new this.wallet.BN(t.balance.split(".")[0])).reduce((t,e)=>t.add(new this.wallet.BN(e)),new this.wallet.BN("0")),t=t.add(d.validators[s])}),d.total=this.wallet.toCurrencyUnit(t.toString().split(".")[0])}else d.total=d.total.toString();const h=new this.wallet.BN(this.wallet.toMinimalUnit(i.total)),g=new this.wallet.BN(this.wallet.toMinimalUnit(d.total)),w=new this.wallet.BN(this.wallet.toMinimalUnit(a)),f=new this.wallet.BN(s).add(h).add(g).add(w).toString(),m=new this.wallet.BN(s).sub(new this.wallet.BN(this.wallet.feeDefault||0)).sub(new this.wallet.BN(this.wallet.reserveForStake||0)),p=Number(m)>0?this.wallet.toCurrencyUnit(m):0;return{balance:f,balances:{available:this.wallet.toCurrencyUnit(s),staking:i,rewards:a,unbonding:d,availableForStake:p}}}modifyLatestBlockResponse(t){if(!t)throw new Error("[CosmosNodeExplorer] wrong latest block response");const e=Object.hasOwnProperty.call(t,"block")?"block":"block_meta";return this.chainId=t[e].header.chain_id,this.lastKnownHeight=Number(t[e].header.height)||0,t}async getChainId(){return await this.getLatestBlock(),this.chainId}async getSignerData(t){const{sequence:e="0",account_number:r}=await this.getAuth(t);return{sequence:e,accountNumber:r,chainId:this.chainId||await this.getChainId()}}async getValidators(t){const{validators:e}=await this.request(`cosmos/distribution/v1beta1/delegators/${t}/validators`);return e}getTxFee(){return this.wallet.toCurrencyUnit(this.wallet.feeDefault)}}e.a=CosmosNodeExplorerV2},1331:function(t,e,r){"use strict";var s=r(8);class GastrackerExplorer extends s.a{getAllowedTickers(){return["ETC"]}async getTransactions(t){const e=`${this.config.baseUrl}${"v1/addr/{address}/transactions".replace("{address}",t)}`,{items:r}=await this.request(e).catch(t=>{throw t});return this.modifyTransactionsResponse(r,t)}async getInfo(t){return{balance:await this.wallet.coreLibrary.eth.getBalance(t),transactions:[]}}getTxHash(t){return t.hash}getTxDirection(t,e){return e.to===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.from:e.to}getTxValue(t,e){return e.value.ether}getTxDateTime(t){return new Date(t.timestamp)}getTxConfirmations(t){return t.confirmations}}e.a=GastrackerExplorer},1338:function(t,e,r){"use strict";var s=r(8);class BlockcypherExplorer extends s.a{getAllowedTickers(){return["BTC","LTC","DOGE"]}getApiPrefix(){return`v1/${this.wallet.ticker.toLowerCase()}/`}getInfoUrl(t){return`${this.getApiPrefix()}addrs/${t}`}getUnspentOutputsUrl(t){return`${this.getApiPrefix()}addrs/${t}?unspentOnly=true`}getSendTransactionUrl(){return"txs/push"}getSendTransactionParam(){return"tx"}getTransactionUrl(t){return`${this.getApiPrefix()}main/txs/${t}?limit=9999`}getTransactionsUrl(t){return`${this.getApiPrefix()}main/addrs/${t}/full`}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.txs,e)}getTxHash(t){return t.hash}getTxDirection(t,e){return e.inputs&&!e.inputs.find(({addresses:e})=>e[0]===t)&&!0}getTxOtherSideAddress(t,e){if(!e.inputs)return"...";if(this.getTxDirection(t,e))return e.inputs[0].addresses[0];let r=new this.wallet.BN(0),s="...";return e.outputs.forEach(e=>{e.addresses.length>0&&e.addresses[0]!==t&&r.lt(new this.wallet.BN(e.value))&&(r=new this.wallet.BN(e.value),s=e.addresses[0])}),s}getTxValue(t,e){let r=new this.wallet.BN(0),s=new this.wallet.BN(0);e.inputs.forEach(e=>{e.addresses[0]===t&&(r=r.add(new this.wallet.BN(e.output_value)))}),e.outputs.forEach(e=>{e.addresses&&e.addresses[0]===t&&(s=s.add(new this.wallet.BN(e.value)))});const n=r.sub(s),a=n.lt(new this.wallet.BN(0)),i=n.abs();return Number(this.wallet.toCurrencyUnit(a?i:i.sub(new this.wallet.BN(e.fees))))}getTxDateTime(t){return new Date(t.confirmed)}getTxConfirmations(t){return t.confirmations}}e.a=BlockcypherExplorer},1339:function(t,e,r){"use strict";var s=r(8),n=r(3),a=r(4);class CardanoliteExplorer extends s.a{constructor(t,e,r,s){super(...arguments),this.submitUrl=s}getAllowedTickers(){return["ADA"]}getInfoUrl(t){return"/addresses/summary/"+t}modifyInfoResponse(t){return{balance:t.Right.caBalance.getCoin,transactions:[]}}getUTXOUrl(){return"/v2/txs/utxoForAddresses"}getTransactionsUrl(t){return"/v2/txs/history"}getTransactionsMethod(){return"post"}getTransactionsParams(t,e,r){return{addresses:[t],dateFrom:14832288e5,txLimit:r||this.defaultTxLimit}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t,e)}getSendTransactionUrl(){return"/v2/txs/signed"}getSendTransactionMethod(){return"post"}getSendTransactionParams(t){return{signedTx:Buffer.from(t.txBody,"hex").toString("base64"),txHash:t.txHash}}modifySendTransactionResponse(t,e){let r;if("Transaction sent successfully!"!==t)throw new a.i({type:n.s,error:new Error("[ADA] "+t),instance:this});return r={txid:e},r}getTxHash(t){return t.hash}getTxDirection(t,e){return!e.inputs_address.find(e=>t===e)}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.inputs_address.find(e=>t!==e):e.outputs_address.find(e=>t!==e)||t}getTxDate(t){return this.getTxDateTime(t).toDateString().slice(4)}getTxTime(t){return this.getTxDateTime(t).toTimeString().slice(0,5)}getTxValue(t,e){const r=this.getTxDirection(t,e),s=[];e.outputs_address.forEach((e,n)=>{r&&e===t?s.push(n):r||e===t||s.push(n)});let n;if(e.inputs_address.concat(e.outputs_address).every(e=>e===t)){const t=e.outputs_amount.reduce((t,e)=>t.add(new this.wallet.BN(e)),new this.wallet.BN(0));n=e.inputs_amount.reduce((t,e)=>t.add(new this.wallet.BN(e)),new this.wallet.BN(0)).sub(t).toString()}else n=s.reduce((t,r)=>t.add(new this.wallet.BN(e.outputs_amount[r])),new this.wallet.BN(0)).toString();return this.wallet.toCurrencyUnit(n)}getTxDateTime(t){return new Date(t.time)}getTxConfirmations(t){return 1}async getBalance(t){const e=await this.getInfo(t);return e&&e.balance}async sendTransaction(t){const e=await this.request(this.getSendTransactionUrl(),this.getSendTransactionMethod(),this.getSendTransactionParams(t),n.s,this.getSendOptions());return this.modifySendTransactionResponse(e,t.txHash)}async getUnspentOutputs(t){return await this.request(this.getUTXOUrl(),"post",{addresses:[t]}).catch(t=>{throw new a.d({type:n.k,error:t,url:this.getUTXOUrl(),instance:this})})}}e.a=CardanoliteExplorer},1340:function(t,e,r){"use strict";var s=r(16),n=r.n(s),a=r(8);class CardanoRestExplorer extends a.a{getAllowedTickers(){return["ADA"]}getTxHash(t){return t.ctbId}getTxDirection(t,e){return!e.ctbInputs.find(({ctaAddress:e})=>t===e)}getTxOtherSideAddress(t,e){if(!!this.getTxDirection(t,e)){return e.ctbInputs.find(({ctaAddress:e})=>e!==t).ctaAddress}{const r=e.ctbOutputs.find(({ctaAddress:e})=>e!==t);if(r)return r.ctaAddress}return t}getTxValue(t,e){const r=this.getTxDirection(t,e);if(e.ctbInputs.concat(e.ctbOutputs).every(({ctaAddress:e})=>e===t))return this.wallet.toCurrencyUnit(e.ctbFees.getCoin);const s=e.ctbOutputs.reduce((e,s)=>r?s.ctaAddress===t?e.add(new n.a(s.ctaAmount.getCoin)):e:s.ctaAddress!==t?e.add(new n.a(s.ctaAmount.getCoin)):e,new n.a("0"));return this.wallet.toCurrencyUnit(s)}getTxDateTime(t){return new Date(1e3*t.ctbTimeIssued)}async getBalance(t){return(await this.getUnspentOutputs(t)).reduce((t,e)=>t.add(new n.a(e.amount)),new n.a(0))}async sendTransaction({rawtx:t}){return{txid:await this.request("api/submit/tx","post",Buffer.from(t),void 0,{headers:{"Content-Type":"application/cbor","API-key":this.config.options?this.config.options["API-key"]:void 0}})}}async getUnspentOutputs(t){return(await this.request("mainnet/utxos/"+t,"get")).map(t=>({amount:String(t.coin),tx_hash:t.txid,tx_index:t.index,receiver:t.address}))}async getTransactions({address:t}){const e=await this.request("api/addresses/summary/"+t,"get");if(e.Left)throw new Error(e.Left);return this.modifyTransactionsResponse(e.Right&&e.Right.caTxList,t)}async getInfo(t){const e=await this.request("api/addresses/summary/"+t,"get");return{balance:e.Right&&e.Right.caBalance.getCoin,transactions:e.Right&&e.Right.caTxList}}}e.a=CardanoRestExplorer},1341:function(t,e,r){"use strict";var s=r(8),n=r(4),a=r(3);class NanocrawlerExplorer extends s.a{getAllowedTickers(){return["NANO"]}getApiPrefix(){return"v2"}getInfoUrl(t){return`${this.getApiPrefix()}/accounts/${t}`}modifyInfoResponse(t){return{balance:t.account.balance,account_state:t.account}}getTransactionUrl(t){return this.requestedTxId=t,`${this.getApiPrefix()}/blocks/${t}`}modifyTransactionResponse(t){return t.hash=this.requestedTxId,super.modifyTransactionResponse(t)}getTransactionsUrl(t){return`${this.getApiPrefix()}/accounts/${t}/history`}getPendingTransactionsUrl(t){return`${this.getApiPrefix()}/accounts/${t}/pending`}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{}}async getTransactions(t,e=0,r=this.defaultTxLimit){const s=await this.request(this.getTransactionsUrl(t),this.getTransactionsMethod(),this.getTransactionsParams(e,r),a.i);return this.modifyTransactionsResponse(s,t)}getTxHash(t){return t.hash}getTxDirection(t,e){return"receive"===e.subtype}getTxOtherSideAddress(t,e){return e.account}getTxValue(t,e){return Number(this.wallet.toCurrencyUnit(e.amount))}getTxDateTime(t){return new Date(Number(""+t.timestamp))}getSendTransactionUrl(){return this.getApiPrefix()+"/transactions"}getTxConfirmations(t){return Number("state"===t.type)}getSendTransactionParams(t){return{transactions:[t]}}modifySendTransactionResponse(t){if(t.data.invalid.length>0)throw new n.d({type:a.s,error:new Error(t.data.invalid[0]),instance:this});if(0===t.data.broadcast.length)throw new n.d({type:a.s,error:new Error("Not found broadcast transaction"),instance:this});return{txid:t.data.broadcast[0]}}}e.a=NanocrawlerExplorer},1347:function(t,e,r){"use strict";var s=r(8),n=r(22);class NearHelperExplorer extends s.a{getAllowedTickers(){return["NEAR"]}async getTransactions(...t){try{return await super.getTransactions(...t)}catch(t){return n.a.error({instance:this,error:this.wallet.ticker+": failed to load user transactions"}),[]}}getTransactionsUrl(t){return`account/${t}/activity`}getTransactionsMethod(){return"get"}getTransactionsParams(t,e=0,r=this.defaultTxLimit,s){return{limit:r}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t,e).filter(Boolean)}getTransactionsModifiedResponse(t,e){return"TRANSFER"===t.action_kind?super.getTransactionsModifiedResponse(t,e):null}getTxDirection(t,e){return e.receiver_id===t}getTxDateTime(t){return new Date(new this.wallet.BN(t.block_timestamp).div(new this.wallet.BN(1e6)).toNumber())}getTxOtherSideAddress(t,e){return e.receiver_id===t?e.signer_id:e.receiver_id}getTxValue(t,e){return this.wallet.toCurrencyUnit(e.args.deposit)}getTxHash(t){return t.hash}getTxFee(){return null}getTxConfirmations(){return 2}}e.a=NearHelperExplorer},1348:function(t,e,r){"use strict";var s=r(18),n=r.n(s),a=r(1349),i=r(35),o=r.n(i),c=r(16),l=r.n(c),d=r(8),u=r(22),h=r(31),g=r(4),w=r(9),f=r(217);const m=new l.a("100");class NearRPCExplorer extends d.a{constructor(...t){super(...t),n()(this,"getNodeConfig",o.a.throttle(this._getNodeConfig,800)),n()(this,"getGasPrice",o.a.throttle(this._getGasPrice,800)),this.provider=new a.providers.JsonRpcProvider(this.config.baseUrl)}getAllowedTickers(){return["NEAR"]}async _getNodeConfig(){try{return this.provider.experimental_protocolConfig({finality:"final"})}catch(t){return u.a.error({instance:this,error:t}),null}}async getAccessKey(t,e){return this.provider.query(`access_key/${t}/${e}`,"")}async sendTransaction(t){const{transaction:e}=await this.provider.sendJsonRpc("broadcast_tx_commit",[t]);return{txid:null==e?void 0:e.hash}}async _getGasPrice(){try{const{gas_price:t}=await this.provider.gasPrice(null);return t}catch(t){return u.a.error({instance:this,error:t}),null}}async getInfo(t){try{const{runtime_config:{storage_amount_per_byte:e}}=await this.getNodeConfig(),r=await this.provider.query({request_type:"view_account",finality:"final",account_id:t}),s=new this.wallet.BN(r.storage_usage).mul(new this.wallet.BN(e)),n=new this.wallet.BN(r.locked),a=s.sub(n),i=new this.wallet.BN(r.amount).add(n);return{balance:i.sub(n).toString(),unspendable:a}}catch(t){if("AccountDoesNotExist"===t.type)return{balance:"0"};throw t}}async getStakingInfo(t,{balance:e,reserve:r,unspendableBalance:s,gasLimit:n,gasPrice:a}){let i=await h.a.get("stake_validators_near").catch(console.warn);var o;i||(i=(null===(o=f.find(t=>t.currency===this.wallet.ticker))||void 0===o?void 0:o.validators)||[]);const c=new this.wallet.BN(n).mul(a),d=new this.wallet.BN(e).sub(new this.wallet.BN(r)).sub(c).sub(new this.wallet.BN(s)),u={};for(const{address:e}of i)u[e]=await this.getValidatorInfo(t,e);const[g,w,p,T]=["unstaked","staked","withdrawals","pendingWithdrawals"].map(t=>Object.keys(u).reduce((e,r)=>e.add(new this.wallet.BN(u[r][t])),new this.wallet.BN("0"))),x=new l.a(e).add(new this.wallet.BN(w)).add(new this.wallet.BN(g));return{total:this.wallet.toCurrencyUnit(x),available:d.isNeg()?"0":this.wallet.toCurrencyUnit(d),staking:{total:w.toString(),unstake:g.toString(),pendingWithdrawals:T.toString(),withdrawals:p.gt(m)?p.toString():"0",validators:u},unspendableBalance:s.toString()}}async getValidatorInfo(t,e){const[r,s,n,a]=await Promise.all([this.viewFunction(e,"get_account_total_balance",{account_id:t}),this.viewFunction(e,"get_account_staked_balance",{account_id:t}),this.viewFunction(e,"get_account_unstaked_balance",{account_id:t}),this.viewFunction(e,"is_account_unstaked_balance_available",{account_id:t})]);return{total:r,staked:s,unstaked:n,withdrawals:a?n:"0",pendingWithdrawals:a?"0":n,availableForWithdraw:a}}async viewFunction(t,e,r={}){try{var s;const n=this.bytesJsonStringify(r).toString("base64"),a=await this.provider.query({request_type:"call_function",account_id:t,method_name:e,args_base64:n,finality:"final"});return(null==a||null===(s=a.result)||void 0===s?void 0:s.length)>0&&this.jsonFromRawResponse(Buffer.from(a.result))}catch(t){throw console.warn(t),new g.e({type:w.q,error:t,instance:this})}}jsonFromRawResponse(t){return JSON.parse(Buffer.from(t).toString())}bytesJsonStringify(t){return Buffer.from(JSON.stringify(t))}}e.a=NearRPCExplorer},1623:function(t){t.exports=JSON.parse('{"default":{"CONFIGS_BASE_URL":"https://services.atomicwallet.io","REFERRAL_PROGRAM_API_URL":"https://invite-friends.atomicwallet.io"},"stage":{"CONFIGS_BASE_URL":"https://services-stage.atomicwallet.io","REFERRAL_PROGRAM_API_URL":"http://invite-friends.anyswap.co"},"dev":{"CONFIGS_BASE_URL":"https://services-dev.atomicwallet.io","REFERRAL_PROGRAM_API_URL":"http://invite-friends.anyswap.co"}}')},1641:function(t){t.exports=JSON.parse('{"apiKey":"7cd76888ccee2317b76dab909e1b36f0d70aa7fc13d8866eeace933dfc7f4544"}')},1672:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var s=r(4),n=r(1640),a=r(28),i=r.n(a);var o=class ApiClient_ChangeNowV2ApiClient{constructor(t){this.apiKey=t,this.baseUrl="https://api.changenow.io/v2"}queryGet(t,e={}){return this.query("get",t,e)}queryPost(t,e={}){return this.query("post",t,e)}async query(t,e,r={}){try{const{data:s}=await i()({method:t,url:`${this.baseUrl}/${e}`,["post"===t?"data":"params"]:r,headers:{"x-changenow-api-key":this.apiKey}});return s}catch(t){throw new Error("Can't connect to ChangeNOW")}}};var c=class WalletConverter{constructor(t){this.apiClient=t,this.availableTargetCoinsPromise=null}getDeterministicFieldSet(t={}){const{contract:e,network:r,parent:s,ticker:n}=t,a="string"!=typeof r||["","mainnet"].includes(r)?s:r;return{contract:e,parent:{ong:"ont"}[a.toLowerCase()]||a,ticker:"BSC"===n&&"BSC"===s?"BNB":n}}async getTarget(t){const{contract:e,parent:r,ticker:s}=this.getDeterministicFieldSet(t);return this.isInitialized()||this.initialize(),(await this.availableTargetCoinsPromise).find(({network:t,ticker:n,tokenContract:a})=>{const i=(!e&&!a||this.isContractIgnored(r,s))&&s.toLowerCase()===n.toLowerCase(),o=void 0!==e&&null!==a&&e.toLowerCase()===a.toLowerCase();return(r||s).toLowerCase()===t.toLowerCase()&&(i||o)})}initialize(){this.availableTargetCoinsPromise=this.apiClient.queryGet("exchange/currencies")}isInitialized(){return null!==this.availableTargetCoinsPromise}isContractIgnored(t,e){return"ont"===t.toLowerCase()&&"ong"===e.toLowerCase()}},l=r(1641);const d=({contract:t,parent:e,ticker:r})=>({contract:t,parent:e,ticker:r});var u=class Changenow_ChangeNowService{constructor(){this.apiClient=new o(l.apiKey),this.walletConverter=new c(this.apiClient)}getInternalContract({network:t,ticker:e,tokenContract:r}){return this.walletConverter.isContractIgnored(t,e)?void 0:r}getInternalTicker({network:t,ticker:e,tokenContract:r}){return"bsc"===t&&"bnb"===e&&null===r?"BSC":"trx"===t&&"usdt"===e?"TRX-USDT":e.toUpperCase()}getInternalWalletData({network:t,ticker:e,tokenContract:r,legacyTicker:s}){if(!s)return{ticker:this.getInternalTicker({ticker:e,network:t,tokenContract:r}),parentTicker:t.toUpperCase()};const[,a]=Object.entries(n).find(([t])=>t===s.toLowerCase())||[];return a||{ticker:s}}getName(){return"ChangeNow"}async getDefaultPairQueryParams(t,e){const[r,s]=await Promise.all([this.walletConverter.getTarget(t),this.walletConverter.getTarget(e)]);return{fromCurrency:r.ticker,fromNetwork:r.network,toCurrency:s.ticker,toNetwork:s.network}}async getExchangeAmount(t,e,r){if(!r||!Number(r))return 0;try{const s=await this.getDefaultPairQueryParams(t,e),{toAmount:n}=await this.apiClient.queryGet("exchange/estimated-amount",Object.assign({fromAmount:(r||"0").replace(/,/g,".")},s));return n}catch(t){throw new s.b}}async getMinAndMaxAmount(t,e){try{const r=await this.getDefaultPairQueryParams(t,e),{minAmount:s}=await this.apiClient.queryGet("exchange/min-amount",r);return{min:s,max:null}}catch(t){throw new s.b}}getCurrencies(){return this.apiClient.queryGet("exchange/currencies")}async createTransaction(t,e,r,n,a,i,o,c={}){const[{network:l,ticker:u},{network:h,ticker:g}]=await Promise.all([this.walletConverter.getTarget(t),this.walletConverter.getTarget(e)]),w={address:r,fromAmount:a,fromCurrency:u,fromNetwork:l,toCurrency:g,toNetwork:h,refundAddress:n,flow:"standard",type:"direct",userId:o.hash,payload:{bnb:o.bnbAddr,eth:o.ethAddr},...c};i&&(w.extraId=i);try{var f;const r=await this.apiClient.queryPost("exchange",w);return{amountToReceive:r.toAmount,amountToSend:r.fromAmount,from:d(t),to:d(e),id:r.id,orderId:r.id,payinAddress:r.payinAddress,payinExtraId:null!==(f=r.payinExtraId)&&void 0!==f?f:null,payoutAddress:r.payoutAddress}}catch(t){throw new s.b}}validateExchangeTx(t){const{id:e="",amountToSend:r="",payinAddress:n=""}=t;if(!e||void 0===e)throw new s.c;if(!r||void 0===r)throw new s.c;if(!n||void 0===n)throw new s.c;return t}async getStatus(t){try{const{amountReceive:e,payinHash:r,payoutHash:n,status:a}=await this.apiClient.queryGet("exchange/by-id",{id:t});if(void 0!==a)return Object.assign({id:t,payinHash:r,payoutHash:n,status:a},e?{amountToReceive:e}:{});throw new s.b}catch(t){throw new s.b}}getTransactions(t){return Promise.all(t.map(t=>this.getStatus(t)))}getExchangeActions(t){return this.apiClient.queryGet("exchange/actions",{id:t})}exchangeContinue(t){return this.apiClient.queryPost("exchange/continue",{id:t})}exchangeRefund(t,e,r){return this.apiClient.queryPost("exchange/refund",Object.assign({address:e,id:t},r?{extraId:r}:{}))}}},181:function(t,e,r){"use strict";var s=r(22);class AtomicError extends Error{constructor(t){t.error.data&&(t.error=Object.values(t.error.data).toString());const e=t.instance.ticker||t.instance.wallet&&t.instance.wallet.ticker;let r="";if(t.error.response){const e=t.error.response.status;let s="";t.error.response.data&&t.error.response.data.message?s=t.error.response.data.message:t.error.response.data?s="string"==typeof t.error.response.data?t.error.response.data:t.error.response.data.error:t.error.response.detail&&(s=t.error.response.detail),r=`${e} - ${s}`}else r="Unknown error: - "+t.error;const n={type:t.type,error:r,currency:e,instance:t.instance};t.url&&(n.url=t.url),s.a.error(n),super(t.error.toString()),this.name=this.constructor.name}}e.a=AtomicError},4:function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return i})),r.d(e,"g",(function(){return o.a})),r.d(e,"e",(function(){return c})),r.d(e,"i",(function(){return l})),r.d(e,"j",(function(){return d})),r.d(e,"f",(function(){return u})),r.d(e,"h",(function(){return h})),r.d(e,"a",(function(){return g}));class ExchangeConnectionError extends Error{constructor(){super("Can't connect to ChangeNOW")}}var s=ExchangeConnectionError;class ExchangeValidationError extends Error{constructor(){super("Exchange Transaction validation failed, probably exchange tx has not been created properly")}}var n=ExchangeValidationError,a=r(181);class ExplorerRequestError_ExplorerRequestError extends a.a{constructor(t){super(t),this.errorData=t.errorData,this.name=this.constructor.name}}var i=ExplorerRequestError_ExplorerRequestError,o=r(600);class ExternalError_ExternalError extends a.a{constructor(t){super(t),this.name=this.constructor.name}}var c=ExternalError_ExternalError;class WalletError_WalletError extends a.a{constructor(t){super(t),this.name="WalletError"}}var l=WalletError_WalletError;Error;class WalletsCollectionError_WalletsCollectionError extends a.a{constructor(t){super(t),this.name=this.constructor.name}}var d=WalletsCollectionError_WalletsCollectionError;class InsufficientFundsError_InsufficientFundsError extends a.a{constructor(t){super(t),this.name="InsufficientFundsError"}}var u=InsufficientFundsError_InsufficientFundsError;class UndeclaredAbstractMethodError extends Error{constructor(t,e){super(`You should declare the '${t}' abstract method in the ${e.constructor.name} class!`)}}var h=UndeclaredAbstractMethodError;class AjvValidationError extends Error{constructor(t){super("Schema validation failed"),this.validationErrors=t}}var g=AjvValidationError},600:function(t,e,r){"use strict";var s=r(181);class InternalError extends s.a{constructor(t){super(t),this.name=this.constructor.name}}e.a=InternalError},603:function(t,e,r){"use strict";var s=r(28),n=r.n(s),a=r(8);class DgbInsightExplorer extends a.a{getAllowedTickers(){return["BTC","LTC","ZEC","DGB","DASH","DOGE","BTG","QTUM"]}getInfoUrl(t){return"addr/"+t}getTransactionUrl(t){return"tx/"+t}getTransactionsUrl(t){return`addrs/${t}/txs`}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.items,e)}getUnspentOutputsUrl(t){return`addr/${t}/utxo`}getSendTransactionUrl(){return"tx/send"}getSendTransactionParam(){return"rawtx"}modifyInfoResponse(t){return{balance:t.balanceSat,transactions:[]}}modifyUnspentOutputsResponse(t){return t.map(({address:t,txid:e,vout:r,scriptPubKey:s,satoshis:n})=>({txid:e,vout:r,script:s,value:n,address:t}))}async sendTransaction(t){const e=await n.a.post(`${this.config.baseUrl}${this.getSendTransactionUrl()}`,{[this.getSendTransactionParam()]:t});return this.modifyGeneralResponse(this.modifySendTransactionResponse(e))}getTxOtherSideAddress(t,e){if(!e.vin)return"...";if(this.getTxDirection(t,e))return e.vin[0].addr;let r=new this.wallet.BN(0),s="...";return e.vout.forEach(e=>{e.scriptPubKey.addresses.length>0&&e.scriptPubKey.addresses[0]!==t&&r.lt(new this.wallet.BN(this.wallet.toMinimalUnit(e.value)))&&(r=new this.wallet.BN(this.wallet.toMinimalUnit(e.value)),s=e.scriptPubKey.addresses[0])}),s}getTxValue(t,e){let r=new this.wallet.BN(0),s=new this.wallet.BN(0);e.vin.forEach(e=>{e.addr===t&&(r=r.add(new this.wallet.BN(e.valueSat)))}),e.vout.forEach(e=>{e.scriptPubKey.addresses&&e.scriptPubKey.addresses[0]===t&&(s=s.add(new this.wallet.BN(this.wallet.toMinimalUnit(e.value))))});const n=r.sub(s),a=n.lt(new this.wallet.BN(0)),i=n.abs();return Number(this.wallet.toCurrencyUnit(a?i:i.sub(new this.wallet.BN(this.wallet.toMinimalUnit(e.fees)))))}calculateBalance(t=[]){return t.reduce((t,{value:e})=>new this.wallet.BN(e).add(t),new this.wallet.BN("0"))}}e.a=DgbInsightExplorer},604:function(t,e,r){"use strict";var s=r(8),n=r(4),a=r(3),i=r(217),o=r(130);class CosmosNodeExplorer extends(Object(o.b)(s.a)){constructor(){super(...arguments),this.defaultTxLimit=50,this.canPaginate=!0,this.lastKnownHeight=0;const t=i.find(t=>t.currency===this.wallet.ticker);this.validatorMoniker={},t.validators.forEach(t=>{this.validatorMoniker[t.address]=t.name})}getAllowedTickers(){return["ATOM","BAND"]}async request(){const t=await super.request(...arguments);return t&&t.height&&this.lastKnownHeight<Number(t.height)&&(this.lastKnownHeight=t.height),t&&t.result?t.result:t}async getAuth(t){const e=await this.request("auth/accounts/"+t);if(e&&e.value&&"0"===e.value.account_number)throw new n.d({type:a.e,error:new Error(JSON.stringify(e)),instance:this});return e&&e.value}getLatestBlockUrl(){return"blocks/latest"}getSendTransactionUrl(){return"txs"}getSendTransactionParams(t){return t}modifySendTransactionResponse(t){if(t.code)throw new n.d({type:a.s,error:new Error(t.raw_log),instance:this});return{txid:t.txhash}}async sendDelegationTransaction(t,e){const r=await this.request(`staking/delegators/${t}/delegations`,"post",e);if(r.value&&"0"===r.value.account_number)throw new n.d({type:a.s,error:new Error(r),instance:this});return r.value}async getTransactionRawardsBlueprint({from:t,gas:e,gas_adjustment:r="1.2",fee:s,chain_id:n,denom:a="uatom"}){return(await this.request(`distribution/delegators/${t}/rewards`,"post",{base_req:{from:t,chain_id:n,gas:e,gas_adjustment:r,fees:[{denom:a,amount:s}],simulate:!1}})).value}async getTransaction(t,e){const r=await this.request("txs/"+e);return this.modifyTransactionResponse(r,t)}async getTransactions({address:t,limit:e,pageNum:r}){r+=1;const[s,n]=await Promise.all([this.request(`txs?message.sender=${t}&message.action=send&page=${r}&limit=${e}`),this.request(`txs?transfer.recipient=${t}&message.action=send&page=${r}&limit=${e}`)]),a=n.txs.map(t=>t.txhash),i=s.txs.filter(t=>!a.includes(t.txhash));n.txs.forEach(t=>{t.direction=!0}),i.forEach(t=>{t.direction=!1});const o=n.txs.concat(i).sort((t,e)=>Number(t.height)<Number(e.height)?1:-1);return await this.getLatestBlock(),this.modifyTransactionsResponse(o,t)}getTxValue(t,e){const r=e.tx.value.msg[0].value.amount,s=Array.isArray(r)?r[0].amount:r.amount;return this.wallet.toCurrencyUnit(s)}getTxDirection(t,e){return String(e.tx.value.msg[0].value.to_address).toLowerCase()===t.toLowerCase()}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.tx.value.msg[0].value.from_address:e.tx.value.msg[0].value.to_address}getTxDateTime(t){return new Date(t.timestamp)}getTxConfirmations(t){return this.lastKnownHeight-Number(t.height)}getTxHash(t){return t.txhash}getTxMemo(t){return t.tx.value.memo}getTotalDelegations(t,e){switch(this.wallet.ticker){case"ATOM":return this.getTotalDelegationsAtom(t,e);case"BAND":return this.getTotalDelegationsBand(t,e);default:throw new Error("Unknown wallet ticker")}}getTotalDelegationsBand(t,e){let r=new this.wallet.BN("0");return t.forEach(({shares:t,validator_address:s})=>{const n=this.validatorMoniker[s]||s;e.validators[n]={shares:this.wallet.toCurrencyUnit(t.split(".")[0]),address:s},r=r.add(new this.wallet.BN(t.split(".")[0]))}),r}getTotalDelegationsAtom(t,e){let r=new this.wallet.BN("0");return t.forEach(({delegation:t})=>{const s=this.validatorMoniker[t.validator_address]||t.validator_address;e.validators[s]={shares:this.wallet.toCurrencyUnit(t.shares.split(".")[0]),address:t.validator_address},r=r.add(new this.wallet.BN(t.shares.split(".")[0]))}),r}async getInfo(t){await this.getLatestBlock();const e=await this.request("bank/balances/"+t),r=await this.request(`staking/delegators/${t}/delegations`),s=await this.request(`staking/delegators/${t}/unbonding_delegations`),n=await this.request(`distribution/delegators/${t}/rewards`);let a=new this.wallet.BN(0);n.total&&n.total.length>0&&(a=new this.wallet.BN(n.total[0].amount.split(".")[0]));const i=this.wallet.toCurrencyUnit(a.toString());let o="0";const c={validators:{},total:new this.wallet.BN("0")},l={validators:{},total:new this.wallet.BN("0")};let d=new this.wallet.BN(0);if(e&&e.length>0){const t=new this.wallet.BN(e[0].amount);d=d.add(t),o=t.toString()}if(r&&r.length>0){const t=this.getTotalDelegations(r,c);d=d.add(t),c.total=this.wallet.toCurrencyUnit(t.toString())}if(s&&s.length>0){let t=new this.wallet.BN("0");s.forEach(({entries:e,validator_address:r})=>{const s=r;l.validators[s]=e.map(t=>new this.wallet.BN(t.balance.split(".")[0])).reduce((t,e)=>t.add(new this.wallet.BN(e)),new this.wallet.BN("0")),t=t.add(l.validators[s])}),d=d.add(t),l.total=this.wallet.toCurrencyUnit(t.toString().split(".")[0])}d=d.add(a);const u=new this.wallet.BN(o).sub(new this.wallet.BN(this.wallet.feeDefault||0)).sub(new this.wallet.BN(this.wallet.reserveForStake||0)),h=Number(u)>0?this.wallet.toCurrencyUnit(u):0;return{balance:d,balances:{available:this.wallet.toCurrencyUnit(o),total:d,staking:c,rewards:i,unbonding:l,availableForStake:h},transactions:this.wallet.transactions}}modifyLatestBlockResponse(t){if(!t)throw new Error("[CosmosNodeExplorer] wrong latest block response");const e=Object.hasOwnProperty.call(t,"block")?"block":"block_meta";return this.chainId=t[e].header.chain_id,this.lastKnownHeight=Number(t[e].header.height)||0,t}getChainId(){return this.chainId}getTxFee(t){try{const e=t.tx.value.fee.amount[0].amount;return this.wallet.toCurrencyUnit(e)}catch(t){return 0}}}e.a=CosmosNodeExplorer},606:function(t,e,r){"use strict";var s=r(31),n=r(8),a=r(29),i=r(39),o=r(87),c=r(22),l=r(3);class BlockbookV2Explorer extends n.a{constructor(...t){super(...t),this.version=2,this.txDefaultLimit=100,this.canPaginate=!0}async getSocketTransaction({address:t,hash:e,scriptPubKey:r}){const s=await this.getTransaction(t,e),n=await this.getUnspentOutputs(t,r),a=this.calculateBalance(n).toString();await o.a.filterAndUpdateTransactions([s]),this.eventEmmiter.emit(`${this.wallet.parent}-${this.wallet.id}::new-socket-tx`,{unconfirmedTx:s,unconfirmedBalance:a})}getAllowedTickers(){return["BTC","BSC","BCD","BTG","BCH","BSV","DOGE","LTC","DGB","DASH","RVN","KMD","ETH","DCR","QTUM","ZEC","YEC","GRS"]}getApiPrefix(){return`api/v${this.version}/`}getLatestBlockUrl(){return this.getApiPrefix()+"block-index/last"}getBlockUrl(t){return`${this.getApiPrefix()}block/${t}`}getBlockMethod(){return"get"}getBlockParams(){return{}}getBlockOptions(){return{}}getAddressUrl(t){return`${this.getApiPrefix()}address/${t}`}getInfoUrl(t){return`${this.getApiPrefix()}address/${t}`}getInfoOptions(){return this.config.options||{}}getUserTokenListParams(){return{}}getTransactionsOptions(){return"BSC"===this.wallet.ticker?{headers:{"api-key":"ypa5Llv3B3fyToNsMkkaiEIIGKdcRYqU"}}:{}}getInfoParams(){return this.config.options||{}}getSendOptions(){return"BSV"===this.wallet.ticker?{headers:{"Content-Type":"text/plain"}}:{}}modifyInfoResponse(t){const e=new this.wallet.BN(t.unconfirmedBalance),r=new this.wallet.BN(t.balance).add(e).toString(),s={};return t.tokens&&t.tokens.forEach(t=>{s[t.symbol]=t.balance}),{balance:r,tokenBalances:s,unconfirmedBalance:e.toString(),transactions:[]}}getTransactionUrl(t){return`${this.getApiPrefix()}tx/${t}`}getTransactionParams(){return this.getInfoParams()}getTransactionsUrl(t){return`${this.getApiPrefix()}address/${t}`}getTransactionsParams(t,e=0,r=this.txDefaultLimit,s){return{...this.getInfoParams(),page:s,pageSize:r,details:"txs",filter:"All"}}modifyTransactionResponse(t,e){if(t.tokenTransfers&&0===Number(t.value)){const r={};t.tokenTransfers.forEach(s=>{r[s.token]||(r[s.token]=[]),r[s.token].push(this.getTransactionFromTokenTransfer({transfer:s,selfAddress:e,tx:t}))});for(const t in r){const s=r[t];if(0!==s.length)for(const t of s){const{otherSideAddress:r}=t;if([r.toLowerCase(),e.toLowerCase()].includes(e.toLowerCase()))return t}}}return super.modifyTransactionResponse(t,e)}modifyTransactionsResponse(t,e){const r=t&&!!t.transactions,s=r?t.transactions.filter(t=>t.tokenTransfers&&Array.isArray(t.tokenTransfers)&&0===Number(t.value)):[],n=r?t.transactions.filter(t=>!(t.tokenTransfers&&0===Number(t.value)||t.ethereumSpecific&&0===t.ethereumSpecific.status)):[],a=r?t.transactions.filter(t=>t.ethereumSpecific&&0===t.ethereumSpecific.status):[],i=super.modifyTransactionsResponse(n,e);return s.length>0?{transactions:i,failed:a,tokenTransactions:this.modifyTokenTransactionsResponse(s,e)}:["ETH","BSC"].includes(this.wallet.parent)?{transactions:i,failed:a}:i}modifyTokenTransactionsResponse(t,e){return t.map(t=>t.tokenTransfers.filter(t=>this.filterTokenTransferTransactions(e,t)).map(r=>this.getTransactionFromTokenTransfer({transfer:r,selfAddress:e,tx:t}))).flat()}filterTokenTransferTransactions(t,e){return!![e.to.toLowerCase(),e.from.toLowerCase()].includes(t.toLowerCase())}getTransactionFromTokenTransfer({transfer:t,selfAddress:e,tx:r}){return new a.a({ticker:t.symbol.toUpperCase(),txid:this.getTxHash(r),walletid:this.getTokenId(t.symbol,t.token),fee:this.getTxFee(r),feeTicker:this.wallet.parent,direction:t.to.toLowerCase()===e.toLowerCase(),otherSideAddress:t.to.toLowerCase()===e.toLowerCase()?t.from.toLowerCase():t.to.toLowerCase(),amount:Object(i.c)(t.value,t.decimals),datetime:this.getTxDateTime(r),memo:this.getTxMemo(r),confirmations:this.getTxConfirmations(r),nonce:this.getTxNonce(r),alias:this.wallet.alias})}getUnspentOutputsUrl(t){return`${this.getApiPrefix()}utxo/${t}`}getUnspentOutputsParams(t){return this.getInfoParams()}modifyUnspentOutputsResponse(t,e,r){if(!r)throw this.createError("No scriptPubKey");return e.map(({txid:e,vout:s,value:n,height:a})=>({txid:e,txId:e,vout:s,script:r,value:n,address:t,outputIndex:s,satoshis:Number(n),height:a}))}getSendTransactionUrl(){return this.getApiPrefix()+"sendtx/"}getSendTransactionParams(t){return t}modifySendTransactionResponse(t){return{txid:t.result}}getTxDateTime(t){return t.blockTime?new Date(Number(t.blockTime+"000")):new Date}getTxValue(t,e){let r=new this.wallet.BN(0),s=new this.wallet.BN(0);if(!e.vin||!e.vout)return"0";if(["ETH","BSC"].includes(this.wallet.ticker))return e.vout.forEach(t=>{Array.isArray(t.addresses)&&t.addresses.length>0&&(s=s.add(new this.wallet.BN(t.value)))}),this.wallet.toCurrencyUnit(s);const n=new this.wallet.BN(e.fees);let a=[];e.vin.forEach(e=>{Array.isArray(e.addresses)&&(a=a.concat(e.addresses),e.addresses.includes(t)&&(r=r.add(new this.wallet.BN(e.value))))}),e.vout.forEach(e=>{Array.isArray(e.addresses)&&(a=a.concat(e.addresses),e.addresses.includes(t)&&(s=s.add(new this.wallet.BN(e.value))))});const o=a.every(e=>e===t),c=this.wallet.decimal;if(o){if("KMD"===this.wallet.ticker){const t=s.sub(r);if(t.gten(0))return Object(i.c)(t,c)}return Object(i.c)(e.fees,c)}const l=this.getTxDirection(t,e)?s:r.sub(s).sub(n);return Object(i.c)(l,c)}getTxNonce(t){if(t.ethereumSpecific)return t.ethereumSpecific.nonce}getTxDirection(t,e){if(["ETH","BSC"].includes(this.wallet.ticker))return e.vout[0].addresses&&e.vout[0].addresses[0].toLowerCase()===t.toLowerCase();const r=e.vin&&e.vin.filter(({addresses:t})=>Array.isArray(t)).some(({addresses:e})=>e.some(e=>e===t)),s=e.vout&&e.vout.filter(({addresses:t})=>Array.isArray(t)).some(({addresses:e})=>e.some(e=>e===t)),n=e.vout&&e.vout.filter(({addresses:t})=>Array.isArray(t)).some(({addresses:e})=>e.some(e=>e!==t));return!(!s||r)||!(!r||!s||n||"KMD"!==this.wallet.ticker)}getTxOtherSideAddress(t,e){if(!t)throw new Error("selfAddress is not defined");const r=this.getTxDirection(t,e);if(["ETH","BSC"].includes(this.wallet.ticker))return r?e.vin[0].addresses[0]:e.vout[0].addresses&&e.vout[0].addresses[0]||t;if(!e.vin)return"...";let s=[],n=[];if(e.vout.forEach(t=>{s=s.concat(t.addresses)}),e.vin.forEach(t=>{n=n.concat(t.addresses)}),r){return e.vin&&e.vin.filter(({addresses:t})=>Array.isArray(t)).some(({addresses:e})=>e.some(e=>e!==t))?n.find(e=>e!==t):"Claim"}if(s.reduce((e,r)=>r===t?e+1:e,0)===s.length)return t;return s.find(e=>e!==t)}calculateBalance(t=[]){return t.reduce((t,{value:e})=>new this.wallet.BN(e).add(t),new this.wallet.BN("0"))}getUserTokenList(t){return this.request(this.getInfoUrl(t),"get",this.getUserTokenListParams(),"",this.getTransactionsOptions()).then(t=>t.tokens.map(t=>({contractAddress:t.contract,decimals:0,...t})))}async getBannedTokensList(){let t;try{t=await s.a.get("ethereum-tokens-banned")}catch(t){c.a.error({instance:this,error:t})}return Array.isArray(t)?t:[]}async getNonce(t){return(await this.request(this.getInfoUrl(t))).nonce}getTokensInfo(){return 0}getTokenBalanceByContractAddress({info:t,tokenTicker:e}){if("undefined"===t&&"undefined"===t.tokenBalances)throw new Error("BlockbookV2Explorer: getTokenBalanceByContractAddress error: info.tokenBalances must be object");return t.tokenBalances[e]}async getTransactionUnmodified(t){return this.request(this.getTransactionUrl(t),this.getTransactionMethod(),this.getTransactionParams(t),l.j,this.getTransactionOptions())}getTxFee(t){return this.wallet.toCurrencyUnit(t&&t.fees||0)}}e.a=BlockbookV2Explorer},89:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));const s={FINISH_LOADING:"finish-loading",FINISH_LOADING_ALL:"finish-loading-all",NEW_ATOMIC_ID:"new_atomic_id",RAISE_LOADING_ERROR:"raise-loading-error",START_LOADING:"start-loading",START_LOADING_ALL:"start-loading-all",UPDATE_LOADING_PROGRESS:"update-loading-progress"}},944:function(t,e,r){"use strict";var s=r(619),n=r(31),a=r(8),i=r(882),o=r(22),c=r(29),l=r(87);const d={WebSocket:global.WebSocket,connectionTimeout:2e3,maxReconnectionDelay:2e4,minReconnectionDelay:1e4,maxRetries:10};class BinanceDex extends a.a{constructor(...t){super(...t),this.socket=null}getAllowedTickers(){return["BNB"]}getTransactionUrl(t){return`${this.config.baseUrl}api/v1/tx/${t}`}getTransactionParams(){return{format:"json"}}getLatestBlockUrl(){return this.config.baseUrl+"api/v1/node-info"}getBlockUrl(t){return`${this.config.baseUrl}api/v2/transactions-in-block/${t}`}async getBlock(t){return await this.request(this.getBlockUrl(t))}async getTransactions(t,e="BNB"){const{tx:r}=await this.request(`${this.config.baseUrl}api/v1/transactions?address=${t}`);return this.modifyTransactionsResponse(r.filter(t=>"TRANSFER"===t.type).filter(t=>t.txAsset===e),t)}async getMultisendTransactions(t,e){this.latestBlock=await this.getLatestBlock();return(await Promise.all(e.map(async({hash:e,height:r})=>{const s=await this.getBlock(r).catch(t=>console.warn("GetBlockError",t));if(!s)return;const{subTransactions:n=[],memo:a,timeStamp:i}=s.tx.find(t=>t.txHash===e),o=n.find(e=>[e.toAddr,e.fromAddr].includes(t));if(!o)return;const c=o.fromAddr,l=o.toAddr,d=o.value,u=o.txAsset,h=Number(this.latestBlock)-Number(r);return this.modifyMultisendTransactionResponse({ticker:u,value:d,memo:a,fromAddr:c,toAddr:l,hash:e,timeStamp:i,confirmations:h},t)}))).filter(Boolean)}async modifyMultisendTransactionResponse(t,e){return new c.a({ticker:t.ticker,name:this.wallet.name,alias:this.wallet.alias,explorer:this.constructor.name,txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t)})}modifyLatestBlockResponse(t){return t.sync_info.latest_block_height}getTxHash(t){return t.hash||t.txHash}getTxDirection(t,e){return e.toAddr===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.fromAddr:e.toAddr}getTxValue(t,e){return e.value.replace(/(\.\d*[1-9])0+$|\.0*$/,"$1")}getTxDateTime(t){return new Date(t.timeStamp)}getTxMemo(t){return t.memo}getTxConfirmations(t){return t.confirmations||t.txAge}async getTokenList(t=[]){return(await this.request(this.config.baseUrl+"api/v1/tokens?limit=1000").catch(()=>i)).filter(e=>t.includes(e.symbol))}async getAtomicTokenList(){let t;try{t=await n.a.get("bnb-tokens")}catch(t){o.a.error({instance:this,error:t})}return t||i}setSocketClient(t){this.socket?this.socket.reconnect():this.socket=new s.a(`${this.config.websocketUrl}${t}`,void 0,d)}disconnectSocket(){this.socket.close()}async connectSocket(t){this.setSocketClient(t),this.socket._listeners.message.length>0?console.warn("[BNB][websocket] already have message listener, skip"):this.socket.addEventListener("message",async e=>{try{const r=JSON.parse(e.data);if("accounts"===r.stream&&this.wallet.updateBalances(r.data.B),"transfers"===r.stream){const e=r.data,s=e.H,n=e.f;e.t.forEach(e=>{const r=e.o,a=r===t;e.c.forEach(t=>{const e=t.a,i=String(t.A).replace(/(\.\d*[1-9])0+$|\.0*$/,"$1"),o=new c.a({ticker:e,txid:s,direction:a,otherSideAddress:a?n:r,amount:i,datetime:new Date,alias:this.wallet.alias});l.a.filterAndUpdateTransactions([o]),this.eventEmmiter.emit(`${this.wallet.parent}-${e}::new-socket-tx`,{unconfirmedTx:o})})})}}catch(t){console.error(t)}})}}e.a=BinanceDex},957:function(t,e,r){"use strict";var s=r(8),n=r(4),a=r(3);class ArkExplorer extends s.a{async getTransactions(t){try{return await super.getTransactions(t)}catch(t){var e,r;if(404===(null==t||null===(e=t.errorData)||void 0===e||null===(r=e.response)||void 0===r?void 0:r.status))return[];throw t}}getAllowedTickers(){return["ARK"]}getApiPrefix(){return"api"}getInfoUrl(t){return`${this.getApiPrefix()}/wallets/${t}`}modifyInfoResponse(t){return{balance:t.data.balance,transactions:this.wallet.transactions,nonce:t.data.nonce}}getTransactionUrl(t){return`${this.getApiPrefix()}/transactions/${t}`}getTransactionsUrl(t){return`${this.getApiPrefix()}/wallets/${t}/transactions`}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{limit:r,orderBy:"timestamp:desc",page:e>r?parseInt(e/r,10):1}}modifyTransactionsResponse(t,e){return super.modifyTransactionsResponse(t.data,e)}getTxHash(t){return t.id}getTxDirection(t,e){return e.recipient===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.sender:e.recipient}getTxValue(t,e){return Number(this.wallet.toCurrencyUnit(this.getTxDirection(t,e)?e.amount:new this.wallet.BN(e.amount).add(new this.wallet.BN(e.fee))))}getTxDateTime(t){return new Date(Number(t.timestamp.unix+"000"))}getSendTransactionUrl(){return this.getApiPrefix()+"/transactions"}getSendTransactionParams(t){return{transactions:[t]}}modifySendTransactionResponse(t){if(t.data.invalid.length>0)throw new n.d({type:a.s,error:new Error(t.data.invalid[0]),instance:this});if(0===t.data.broadcast.length)throw new n.d({type:a.s,error:new Error("Not found broadcast transaction"),instance:this});return{txid:t.data.broadcast[0]}}getTxFee(t){return this.wallet.toCurrencyUnit(t&&t.fee||0)}}e.a=ArkExplorer},958:function(t,e,r){"use strict";var s=r(8),n=r(29);class BcdExplorer extends s.a{getAllowedTickers(){return["BCD"]}getApiPrefix(){return"v2/"}modifyGeneralResponse(t){return void 0!==t.data.data?t.data.data:t.data}getInfoUrl(t){return`${this.getApiPrefix()}addr/${t}`}modifyInfoResponse(t){return{balance:t.balance,transactions:[]}}getTransactionsUrl(t){return`${this.getApiPrefix()}addr/${t}/history`}getTransactionsParams(t,e=0,r=this.defaultTxLimit){return{verbose:3}}modifyTransactionsResponse(t,e){return t.list.map(t=>new n.a({ticker:this.wallet.ticker,name:this.wallet.name,walletid:this.wallet.id,txid:this.getTxHash(t),fee:this.getTxFee(t),feeTicker:this.wallet.parent,direction:this.getTxDirection(e,t),otherSideAddress:this.getTxOtherSideAddress(e,t),amount:this.getTxValue(e,t),datetime:this.getTxDateTime(t),memo:this.getTxMemo(t),confirmations:this.getTxConfirmations(t),alias:this.wallet.alias})).sort((t,e)=>e.confirmations-t.confirmations).reverse()}getTxDirection(t,e){return e.inputs&&!e.inputs.find(({prev_addresses:e})=>e[0]===t)}getTxOtherSideAddress(t,e){if(!e.inputs)return"...";if(this.getTxDirection(t,e))return e.inputs[0].prev_addresses[0];let r=new this.wallet.BN(0),s="...";return e.outputs.forEach(e=>{e.addresses.length>0&&e.addresses[0]!==t&&r.lt(new this.wallet.BN(e.value))&&(r=new this.wallet.BN(e.value),s=e.addresses[0])}),s}getTxValue(t,e){let r=new this.wallet.BN(0),s=new this.wallet.BN(0);e.inputs.forEach(e=>{e.prev_addresses[0]===t&&(r=r.add(new this.wallet.BN(e.prev_value)))}),e.outputs.forEach(e=>{e.addresses&&e.addresses.length>0&&e.addresses[0]===t&&(s=s.add(new this.wallet.BN(e.value)))});const n=r.sub(s),a=n.lt(new this.wallet.BN(0)),i=n.abs();return Number(this.wallet.toCurrencyUnit(a?i:i.sub(new this.wallet.BN(e.fees))))}getTxDateTime(t){return new Date(Number(t.timestamp+"000"))}getUnspentOutputsUrl(t){return`${this.getApiPrefix()}addr/${t}/utxo`}modifyUnspentOutputsResponse(t,e){return e.list.map(t=>({txid:t.txid,value:t.value,vout:t.n,script:"",address:""}))}calculateBalance(t=[]){return t.reduce((t,{value:e})=>new this.wallet.BN(e).add(t),new this.wallet.BN("0"))}modifyLatestBlockResponse(t){return t.list[0]}getLatestBlockUrl(){return this.getApiPrefix()+"block/latest/1"}getSendTransactionMethod(){return"get"}getSendTransactionParams(t){return{"args[0]":t,"args[1]":"",execute:"Execute",method:"sendrawtransaction"}}getSendTransactionUrl(){return"https://bcd.zupago.pe/rpc-browser"}modifySendTransactionResponse(t){let e=t.match(/&quot;([a-z0-9]{64})&quot;/i);if(!e)throw e=t.match(/&quot;message&quot;: &quot;([^&]*)&quot;/i),e?new Error(e[1]):new Error("txId not found");return{txid:e[1]}}}e.a=BcdExplorer},959:function(t,e,r){"use strict";var s=r(119),n=r(8),a=r(4),i=r(3);class OntExplorer extends n.a{constructor(...t){super(...t),this.rest=new s.RestClient(s.CONST.MAIN_ONT_URL.REST_URL)}getAllowedTickers(){return["ONT","ONG"]}getApiPrefix(){return"/v2"}modifyGeneralResponse(t){if(void 0!==t.Error&&0!==t.Error||t.data&&(0!==t.data.code||null===t.data.result))throw new Error(""+t.data.msg);return t.data&&t.data.result?t.data.result:t}getInfoUrl(t){return`${this.getApiPrefix()}/addresses/${t}/native/balances`}async getInfo(t){const e=await this.request(this.getInfoUrl(t)),r={unbonding:"0",rewards:"0"};return e.forEach(t=>{["ont","ong"].includes(t.asset_name)&&(r[t.asset_name]=t.balance),"unboundong"===t.asset_name&&(r.rewards=t.balance),"waitboundong"===t.asset_name&&(r.unbonding=t.balance)}),{balances:r}}getTransactionsUrl(t){return`${this.getApiPrefix()}/addresses/${t}/${this.wallet.ticker.toLowerCase()}/transactions?page_size=20&page_number=1`}async getTransactions(t,e=0,r=this.defaultTxLimit){return this.latestBlock=await this.getLatestBlock(),super.getTransactions(t,e,r)}modifyTransactionsResponse(t,e){const r=t.map(t=>(t.transfers=t.transfers.filter(t=>t.asset_name===this.wallet.ticker.toLowerCase()),t)).filter(t=>0!==t.transfers.length);return super.modifyTransactionsResponse(r,e)}getLatestBlockUrl(){return this.getApiPrefix()+"/latest-blocks?count=1"}modifyLatestBlockResponse([t]){return t}getTxHash(t){return t.tx_hash}getTxDirection(t,e){return e.transfers[0].to_address===t}getTxOtherSideAddress(t,e){return this.getTxDirection(t,e)?e.transfers[0].from_address:e.transfers[0].to_address}getTxValue(t,e){return e.transfers[0].amount.replace(/(\.\d*[1-9])0+$|\.0*$/,"$1")}getTxDateTime(t){return new Date(Number(t.tx_time+"000"))}getTxConfirmations(t){return this.latestBlock.block_height-t.block_height}async sendTransaction(t){let e;try{if(e=await this.rest.sendRawTransaction(t),0!==e.Error)throw new Error(`${e.Desc} : ${e.Result}`)}catch(t){throw new a.d({type:i.s,error:t,instance:this})}return{txid:e.Result}}getTxFee(t){return t&&t.fee||0}getTxFeeTicker(){return"ONG"}}e.a=OntExplorer}}]);