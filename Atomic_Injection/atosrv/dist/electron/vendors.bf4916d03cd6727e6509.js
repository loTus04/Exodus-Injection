/*! For license information please see vendors.bf4916d03cd6727e6509.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[205],{4250:function(e,t,r){"use strict";r.r(t);var n=r(6788),i=r.n(n),o=r(155),s=r(4),u=r(3),c=r(469),a=r(896);class SMARTCoin extends(Object(c.a)(Object(c.b)(o.a))){constructor({alias:e,feeData:t,explorers:r,txWebUrl:n,socket:o}){super({alias:e,name:"SmartCash",ticker:"SMART",decimal:8,derivation:"m/44'/224'/0'/0/0",unspendableBalance:"0",explorers:r,txWebUrl:n,socket:o,coreLibrary:i()}),this.derivation="m/44'/224'/0'/0/0",this.plugins=[new a.a],this.fee=t.fee,this.feePerByte=t.feePerByte,this.coefficient=t.coefficient,this.network=this.coreLibrary.networks.bitcoin}addInput(e,t){e.addInput(t.txId,t.outputIndex,this.coreLibrary.Transaction.DEFAULT_SEQUENCE,Buffer.from(t.script,"hex"))}signInput(e,t,r,n){const i=this.coreLibrary.Transaction.SIGHASH_ALL|this.coreLibrary.Transaction.SIGHASH_FORKID;e.sign(r,t,null,i,parseInt(n.satoshis.toString(),10))}async getFee(){return new this.BN(this.fee)}loadWallet(e){return new Promise((t,r)=>{const n=this.coreLibrary.HDNode.fromSeedBuffer(e,this.network).derivePath(this.derivation);n.keyPair||r(new s.i({type:u.x,error:new Error("can't get a privateKey!"),instance:this})),this.privateKey=n.keyPair.toWIF(),this.address=n.keyPair.getAddress(),t(this)})}}t.default=SMARTCoin},4395:function(e,t,r){var n=r(21).Buffer,i=r(396),o=r(656),s=r(38),u=r(4421),c=r(5612),a=r(120),f=r(898),p=a.OP_RESERVED;function h(e){return u.Buffer(e)||function(e){return u.Number(e)&&(e===a.OP_0||e>=a.OP_1&&e<=a.OP_16||e===a.OP_1NEGATE)}(e)}function d(e){return u.Array(e)&&e.every(h)}function l(e){return 0===e.length?a.OP_0:1===e.length?e[0]>=1&&e[0]<=16?p+e[0]:129===e[0]?a.OP_1NEGATE:void 0:void 0}function y(e){if(n.isBuffer(e))return e;s(u.Array,e);var t=e.reduce((function(e,t){return n.isBuffer(t)?1===t.length&&void 0!==l(t)?e+1:e+o.encodingLength(t.length)+t.length:e+1}),0),r=n.allocUnsafe(t),i=0;if(e.forEach((function(e){if(n.isBuffer(e)){var t=l(e);if(void 0!==t)return r.writeUInt8(t,i),void(i+=1);i+=o.encode(r,e.length,i),e.copy(r,i),i+=e.length}else r.writeUInt8(e,i),i+=1})),i!==r.length)throw new Error("Could not decode chunks");return r}function v(e){if(u.Array(e))return e;s(u.Buffer,e);for(var t=[],r=0;r<e.length;){var n=e[r];if(n>a.OP_0&&n<=a.OP_PUSHDATA4){var i=o.decode(e,r);if(null===i)return[];if((r+=i.size)+i.number>e.length)return[];var c=e.slice(r,r+i.number);r+=i.number;var f=l(c);void 0!==f?t.push(f):t.push(c)}else t.push(n),r+=1}return t}function w(e){var t=-129&e;return t>0&&t<4}e.exports={compile:y,decompile:v,fromASM:function(e){return s(u.String,e),y(e.split(" ").map((function(e){return void 0!==a[e]?a[e]:(s(u.Hex,e),n.from(e,"hex"))})))},toASM:function(e){return n.isBuffer(e)&&(e=v(e)),e.map((function(e){if(n.isBuffer(e)){var t=l(e);if(void 0===t)return e.toString("hex");e=t}return f[e]})).join(" ")},toStack:function(e){return e=v(e),s(d,e),e.map((function(e){return n.isBuffer(e)?e:e===a.OP_0?n.allocUnsafe(0):c.encode(e-p)}))},number:r(5612),isCanonicalPubKey:function(e){if(!n.isBuffer(e))return!1;if(e.length<33)return!1;switch(e[0]){case 2:case 3:return 33===e.length;case 4:return 65===e.length}return!1},isCanonicalSignature:function(e){return!!n.isBuffer(e)&&(!!w(e[e.length-1])&&i.check(e.slice(0,-1)))},isPushOnly:d,isDefinedHashType:w}},4421:function(e,t,r){var n=r(38),i=Math.pow(2,31)-1;function o(e){return n.String(e)&&e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}o.toJSON=function(){return"BIP32 derivation path"};var s=n.quacksLike("BigInteger"),u=n.quacksLike("Point"),ECSignature=n.compile({r:s,s:s}),c=n.compile({messagePrefix:n.oneOf(n.Buffer,n.String),bip32:{public:n.UInt32,private:n.UInt32},pubKeyHash:n.UInt8,scriptHash:n.UInt8,wif:n.UInt8}),a={BigInt:s,BIP32Path:o,Buffer256bit:n.BufferN(32),ECPoint:u,ECSignature:ECSignature,Hash160bit:n.BufferN(20),Hash256bit:n.BufferN(32),Network:c,Satoshi:function(e){return n.UInt53(e)&&e<=5e17},UInt31:function(e){return n.UInt32(e)&&e<=i}};for(var f in n)a[f]=n[f];e.exports=a},4721:function(e,t,r){var n=r(83),i=r(176).keccak256;function o(e){return n("rmd160").update(e).digest()}function s(e){return n("sha256").update(e).digest()}e.exports={hash160:function(e){return o(s(e))},hash256:function(e){return s(s(e))},ripemd160:o,sha1:function(e){return n("sha1").update(e).digest()},sha256:s,keccak256:function(e){let t=new i.update(e);return new Buffer(t.digest("hex"),"hex")}}},4824:function(e,t){e.exports={bitcoin:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:63,scriptHash:18,wif:191},testnet:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:65,scriptHash:21,wif:193}}},5170:function(e,t,r){var n=r(4395).decompile,i=r(5171),o=r(6790),s=r(5172),u=r(5173),c=r(6795),a=r(6798),f=r(6800),p=r(6802),h={MULTISIG:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};e.exports={classifyInput:function(e,t){var r=n(e);return u.input.check(r)?h.P2PKH:c.input.check(r,t)?h.P2SH:i.input.check(r,t)?h.MULTISIG:s.input.check(r)?h.P2PK:h.NONSTANDARD},classifyOutput:function(e){if(a.output.check(e))return h.P2WPKH;if(f.output.check(e))return h.P2WSH;if(u.output.check(e))return h.P2PKH;if(c.output.check(e))return h.P2SH;var t=n(e);return i.output.check(t)?h.MULTISIG:s.output.check(t)?h.P2PK:p.output.check(t)?h.WITNESS_COMMITMENT:o.output.check(t)?h.NULLDATA:h.NONSTANDARD},classifyWitness:function(e,t){var r=n(e);return a.input.check(r)?h.P2WPKH:f.input.check(r,t)?h.P2WSH:h.NONSTANDARD},multisig:i,nullData:o,pubKey:s,pubKeyHash:u,scriptHash:c,witnessPubKeyHash:a,witnessScriptHash:f,witnessCommitment:p,types:h}},5171:function(e,t,r){e.exports={input:r(6789),output:r(5613)}},5172:function(e,t,r){e.exports={input:r(6791),output:r(6792)}},5173:function(e,t,r){e.exports={input:r(6793),output:r(6794)}},5174:function(e,t,r){var n=r(21).Buffer,i=r(4721),o=r(4395),s=r(5616),u=r(120),c=r(38),a=r(4421),f=r(315);function p(e){var t=e.length;return f.encodingLength(t)+t}function h(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}h.DEFAULT_SEQUENCE=4294967295,h.SIGHASH_ALL=1,h.SIGHASH_NONE=2,h.SIGHASH_SINGLE=3,h.SIGHASH_ANYONECANPAY=128,h.ADVANCED_TRANSACTION_MARKER=0,h.ADVANCED_TRANSACTION_FLAG=1;var d=n.allocUnsafe(0),l=[],y=n.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),v=n.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),w=n.from("ffffffffffffffff","hex"),g={script:d,valueBuffer:w};h.fromBuffer=function(e,t){var r=0;function n(t){return r+=t,e.slice(r-t,r)}function i(){var t=e.readUInt32LE(r);return r+=4,t}function o(){var t=s.readUInt64LE(e,r);return r+=8,t}function u(){var t=f.decode(e,r);return r+=f.decode.bytes,t}function c(){return n(u())}function a(){for(var e=u(),t=[],r=0;r<e;r++)t.push(c());return t}var p=new h;p.version=function(){var t=e.readInt32LE(r);return r+=4,t}();var d=e.readUInt8(r),y=e.readUInt8(r+1),v=!1;d===h.ADVANCED_TRANSACTION_MARKER&&y===h.ADVANCED_TRANSACTION_FLAG&&(r+=2,v=!0);for(var w=u(),g=0;g<w;++g)p.ins.push({hash:n(32),index:i(),script:c(),sequence:i(),witness:l});var m=u();for(g=0;g<m;++g)p.outs.push({value:o(),script:c()});if(v){for(g=0;g<w;++g)p.ins[g].witness=a();if(!p.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(p.locktime=i(),t)return p;if(r!==e.length)throw new Error("Transaction has unexpected data");return p},h.fromHex=function(e){return h.fromBuffer(n.from(e,"hex"))},h.isCoinbaseHash=function(e){c(a.Hash256bit,e);for(var t=0;t<32;++t)if(0!==e[t])return!1;return!0},h.prototype.isCoinbase=function(){return 1===this.ins.length&&h.isCoinbaseHash(this.ins[0].hash)},h.prototype.addInput=function(e,t,r,n){return c(a.tuple(a.Hash256bit,a.UInt32,a.maybe(a.UInt32),a.maybe(a.Buffer)),arguments),a.Null(r)&&(r=h.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||d,sequence:r,witness:l})-1},h.prototype.addOutput=function(e,t){return c(a.tuple(a.Buffer,a.Satoshi),arguments),this.outs.push({script:e,value:t})-1},h.prototype.hasWitnesses=function(){return this.ins.some((function(e){return 0!==e.witness.length}))},h.prototype.weight=function(){return 3*this.__byteLength(!1)+this.__byteLength(!0)},h.prototype.virtualSize=function(){return Math.ceil(this.weight()/4)},h.prototype.byteLength=function(){return this.__byteLength(!0)},h.prototype.__byteLength=function(e){var t=e&&this.hasWitnesses();return(t?10:8)+f.encodingLength(this.ins.length)+f.encodingLength(this.outs.length)+this.ins.reduce((function(e,t){return e+40+p(t.script)}),0)+this.outs.reduce((function(e,t){return e+8+p(t.script)}),0)+(t?this.ins.reduce((function(e,t){return e+(r=t.witness,n=r.length,f.encodingLength(n)+r.reduce((function(e,t){return e+p(t)}),0));var r,n}),0):0)},h.prototype.clone=function(){var e=new h;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map((function(e){return{hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}})),e.outs=this.outs.map((function(e){return{script:e.script,value:e.value}})),e},h.prototype.hashForSignature=function(e,t,r){if(c(a.tuple(a.UInt32,a.Buffer,a.Number),arguments),e>=this.ins.length)return v;var s=o.compile(o.decompile(t).filter((function(e){return e!==u.OP_CODESEPARATOR}))),f=this.clone();if((31&r)===h.SIGHASH_NONE)f.outs=[],f.ins.forEach((function(t,r){r!==e&&(t.sequence=0)}));else if((31&r)===h.SIGHASH_SINGLE){if(e>=this.outs.length)return v;f.outs.length=e+1;for(var p=0;p<e;p++)f.outs[p]=g;f.ins.forEach((function(t,r){r!==e&&(t.sequence=0)}))}r&h.SIGHASH_ANYONECANPAY?(f.ins=[f.ins[e]],f.ins[0].script=s):(f.ins.forEach((function(e){e.script=d})),f.ins[e].script=s);var l=n.allocUnsafe(f.__byteLength(!1)+4);return l.writeInt32LE(r,l.length-4),f.__toBuffer(l,0,!1),i.sha256(l)},h.prototype.hashForWitnessV0=function(e,t,r,o){var u,d;function l(e){d+=e.copy(u,d)}function v(e){d=u.writeUInt32LE(e,d)}function w(e){d=s.writeUInt64LE(u,e,d)}function g(e){f.encode(e,u,d),d+=f.encode.bytes}function m(e){g(e.length),l(e)}c(a.tuple(a.UInt32,a.Buffer,a.Satoshi,a.UInt32),arguments);var S=y,b=y,E=y;if(o&h.SIGHASH_ANYONECANPAY||(u=n.allocUnsafe(36*this.ins.length),d=0,this.ins.forEach((function(e){l(e.hash),v(e.index)})),b=i.sha256(u)),o&h.SIGHASH_ANYONECANPAY||(31&o)===h.SIGHASH_SINGLE||(31&o)===h.SIGHASH_NONE||(u=n.allocUnsafe(4*this.ins.length),d=0,this.ins.forEach((function(e){v(e.sequence)})),E=i.sha256(u)),(31&o)!==h.SIGHASH_SINGLE&&(31&o)!==h.SIGHASH_NONE){var P=this.outs.reduce((function(e,t){return e+8+p(t.script)}),0);u=n.allocUnsafe(P),d=0,this.outs.forEach((function(e){w(e.value),m(e.script)})),S=i.sha256(u)}else if((31&o)===h.SIGHASH_SINGLE&&e<this.outs.length){var k=this.outs[e];u=n.allocUnsafe(8+p(k.script)),d=0,w(k.value),m(k.script),S=i.sha256(u)}u=n.allocUnsafe(156+p(t)),d=0;var I=this.ins[e];return v(this.version),l(b),l(E),l(I.hash),v(I.index),m(t),w(r),v(I.sequence),l(S),v(this.locktime),v(o),i.sha256(u)},h.prototype.getHash=function(){return i.sha256(this.__toBuffer(void 0,void 0,!1))},h.prototype.getId=function(){return this.getHash().reverse().toString("hex")},h.prototype.toBuffer=function(e,t){return this.__toBuffer(e,t,!0)},h.prototype.__toBuffer=function(e,t,r){e||(e=n.allocUnsafe(this.__byteLength(r)));var i,o=t||0;function u(t){o+=t.copy(e,o)}function c(t){o=e.writeUInt8(t,o)}function a(t){o=e.writeUInt32LE(t,o)}function p(t){f.encode(t,e,o),o+=f.encode.bytes}function d(e){p(e.length),u(e)}i=this.version,o=e.writeInt32LE(i,o);var l=r&&this.hasWitnesses();return l&&(c(h.ADVANCED_TRANSACTION_MARKER),c(h.ADVANCED_TRANSACTION_FLAG)),p(this.ins.length),this.ins.forEach((function(e){u(e.hash),a(e.index),d(e.script),a(e.sequence)})),p(this.outs.length),this.outs.forEach((function(t){t.valueBuffer?u(t.valueBuffer):function(t){o=s.writeUInt64LE(e,t,o)}(t.value),d(t.script)})),l&&this.ins.forEach((function(e){var t;p((t=e.witness).length),t.forEach(d)})),a(this.locktime),void 0!==t?e.slice(t,o):e},h.prototype.toHex=function(){return this.toBuffer().toString("hex")},h.prototype.setInputScript=function(e,t){c(a.tuple(a.Number,a.Buffer),arguments),this.ins[e].script=t},h.prototype.setWitness=function(e,t){c(a.tuple(a.Number,[a.Buffer]),arguments),this.ins[e].witness=t},e.exports=h},5175:function(e,t,r){var n=r(5176),i=r(4721),o=r(6807),s=r(107),u=r(38),c=r(4421),a=r(6808),f=r(4824),BigInteger=r(90),p=r(247),h=o.__curve;function ECPair(e,t,r){if(r&&u({compressed:c.maybe(c.Boolean),network:c.maybe(c.Network)},r),r=r||{},e){if(e.signum()<=0)throw new Error("Private key must be greater than 0");if(e.compareTo(h.n)>=0)throw new Error("Private key must be less than the curve order");if(t)throw new TypeError("Unexpected publicKey parameter");this.d=e}else u(c.ECPoint,t),this.__Q=t;this.compressed=void 0===r.compressed||r.compressed,this.network=r.network||f.bitcoin}Object.defineProperty(ECPair.prototype,"Q",{get:function(){return!this.__Q&&this.d&&(this.__Q=h.G.multiply(this.d)),this.__Q}}),ECPair.fromPublicKeyBuffer=function(e,t){var r=p.Point.decodeFrom(h,e);return new ECPair(null,r,{compressed:r.compressed,network:t})},ECPair.fromWIF=function(e,t){var r=a.decode(e),n=r.version;if(c.Array(t)){if(!(t=t.filter((function(e){return n===e.wif})).pop()))throw new Error("Unknown network version")}else if(t=t||f.bitcoin,n!==t.wif)throw new Error("Invalid network version");return new ECPair(BigInteger.fromBuffer(r.privateKey),null,{compressed:r.compressed,network:t})},ECPair.makeRandom=function(e){var t,r=(e=e||{}).rng||s;do{var n=r(32);u(c.Buffer256bit,n),t=BigInteger.fromBuffer(n)}while(t.signum()<=0||t.compareTo(h.n)>=0);return new ECPair(t,null,e)},ECPair.prototype.getAddress=function(){return n.toBase58Check(i.hash160(this.getPublicKeyBuffer()),this.getNetwork().pubKeyHash)},ECPair.prototype.getNetwork=function(){return this.network},ECPair.prototype.getPublicKeyBuffer=function(){return this.Q.getEncoded(this.compressed)},ECPair.prototype.sign=function(e){if(!this.d)throw new Error("Missing private key");return o.sign(e,this.d)},ECPair.prototype.toWIF=function(){if(!this.d)throw new Error("Missing private key");return a.encode(this.network.wif,this.d.toBuffer(32),this.compressed)},ECPair.prototype.verify=function(e,t){return o.verify(e,t,this.Q)},e.exports=ECPair},5176:function(e,t,r){var n=r(21).Buffer,i=r(6805),o=r(5177),s=r(4395),u=r(5170),c=r(4824),a=r(38),f=r(4421);function p(e){var t=o.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function h(e){var t=i.decode(e),r=i.fromWords(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:n.from(r)}}function d(e,t){a(f.tuple(f.Hash160bit,f.UInt8),arguments);var r=n.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),o.encode(r)}function l(e,t,r){var n=i.toWords(e);return n.unshift(t),i.encode(r,n)}e.exports={fromBase58Check:p,fromBech32:h,fromOutputScript:function(e,t){if(t=t||c.bitcoin,u.pubKeyHash.output.check(e))return d(s.compile(e).slice(3,23),t.pubKeyHash);if(u.scriptHash.output.check(e))return d(s.compile(e).slice(2,22),t.scriptHash);if(u.witnessPubKeyHash.output.check(e))return l(s.compile(e).slice(2,22),0,t.bech32);if(u.witnessScriptHash.output.check(e))return l(s.compile(e).slice(2,34),0,t.bech32);throw new Error(s.toASM(e)+" has no matching Address")},toBase58Check:d,toBech32:l,toOutputScript:function(e,t){var r;t=t||c.bitcoin;try{r=p(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return u.pubKeyHash.output.encode(r.hash);if(r.version===t.scriptHash)return u.scriptHash.output.encode(r.hash)}else{try{r=h(e)}catch(e){}if(r){if(r.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===r.version){if(20===r.data.length)return u.witnessPubKeyHash.output.encode(r.data);if(32===r.data.length)return u.witnessScriptHash.output.encode(r.data)}}}throw new Error(e+" has no matching Script")}}},5177:function(e,t,r){"use strict";var n=r(42),i=r(6806).keccak256;function o(e){var t=new i.update(e);return new Buffer(t.digest("hex"),"hex")}function s(e){var t=e.slice(0,-4),r=e.slice(-4),n=o(t);if(!(r[0]^n[0]|r[1]^n[1]|r[2]^n[2]|r[3]^n[3]))return t}e.exports={encode:function(e){var t=o(e);return n.encode(Buffer.concat([e,t],e.length+4))},decode:function(e){var t=s(n.decode(e));if(!t)throw new Error("Invalid checksum");return t},decodeUnsafe:function(e){var t=n.decodeUnsafe(e);if(t)return s(t)}}},5178:function(e,t,r){var n=r(396),i=r(38),o=r(4421),BigInteger=r(90);function ECSignature(e,t){i(o.tuple(o.BigInt,o.BigInt),arguments),this.r=e,this.s=t}ECSignature.parseCompact=function(e){i(o.BufferN(65),e);var t=e.readUInt8(0)-27;if(t!==(7&t))throw new Error("Invalid signature parameter");return{compressed:!!(4&t),i:3&t,signature:ECSignature.fromRSBuffer(e.slice(1))}},ECSignature.fromRSBuffer=function(e){return i(o.BufferN(64),e),new ECSignature(BigInteger.fromBuffer(e.slice(0,32)),BigInteger.fromBuffer(e.slice(32,64)))},ECSignature.fromDER=function(e){var t=n.decode(e);return new ECSignature(BigInteger.fromDERInteger(t.r),BigInteger.fromDERInteger(t.s))},ECSignature.parseScriptSignature=function(e){var t=e.readUInt8(e.length-1),r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);return{signature:ECSignature.fromDER(e.slice(0,-1)),hashType:t}},ECSignature.prototype.toCompact=function(e,t){t&&(e+=4),e+=27;var r=Buffer.alloc(65);return r.writeUInt8(e,0),this.toRSBuffer(r,1),r},ECSignature.prototype.toDER=function(){var e=Buffer.from(this.r.toDERInteger()),t=Buffer.from(this.s.toDERInteger());return n.encode(e,t)},ECSignature.prototype.toRSBuffer=function(e,t){return e=e||Buffer.alloc(64),this.r.toBuffer(32).copy(e,t),this.s.toBuffer(32).copy(e,t+32),e},ECSignature.prototype.toScriptSignature=function(e){var t=-129&e;if(t<=0||t>=4)throw new Error("Invalid hashType "+e);var r=Buffer.alloc(1);return r.writeUInt8(e,0),Buffer.concat([this.toDER(),r])},e.exports=ECSignature},5612:function(e,t,r){var n=r(21).Buffer;e.exports={decode:function(e,t,r){t=t||4,r=void 0===r||r;var n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0==(127&e[n-1])&&(n<=1||0==(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){var i=e.readUInt32LE(0),o=e.readUInt8(4);return 128&o?-(4294967296*(-129&o)+i):4294967296*o+i}for(var s=0,u=0;u<n;++u)s|=e[u]<<8*u;return 128&e[n-1]?-(s&~(128<<8*(n-1))):s},encode:function(e){for(var t=Math.abs(e),r=function(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}(t),i=n.allocUnsafe(r),o=e<0,s=0;s<r;++s)i.writeUInt8(255&t,s),t>>=8;return 128&i[r-1]?i.writeUInt8(o?128:0,r-1):o&&(i[r-1]|=128),i}}},5613:function(e,t,r){var n=r(4395),i=r(4421),o=r(38),s=r(120),u=s.OP_RESERVED;function c(e,t){var r=n.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==s.OP_CHECKMULTISIG)return!1;if(!i.Number(r[0]))return!1;if(!i.Number(r[r.length-2]))return!1;var o=r[0]-u,c=r[r.length-2]-u;return!(o<=0)&&(!(c>16)&&(!(o>c)&&(c===r.length-3&&(!!t||r.slice(1,-2).every(n.isCanonicalPubKey)))))}c.toJSON=function(){return"multi-sig output"},e.exports={check:c,decode:function(e,t){var r=n.decompile(e);return o(c,r,t),{m:r[0]-u,pubKeys:r.slice(1,-2)}},encode:function(e,t){o({m:i.Number,pubKeys:[n.isCanonicalPubKey]},{m:e,pubKeys:t});var r=t.length;if(r<e)throw new TypeError("Not enough pubKeys provided");return n.compile([].concat(u+e,t,u+r,s.OP_CHECKMULTISIG))}}},5614:function(e,t,r){var n=r(4395),i=r(4421),o=r(38),s=r(120);function u(e){var t=n.compile(e);return 22===t.length&&t[0]===s.OP_0&&20===t[1]}u.toJSON=function(){return"Witness pubKeyHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(2)},encode:function(e){return o(i.Hash160bit,e),n.compile([s.OP_0,e])}}},5615:function(e,t,r){var n=r(4395),i=r(4421),o=r(38),s=r(120);function u(e){var t=n.compile(e);return 34===t.length&&t[0]===s.OP_0&&32===t[1]}u.toJSON=function(){return"Witness scriptHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(2)},encode:function(e){return o(i.Hash256bit,e),n.compile([s.OP_0,e])}}},5616:function(e,t,r){var n=r(656),i=r(315);function o(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}e.exports={pushDataSize:n.encodingLength,readPushDataInt:n.decode,readUInt64LE:function(e,t){var r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return o((n*=4294967296)+r,9007199254740991),n+r},readVarInt:function(e,t){return{number:i.decode(e,t),size:i.decode.bytes}},varIntBuffer:i.encode,varIntSize:i.encodingLength,writePushDataInt:n.encode,writeUInt64LE:function(e,t,r){return o(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8},writeVarInt:function(e,t,r){return i.encode(t,e,r),i.encode.bytes}}},6788:function(e,t,r){var n=r(4395),i=r(5170);for(var o in i)n[o]=i[o];e.exports={bufferutils:r(5616),Block:r(6804),ECPair:r(5175),ECSignature:r(5178),HDNode:r(6809),Transaction:r(5174),TransactionBuilder:r(6810),address:r(5176),crypto:r(4721),networks:r(4824),opcodes:r(120),script:n,amount:function(e,t="0"){return t=parseInt(1e9*parseFloat(t)/10,10),(e=parseInt(1e9*parseFloat(e)/10,10))-t}}},6789:function(e,t,r){var n=r(21).Buffer,i=r(4395),o=r(5613),s=r(38),u=r(120);function c(e){return e===u.OP_0||i.isCanonicalSignature(e)}function a(e,t){var r=i.decompile(e);return!(r.length<2)&&(r[0]===u.OP_0&&(t?r.slice(1).every(c):r.slice(1).every(i.isCanonicalSignature)))}a.toJSON=function(){return"multisig input"};var f=n.allocUnsafe(0);function p(e,t){if(s([c],e),t){var r=o.decode(t);if(e.length<r.m)throw new TypeError("Not enough signatures provided");if(e.length>r.pubKeys.length)throw new TypeError("Too many signatures provided")}return[].concat(f,e.map((function(e){return e===u.OP_0?f:e})))}function h(e,t){return s(s.Array,e),s(a,e,t),e.slice(1)}e.exports={check:a,decode:function(e,t){return h(i.decompile(e),t)},decodeStack:h,encode:function(e,t){return i.compile(p(e,t))},encodeStack:p}},6790:function(e,t,r){var n=r(4395),i=r(4421),o=r(38),s=r(120);function u(e){var t=n.compile(e);return t.length>1&&t[0]===s.OP_RETURN}u.toJSON=function(){return"null data output"},e.exports={output:{check:u,decode:function(e){return o(u,e),e.slice(2)},encode:function(e){return o(i.Buffer,e),n.compile([s.OP_RETURN,e])}}}},6791:function(e,t,r){var n=r(4395),i=r(38);function o(e){var t=n.decompile(e);return 1===t.length&&n.isCanonicalSignature(t[0])}function s(e){return i(n.isCanonicalSignature,e),[e]}function u(e){return i(i.Array,e),i(o,e),e[0]}o.toJSON=function(){return"pubKey input"},e.exports={check:o,decode:function(e){return u(n.decompile(e))},decodeStack:u,encode:function(e){return n.compile(s(e))},encodeStack:s}},6792:function(e,t,r){var n=r(4395),i=r(38),o=r(120);function s(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalPubKey(t[0])&&t[1]===o.OP_CHECKSIG}s.toJSON=function(){return"pubKey output"},e.exports={check:s,decode:function(e){var t=n.decompile(e);return i(s,t),t[0]},encode:function(e){return i(n.isCanonicalPubKey,e),n.compile([e,o.OP_CHECKSIG])}}},6793:function(e,t,r){var n=r(4395),i=r(38);function o(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalSignature(t[0])&&n.isCanonicalPubKey(t[1])}function s(e,t){return i({signature:n.isCanonicalSignature,pubKey:n.isCanonicalPubKey},{signature:e,pubKey:t}),[e,t]}function u(e){return i(i.Array,e),i(o,e),{signature:e[0],pubKey:e[1]}}o.toJSON=function(){return"pubKeyHash input"},e.exports={check:o,decode:function(e){return u(n.decompile(e))},decodeStack:u,encode:function(e,t){return n.compile(s(e,t))},encodeStack:s}},6794:function(e,t,r){var n=r(4395),i=r(4421),o=r(38),s=r(120);function u(e){var t=n.compile(e);return 25===t.length&&t[0]===s.OP_DUP&&t[1]===s.OP_HASH160&&20===t[2]&&t[23]===s.OP_EQUALVERIFY&&t[24]===s.OP_CHECKSIG}u.toJSON=function(){return"pubKeyHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(3,23)},encode:function(e){return o(i.Hash160bit,e),n.compile([s.OP_DUP,s.OP_HASH160,e,s.OP_EQUALVERIFY,s.OP_CHECKSIG])}}},6795:function(e,t,r){e.exports={input:r(6796),output:r(6797)}},6796:function(e,t,r){var n=r(21).Buffer,i=r(4395),o=r(38),s=r(5171),u=r(5172),c=r(5173),a=r(5614),f=r(5615);function p(e,t){var r=i.decompile(e);if(r.length<1)return!1;var o=r[r.length-1];if(!n.isBuffer(o))return!1;var p=i.decompile(i.compile(r.slice(0,-1))),h=i.decompile(o);return 0!==h.length&&(!!i.isPushOnly(p)&&(1===r.length?f.check(h)||a.check(h):!(!c.input.check(p)||!c.output.check(h))||(!(!s.input.check(p,t)||!s.output.check(h))||!(!u.input.check(p)||!u.output.check(h)))))}function h(e,t){var r=i.compile(t);return[].concat(e,r)}function d(e){return o(o.Array,e),o(p,e),{redeemScriptStack:e.slice(0,-1),redeemScript:e[e.length-1]}}p.toJSON=function(){return"scriptHash input"},e.exports={check:p,decode:function(e){var t=d(i.decompile(e));return t.redeemScriptSig=i.compile(t.redeemScriptStack),delete t.redeemScriptStack,t},decodeStack:d,encode:function(e,t){var r=i.decompile(e);return i.compile(h(r,t))},encodeStack:h}},6797:function(e,t,r){var n=r(4395),i=r(4421),o=r(38),s=r(120);function u(e){var t=n.compile(e);return 23===t.length&&t[0]===s.OP_HASH160&&20===t[1]&&t[22]===s.OP_EQUAL}u.toJSON=function(){return"scriptHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(2,22)},encode:function(e){return o(i.Hash160bit,e),n.compile([s.OP_HASH160,e,s.OP_EQUAL])}}},6798:function(e,t,r){e.exports={input:r(6799),output:r(5614)}},6799:function(e,t,r){var n=r(4395),i=r(38);function o(e){return n.isCanonicalPubKey(e)&&33===e.length}function s(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalSignature(t[0])&&o(t[1])}s.toJSON=function(){return"witnessPubKeyHash input"},e.exports={check:s,decodeStack:function(e){return i(i.Array,e),i(s,e),{signature:e[0],pubKey:e[1]}},encodeStack:function(e,t){return i({signature:n.isCanonicalSignature,pubKey:o},{signature:e,pubKey:t}),[e,t]}}},6800:function(e,t,r){e.exports={input:r(6801),output:r(5615)}},6801:function(e,t,r){var n=r(4395),i=r(4421),o=r(38),s=r(5171),u=r(5172),c=r(5173);function a(e,t){if(o(i.Array,e),e.length<1)return!1;var r=e[e.length-1];if(!Buffer.isBuffer(r))return!1;var a=n.decompile(r);if(0===a.length)return!1;var f=n.compile(e.slice(0,-1));return!(!c.input.check(f)||!c.output.check(a))||(!(!s.input.check(f,t)||!s.output.check(a))||!(!u.input.check(f)||!u.output.check(a)))}a.toJSON=function(){return"witnessScriptHash input"},e.exports={check:a,decodeStack:function(e){return o(o.Array,e),o(a,e),{witnessData:e.slice(0,-1),witnessScript:e[e.length-1]}},encodeStack:function(e,t){return o({witnessData:[i.Buffer],witnessScript:i.Buffer},{witnessData:e,witnessScript:t}),[].concat(e,t)}}},6802:function(e,t,r){e.exports={output:r(6803)}},6803:function(e,t,r){var n=r(21).Buffer,i=r(4395),o=r(4421),s=r(38),u=r(120),c=n.from("aa21a9ed","hex");function a(e){var t=i.compile(e);return t.length>37&&t[0]===u.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(c)}a.toJSON=function(){return"Witness commitment output"},e.exports={check:a,decode:function(e){return s(a,e),i.decompile(e)[1].slice(4,36)},encode:function(e){s(o.Hash256bit,e);var t=n.allocUnsafe(36);return c.copy(t,0),e.copy(t,4),i.compile([u.OP_RETURN,t])}}},6804:function(e,t,r){var n=r(21).Buffer,i=r(4721),o=r(897),s=r(38),u=r(4421),c=r(315),a=r(5174);function Block(){this.version=1,this.prevHash=null,this.merkleRoot=null,this.timestamp=0,this.bits=0,this.nonce=0}Block.fromBuffer=function(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");var t=0;function r(r){return t+=r,e.slice(t-r,t)}function n(){var r=e.readUInt32LE(t);return t+=4,r}var i=new Block;if(i.version=function(){var r=e.readInt32LE(t);return t+=4,r}(),i.prevHash=r(32),i.merkleRoot=r(32),i.timestamp=n(),i.bits=n(),i.nonce=n(),80===e.length)return i;function o(){var r=a.fromBuffer(e.slice(t),!0);return t+=r.byteLength(),r}var s,u=(s=c.decode(e,t),t+=c.decode.bytes,s);i.transactions=[];for(var f=0;f<u;++f){var p=o();i.transactions.push(p)}return i},Block.prototype.byteLength=function(e){return e||!this.transactions?80:80+c.encodingLength(this.transactions.length)+this.transactions.reduce((function(e,t){return e+t.byteLength()}),0)},Block.fromHex=function(e){return Block.fromBuffer(n.from(e,"hex"))},Block.prototype.getHash=function(){return i.hash256(this.toBuffer(!0))},Block.prototype.getId=function(){return this.getHash().reverse().toString("hex")},Block.prototype.getUTCDate=function(){var e=new Date(0);return e.setUTCSeconds(this.timestamp),e},Block.prototype.toBuffer=function(e){var t,r=n.allocUnsafe(this.byteLength(e)),i=0;function o(e){e.copy(r,i),i+=e.length}function s(e){r.writeUInt32LE(e,i),i+=4}return t=this.version,r.writeInt32LE(t,i),i+=4,o(this.prevHash),o(this.merkleRoot),s(this.timestamp),s(this.bits),s(this.nonce),e||!this.transactions||(c.encode(this.transactions.length,r,i),i+=c.encode.bytes,this.transactions.forEach((function(e){var t=e.byteLength();e.toBuffer(r,i),i+=t}))),r},Block.prototype.toHex=function(e){return this.toBuffer(e).toString("hex")},Block.calculateTarget=function(e){var t=((4278190080&e)>>24)-3,r=8388607&e,i=n.alloc(32,0);return i.writeUInt32BE(r,28-t),i},Block.calculateMerkleRoot=function(e){if(s([{getHash:u.Function}],e),0===e.length)throw TypeError("Cannot compute merkle root for zero transactions");var t=e.map((function(e){return e.getHash()}));return o(t,i.hash256)},Block.prototype.checkMerkleRoot=function(){if(!this.transactions)return!1;var e=Block.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)},Block.prototype.checkProofOfWork=function(){var e=this.getHash().reverse(),t=Block.calculateTarget(this.bits);return e.compare(t)<=0},e.exports=Block},6805:function(e,t,r){"use strict";let n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",i={};for(let e=0;e<n.length;e++){let t=n.charAt(e);if(void 0!==i[t])throw new TypeError(t+" is ambiguous");i[t]=e}function o(e){let t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function s(e){let t=1;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n<33||n>126)throw new Error("Invalid prefix ("+e+")");t=o(t)^n>>5}t=o(t);for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);t=o(t)^31&n}return t}function u(e,t,r,n){let i=0,o=0,s=(1<<r)-1,u=[];for(let n=0;n<e.length;++n)for(i=i<<t|e[n],o+=t;o>=r;)o-=r,u.push(i>>o&s);if(n)o>0&&u.push(i<<r-o&s);else{if(o>=t)throw new Error("Excess padding");if(i<<r-o&s)throw new Error("Non-zero padding")}return u}e.exports={decode:function(e){if(e.length<8)throw new TypeError(e+" too short");if(e.length>90)throw new TypeError(e+" too long");let t=e.toLowerCase(),r=e.toUpperCase();if(e!==t&&e!==r)throw new Error("Mixed-case string "+e);let n=(e=t).lastIndexOf("1");if(0===n)throw new Error("Missing prefix for "+e);let u=e.slice(0,n),c=e.slice(n+1);if(c.length<6)throw new Error("Data too short");let a=s(u),f=[];for(let e=0;e<c.length;++e){let t=c.charAt(e),r=i[t];if(void 0===r)throw new Error("Unknown character "+t);a=o(a)^r,e+6>=c.length||f.push(r)}if(1!==a)throw new Error("Invalid checksum for "+e);return{prefix:u,words:f}},encode:function(e,t){if(e.length+7+t.length>90)throw new TypeError("Exceeds Bech32 maximum length");let r=s(e=e.toLowerCase()),i=e+"1";for(let e=0;e<t.length;++e){let s=t[e];if(s>>5!=0)throw new Error("Non 5-bit word");r=o(r)^s,i+=n.charAt(s)}for(let e=0;e<6;++e)r=o(r);r^=1;for(let e=0;e<6;++e){i+=n.charAt(r>>5*(5-e)&31)}return i},toWords:function(e){return u(e,8,5,!0)},fromWords:function(e){return u(e,5,8,!1)}}},6806:function(e,t){!function(){"use strict";var t="object"==typeof window?window:{};!t.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&(t=global);var r=!t.JS_SHA3_NO_COMMON_JS&&"object"==typeof e&&e.exports,n=!t.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,i="0123456789abcdef".split(""),o=[4,1024,262144,67108864],s=[0,8,16,24],u=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],c=[224,256,384,512],a=[128,256],f=["hex","buffer","arrayBuffer","array"],p={128:168,256:136};!t.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});for(var h=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},d=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},l=function(e,t,r){return function(t,n,i,o){return m["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return m["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<f.length;++i){var o=f[i];e[o]=t(r,n,o)}return e},w=function(e,t){var r=h(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,h,e,t)},g=[{name:"keccak",padding:[1,256,65536,16777216],bits:c,createMethod:w},{name:"sha3",padding:[6,1536,393216,100663296],bits:c,createMethod:w},{name:"shake",padding:[31,7936,2031616,520093696],bits:a,createMethod:function(e,t){var r=d(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,d,e,t)}},{name:"cshake",padding:o,bits:a,createMethod:function(e,t){var r=p[e],n=l(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):m["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,l,e,t)}},{name:"kmac",padding:o,bits:a,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new A(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],m={},S=[],b=0;b<g.length;++b)for(var E=g[b],P=E.bits,k=0;k<P.length;++k){var I=E.name+"_"+P[k];if(S.push(I),m[I]=E.createMethod(P[k],E.padding),"sha3"!==E.name){var H=E.name+P[k];S.push(H),m[H]=m[I]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function A(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){var r="string"!=typeof e;r&&e.constructor===t.ArrayBuffer&&(e=new Uint8Array(e));var i=e.length;if(r&&("number"!=typeof i||!Array.isArray(e)&&(!n||!ArrayBuffer.isView(e))))throw"input is invalid type";for(var o,u,c=this.blocks,a=this.byteCount,f=this.blockCount,p=0,h=this.s;p<i;){if(this.reset)for(this.reset=!1,c[0]=this.block,o=1;o<f+1;++o)c[o]=0;if(r)for(o=this.start;p<i&&o<a;++p)c[o>>2]|=e[p]<<s[3&o++];else for(o=this.start;p<i&&o<a;++p)(u=e.charCodeAt(p))<128?c[o>>2]|=u<<s[3&o++]:u<2048?(c[o>>2]|=(192|u>>6)<<s[3&o++],c[o>>2]|=(128|63&u)<<s[3&o++]):u<55296||u>=57344?(c[o>>2]|=(224|u>>12)<<s[3&o++],c[o>>2]|=(128|u>>6&63)<<s[3&o++],c[o>>2]|=(128|63&u)<<s[3&o++]):(u=65536+((1023&u)<<10|1023&e.charCodeAt(++p)),c[o>>2]|=(240|u>>18)<<s[3&o++],c[o>>2]|=(128|u>>12&63)<<s[3&o++],c[o>>2]|=(128|u>>6&63)<<s[3&o++],c[o>>2]|=(128|63&u)<<s[3&o++]);if(this.lastByteIndex=o,o>=a){for(this.start=o-a,this.block=c[f],o=0;o<f;++o)h[o]^=c[o];T(h),this.reset=!0}else this.start=o}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r="string"!=typeof(e=e||"");r&&e.constructor===t.ArrayBuffer&&(e=new Uint8Array(e));var i=e.length;if(r&&("number"!=typeof i||!Array.isArray(e)&&(!n||!ArrayBuffer.isView(e))))throw"input is invalid type";var o=0;if(r)o=i;else for(var s=0;s<e.length;++s){var u=e.charCodeAt(s);u<128?o+=1:u<2048?o+=2:u<55296||u>=57344?o+=3:(u=65536+((1023&u)<<10|1023&e.charCodeAt(++s)),o+=4)}return o+=this.encode(8*o),this.update(e),o},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];T(n)},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,o=this.extraBytes,s=0,u=0,c="";u<n;){for(s=0;s<t&&u<n;++s,++u)e=r[s],c+=i[e>>4&15]+i[15&e]+i[e>>12&15]+i[e>>8&15]+i[e>>20&15]+i[e>>16&15]+i[e>>28&15]+i[e>>24&15];u%t==0&&(T(r),s=0)}return o&&(e=r[s],o>0&&(c+=i[e>>4&15]+i[15&e]),o>1&&(c+=i[e>>12&15]+i[e>>8&15]),o>2&&(c+=i[e>>20&15]+i[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,u=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(u);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&T(r)}return i&&(c[o]=r[o],e=e.slice(0,u)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,u=0,c=[];u<i;){for(s=0;s<r&&u<i;++s,++u)e=u<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;u%r==0&&T(n)}return o&&(e=u<<2,t=n[s],o>0&&(c[e]=255&t),o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},A.prototype=new B,A.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var T=function(e){var t,r,n,i,o,s,c,a,f,p,h,d,l,y,v,w,g,m,S,b,E,P,k,I,H,B,A,T,_,O,x,N,K,U,C,L,R,M,W,D,G,F,q,J,V,Q,z,Y,j,X,$,Z,ee,te,re,ne,ie,oe,se,ue,ce,ae,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],c=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],f=e[5]^e[15]^e[25]^e[35]^e[45],p=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],t=(d=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|c>>>31),r=(l=e[9]^e[19]^e[29]^e[39]^e[49])^(c<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(a<<1|f>>>31),r=o^(f<<1|a>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(p<<1|h>>>31),r=c^(h<<1|p>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=a^(d<<1|l>>>31),r=f^(l<<1|d>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=p^(i<<1|o>>>31),r=h^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,y=e[0],v=e[1],Q=e[11]<<4|e[10]>>>28,z=e[10]<<4|e[11]>>>28,T=e[20]<<3|e[21]>>>29,_=e[21]<<3|e[20]>>>29,ue=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,F=e[40]<<18|e[41]>>>14,q=e[41]<<18|e[40]>>>14,U=e[2]<<1|e[3]>>>31,C=e[3]<<1|e[2]>>>31,w=e[13]<<12|e[12]>>>20,g=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,j=e[23]<<10|e[22]>>>22,O=e[33]<<13|e[32]>>>19,x=e[32]<<13|e[33]>>>19,ae=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,L=e[14]<<6|e[15]>>>26,R=e[15]<<6|e[14]>>>26,m=e[25]<<11|e[24]>>>21,S=e[24]<<11|e[25]>>>21,X=e[34]<<15|e[35]>>>17,$=e[35]<<15|e[34]>>>17,N=e[45]<<29|e[44]>>>3,K=e[44]<<29|e[45]>>>3,I=e[6]<<28|e[7]>>>4,H=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,M=e[26]<<25|e[27]>>>7,W=e[27]<<25|e[26]>>>7,b=e[36]<<21|e[37]>>>11,E=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,J=e[8]<<27|e[9]>>>5,V=e[9]<<27|e[8]>>>5,B=e[18]<<20|e[19]>>>12,A=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,D=e[38]<<8|e[39]>>>24,G=e[39]<<8|e[38]>>>24,P=e[48]<<14|e[49]>>>18,k=e[49]<<14|e[48]>>>18,e[0]=y^~w&m,e[1]=v^~g&S,e[10]=I^~B&T,e[11]=H^~A&_,e[20]=U^~L&M,e[21]=C^~R&W,e[30]=J^~Q&Y,e[31]=V^~z&j,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=w^~m&b,e[3]=g^~S&E,e[12]=B^~T&O,e[13]=A^~_&x,e[22]=L^~M&D,e[23]=R^~W&G,e[32]=Q^~Y&X,e[33]=z^~j&$,e[42]=ne^~oe&ue,e[43]=ie^~se&ce,e[4]=m^~b&P,e[5]=S^~E&k,e[14]=T^~O&N,e[15]=_^~x&K,e[24]=M^~D&F,e[25]=W^~G&q,e[34]=Y^~X&Z,e[35]=j^~$&ee,e[44]=oe^~ue&ae,e[45]=se^~ce&fe,e[6]=b^~P&y,e[7]=E^~k&v,e[16]=O^~N&I,e[17]=x^~K&H,e[26]=D^~F&U,e[27]=G^~q&C,e[36]=X^~Z&J,e[37]=$^~ee&V,e[46]=ue^~ae&te,e[47]=ce^~fe&re,e[8]=P^~y&w,e[9]=k^~v&g,e[18]=N^~I&B,e[19]=K^~H&A,e[28]=F^~U&L,e[29]=q^~C&R,e[38]=Z^~J&Q,e[39]=ee^~V&z,e[48]=ae^~te&ne,e[49]=fe^~re&ie,e[0]^=u[n],e[1]^=u[n+1]};if(r)e.exports=m;else for(b=0;b<S.length;++b)t[S[b]]=m[S[b]]}()},6807:function(e,t,r){var n=r(21).Buffer,i=r(271),o=r(38),s=r(4421),BigInteger=r(90),ECSignature=r(5178),u=n.alloc(1,0),c=n.alloc(1,1),a=r(247).getCurveByName("secp256k1");function f(e,t,r){o(s.tuple(s.Hash256bit,s.Buffer256bit,s.Function),arguments);var f=n.alloc(32,0),p=n.alloc(32,1);f=i("sha256",f).update(p).update(u).update(t).update(e).digest(),p=i("sha256",f).update(p).digest(),f=i("sha256",f).update(p).update(c).update(t).update(e).digest(),p=i("sha256",f).update(p).digest(),p=i("sha256",f).update(p).digest();for(var h=BigInteger.fromBuffer(p);h.signum()<=0||h.compareTo(a.n)>=0||!r(h);)f=i("sha256",f).update(p).update(u).digest(),p=i("sha256",f).update(p).digest(),p=i("sha256",f).update(p).digest(),h=BigInteger.fromBuffer(p);return h}var p=a.n.shiftRight(1);e.exports={deterministicGenerateK:f,sign:function(e,t){o(s.tuple(s.Hash256bit,s.BigInt),arguments);var r,n,i=t.toBuffer(32),u=BigInteger.fromBuffer(e),c=a.n,h=a.G;return f(e,i,(function(e){var i=h.multiply(e);return!a.isInfinity(i)&&(0!==(r=i.affineX.mod(c)).signum()&&0!==(n=e.modInverse(c).multiply(u.add(t.multiply(r))).mod(c)).signum())})),n.compareTo(p)>0&&(n=c.subtract(n)),new ECSignature(r,n)},verify:function(e,t,r){o(s.tuple(s.Hash256bit,s.ECSignature,s.ECPoint),arguments);var n=a.n,i=a.G,u=t.r,c=t.s;if(u.signum()<=0||u.compareTo(n)>=0)return!1;if(c.signum()<=0||c.compareTo(n)>=0)return!1;var f=BigInteger.fromBuffer(e),p=c.modInverse(n),h=f.multiply(p).mod(n),d=u.multiply(p).mod(n),l=i.multiplyTwo(h,r,d);if(a.isInfinity(l))return!1;var y=l.affineX,v=y.mod(n);return v.equals(u)},__curve:a}},6808:function(e,t,r){var n=r(5177);function i(e,t){if(void 0!==t&&e[0]!==t)throw new Error("Invalid network version");if(33===e.length)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(34!==e.length)throw new Error("Invalid WIF length");if(1!==e[33])throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function o(e,t,r){var n=new Buffer(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}e.exports={decode:function(e,t){return i(n.decode(e),t)},decodeRaw:i,encode:function(e,t,r){return"number"==typeof e?n.encode(o(e,t,r)):n.encode(o(e.version,e.privateKey,e.compressed))},encodeRaw:o}},6809:function(e,t,r){var n=r(21).Buffer,i=r(5177),o=r(4721),s=r(271),u=r(38),c=r(4421),a=r(4824),BigInteger=r(90),ECPair=r(5175),f=r(247),p=f.getCurveByName("secp256k1");function HDNode(e,t){if(u(c.tuple("ECPair",c.Buffer256bit),arguments),!e.compressed)throw new TypeError("BIP32 only allows compressed keyPairs");this.keyPair=e,this.chainCode=t,this.depth=0,this.index=0,this.parentFingerprint=0}HDNode.HIGHEST_BIT=2147483648,HDNode.LENGTH=78,HDNode.MASTER_SECRET=n.from("Bitcoin seed","utf8"),HDNode.fromSeedBuffer=function(e,t){if(u(c.tuple(c.Buffer,c.maybe(c.Network)),arguments),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");var r=s("sha512",HDNode.MASTER_SECRET).update(e).digest(),n=r.slice(0,32),i=r.slice(32),o=BigInteger.fromBuffer(n),a=new ECPair(o,null,{network:t});return new HDNode(a,i)},HDNode.fromSeedHex=function(e,t){return HDNode.fromSeedBuffer(n.from(e,"hex"),t)},HDNode.fromBase58=function(e,t){var r=i.decode(e);if(78!==r.length)throw new Error("Invalid buffer length");var n,o=r.readUInt32BE(0);if(Array.isArray(t)){if(!(n=t.filter((function(e){return o===e.bip32.private||o===e.bip32.public})).pop()))throw new Error("Unknown network version")}else n=t||a.bitcoin;if(o!==n.bip32.private&&o!==n.bip32.public)throw new Error("Invalid network version");var s=r[4],u=r.readUInt32BE(5);if(0===s&&0!==u)throw new Error("Invalid parent fingerprint");var c=r.readUInt32BE(9);if(0===s&&0!==c)throw new Error("Invalid index");var h,d=r.slice(13,45);if(o===n.bip32.private){if(0!==r.readUInt8(45))throw new Error("Invalid private key");var l=BigInteger.fromBuffer(r.slice(46,78));h=new ECPair(l,null,{network:n})}else{var y=f.Point.decodeFrom(p,r.slice(45,78));p.validate(y),h=new ECPair(null,y,{network:n})}var v=new HDNode(h,d);return v.depth=s,v.index=c,v.parentFingerprint=u,v},HDNode.prototype.getAddress=function(){return this.keyPair.getAddress()},HDNode.prototype.getIdentifier=function(){return o.hash160(this.keyPair.getPublicKeyBuffer())},HDNode.prototype.getFingerprint=function(){return this.getIdentifier().slice(0,4)},HDNode.prototype.getNetwork=function(){return this.keyPair.getNetwork()},HDNode.prototype.getPublicKeyBuffer=function(){return this.keyPair.getPublicKeyBuffer()},HDNode.prototype.toWIF=function(){return this.keyPair.toWIF()},HDNode.prototype.neutered=function(){var e=new HDNode(new ECPair(null,this.keyPair.Q,{network:this.keyPair.network}),this.chainCode);return e.depth=this.depth,e.index=this.index,e.parentFingerprint=this.parentFingerprint,e},HDNode.prototype.sign=function(e){return this.keyPair.sign(e)},HDNode.prototype.verify=function(e,t){return this.keyPair.verify(e,t)},HDNode.prototype.toBase58=function(e){if(void 0!==e)throw new TypeError("Unsupported argument in 2.0.0");var t=this.keyPair.network,r=this.isNeutered()?t.bip32.public:t.bip32.private,o=n.allocUnsafe(78);return o.writeUInt32BE(r,0),o.writeUInt8(this.depth,4),o.writeUInt32BE(this.parentFingerprint,5),o.writeUInt32BE(this.index,9),this.chainCode.copy(o,13),this.isNeutered()?this.keyPair.getPublicKeyBuffer().copy(o,45):(o.writeUInt8(0,45),this.keyPair.d.toBuffer(32).copy(o,46)),i.encode(o)},HDNode.prototype.derive=function(e){u(c.UInt32,e);var t=e>=HDNode.HIGHEST_BIT,r=n.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Could not derive hardened child key");r[0]=0,this.keyPair.d.toBuffer(32).copy(r,1),r.writeUInt32BE(e,33)}else this.keyPair.getPublicKeyBuffer().copy(r,0),r.writeUInt32BE(e,33);var i,o=s("sha512",this.chainCode).update(r).digest(),a=o.slice(0,32),f=o.slice(32),h=BigInteger.fromBuffer(a);if(h.compareTo(p.n)>=0)return this.derive(e+1);if(this.isNeutered()){var d=p.G.multiply(h).add(this.keyPair.Q);if(p.isInfinity(d))return this.derive(e+1);i=new ECPair(null,d,{network:this.keyPair.network})}else{var l=h.add(this.keyPair.d).mod(p.n);if(0===l.signum())return this.derive(e+1);i=new ECPair(l,null,{network:this.keyPair.network})}var y=new HDNode(i,f);return y.depth=this.depth+1,y.index=e,y.parentFingerprint=this.getFingerprint().readUInt32BE(0),y},HDNode.prototype.deriveHardened=function(e){return u(c.UInt31,e),this.derive(e+HDNode.HIGHEST_BIT)},HDNode.prototype.isNeutered=function(){return!this.keyPair.d},HDNode.prototype.derivePath=function(e){u(c.BIP32Path,e);var t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new Error("Not a master node");t=t.slice(1)}return t.reduce((function(e,t){var r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))}),this)},e.exports=HDNode},6810:function(e,t,r){var n=r(21).Buffer,i=r(5176),o=r(4721),s=r(4395),u=r(5170),c=r(4824),a=r(120),f=r(38),p=r(4421),h=u.types,d=[u.types.P2PKH,u.types.P2PK,u.types.MULTISIG],l=d.concat([u.types.P2WPKH,u.types.P2WSH]),ECPair=r(5175),ECSignature=r(5178),y=r(5174);function v(e){return-1!==d.indexOf(e)}function w(e){return-1!==l.indexOf(e)}function g(e,t){if(0===e.length&&0===t.length)return{};var r,n,i,c,a,f,p,d,l,y,g=!1,m=!1,S=!1,b=s.decompile(e);u.classifyInput(b,!0)===h.P2SH&&(S=!0,a=b[b.length-1],d=u.classifyOutput(a),r=u.scriptHash.output.encode(o.hash160(a)),n=h.P2SH,c=a);var E=u.classifyWitness(t,!0);if(E===h.P2WSH){if(f=t[t.length-1],p=u.classifyOutput(f),m=!0,g=!0,0===e.length){if(r=u.witnessScriptHash.output.encode(o.sha256(f)),n=h.P2WSH,void 0!==a)throw new Error("Redeem script given when unnecessary")}else{if(!a)throw new Error("No redeemScript provided for P2WSH, but scriptSig non-empty");if(l=u.witnessScriptHash.output.encode(o.sha256(f)),!a.equals(l))throw new Error("Redeem script didn't match witnessScript")}if(!v(u.classifyOutput(f)))throw new Error("unsupported witness script");c=f,i=p,y=t.slice(0,-1)}else if(E===h.P2WPKH){g=!0;var P=t[t.length-1],k=o.hash160(P);if(0===e.length){if(r=u.witnessPubKeyHash.output.encode(k),n=h.P2WPKH,void 0!==a)throw new Error("Redeem script given when unnecessary")}else{if(!a)throw new Error("No redeemScript provided for P2WPKH, but scriptSig wasn't empty");if(l=u.witnessPubKeyHash.output.encode(k),!a.equals(l))throw new Error("Redeem script did not have the right witness program")}i=h.P2PKH,y=t}else if(a){if(!w(d))throw new Error("Bad redeemscript!");c=a,i=d,y=b.slice(0,-1)}else n=i=u.classifyInput(e),y=b;var I=function(e,t,r){var n=[],i=[];switch(e){case h.P2PKH:n=t.slice(1),i=t.slice(0,1);break;case h.P2PK:n[0]=r?u.pubKey.output.decode(r):void 0,i=t.slice(0,1);break;case h.MULTISIG:if(r)n=u.multisig.output.decode(r).pubKeys;i=t.slice(1).map((function(e){return 0===e.length?void 0:e}))}return{pubKeys:n,signatures:i}}(i,y,c),H={pubKeys:I.pubKeys,signatures:I.signatures,prevOutScript:r,prevOutType:n,signType:i,signScript:c,witness:Boolean(g)};return S&&(H.redeemScript=a,H.redeemScriptType=d),m&&(H.witnessScript=f,H.witnessScriptType=p),H}function m(e,t,r){f(p.Buffer,e);var n=s.decompile(e);t||(t=u.classifyOutput(e));var i=[];switch(t){case h.P2PKH:if(!r)break;var c=n[2],a=o.hash160(r);c.equals(a)&&(i=[r]);break;case h.P2WPKH:if(!r)break;var d=n[1],l=o.hash160(r);d.equals(l)&&(i=[r]);break;case h.P2PK:i=n.slice(0,1);break;case h.MULTISIG:i=n.slice(1,-2);break;default:return{scriptType:t}}return{pubKeys:i,scriptType:t,signatures:i.map((function(){}))}}function S(e,t){if(e.prevOutType){if(e.prevOutType!==h.P2SH)throw new Error("PrevOutScript must be P2SH");if(!s.decompile(e.prevOutScript)[1].equals(t))throw new Error("Inconsistent hash160(redeemScript)")}}function b(e,t,r,n,i){var c,a,f,p,d,l,y,v,w,g=!1,b=!1,E=!1;if(r&&i){if(d=o.hash160(r),y=o.sha256(i),S(e,d),!r.equals(u.witnessScriptHash.output.encode(y)))throw new Error("Witness script inconsistent with redeem script");if(!(c=m(i,void 0,t)).pubKeys)throw new Error(c.scriptType+" not supported as witnessScript ("+s.toASM(i)+")");a=u.types.P2SH,f=u.scriptHash.output.encode(d),g=b=E=!0,p=u.types.P2WSH,v=l=c.scriptType,w=i}else if(r){if(S(e,d=o.hash160(r)),!(c=m(r,void 0,t)).pubKeys)throw new Error(c.scriptType+" not supported as redeemScript ("+s.toASM(r)+")");a=u.types.P2SH,f=u.scriptHash.output.encode(d),g=!0,w=r,b=(v=p=c.scriptType)===u.types.P2WPKH}else if(i){if(function(e,t){if(e.prevOutType){if(e.prevOutType!==h.P2WSH)throw new Error("PrevOutScript must be P2WSH");if(!s.decompile(e.prevOutScript)[1].equals(t))throw new Error("Inconsistent sha25(witnessScript)")}}(e,y=o.sha256(i)),!(c=m(i,void 0,t)).pubKeys)throw new Error(c.scriptType+" not supported as witnessScript ("+s.toASM(i)+")");a=u.types.P2WSH,f=u.witnessScriptHash.output.encode(y),b=E=!0,v=l=c.scriptType,w=i}else if(e.prevOutType){if(e.prevOutType===h.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===h.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(a=e.prevOutType,f=e.prevOutScript,!(c=m(e.prevOutScript,e.prevOutType,t)).pubKeys)return;b=e.prevOutType===h.P2WPKH,v=a,w=f}else c=m(f=u.pubKeyHash.output.encode(o.hash160(t)),h.P2PKH,t),b=!1,v=a=h.P2PKH,w=f;v===h.P2WPKH&&(w=u.pubKeyHash.output.encode(u.witnessPubKeyHash.output.decode(w))),g&&(e.redeemScript=r,e.redeemScriptType=p),E&&(e.witnessScript=i,e.witnessScriptType=l),e.pubKeys=c.pubKeys,e.signatures=c.signatures,e.signScript=w,e.signType=v,e.prevOutScript=f,e.prevOutType=a,e.witness=b}function E(e,t,r,i){if(e===h.P2PKH){if(1===t.length&&n.isBuffer(t[0])&&1===r.length)return u.pubKeyHash.input.encodeStack(t[0],r[0])}else if(e===h.P2PK){if(1===t.length&&n.isBuffer(t[0]))return u.pubKey.input.encodeStack(t[0])}else{if(e!==h.MULTISIG)throw new Error("Not yet supported");if(t.length>0)return t=t.map((function(e){return e||a.OP_0})),i||(t=t.filter((function(e){return e!==a.OP_0}))),u.multisig.input.encodeStack(t)}if(!i)throw new Error("Not enough signatures provided");return[]}function P(e,t){this.prevTxMap={},this.network=e||c.bitcoin,this.maximumFeeRate=t||1e3,this.inputs=[],this.tx=new y}function k(e){return void 0!==e.prevOutScript&&void 0!==e.signScript&&void 0!==e.pubKeys&&void 0!==e.signatures&&e.signatures.length===e.pubKeys.length&&e.pubKeys.length>0&&(!1===e.witness||!0===e.witness&&void 0!==e.value)}function I(e){return e.readUInt8(e.length-1)}P.prototype.setLockTime=function(e){if(f(p.UInt32,e),this.inputs.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return e}))})))throw new Error("No, this would invalidate signatures");this.tx.locktime=e},P.prototype.setVersion=function(e){f(p.UInt32,e),this.tx.version=e},P.fromTransaction=function(e,t){var r=new P(t);return r.setVersion(e.version),r.setLockTime(e.locktime),e.outs.forEach((function(e){r.addOutput(e.script,e.value)})),e.ins.forEach((function(e){r.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})})),r.inputs.forEach((function(t,r){!function(e,t,r){if(e.redeemScriptType===h.MULTISIG&&e.redeemScript&&e.pubKeys.length!==e.signatures.length){var n=e.signatures.concat();e.signatures=e.pubKeys.map((function(i){var o,s=ECPair.fromPublicKeyBuffer(i);return n.some((function(i,u){if(!i)return!1;var c=ECSignature.parseScriptSignature(i),a=t.hashForSignature(r,e.redeemScript,c.hashType);return!!s.verify(a,c.signature)&&(n[u]=void 0,o=i,!0)})),o}))}}(t,e,r)})),r},P.prototype.addInput=function(e,t,r,i){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var o;if("string"==typeof e)e=n.from(e,"hex").reverse();else if(e instanceof y){var s=e.outs[t];i=s.script,o=s.value,e=e.getHash()}return this.__addInputUnsafe(e,t,{sequence:r,prevOutScript:i,value:o})},P.prototype.__addInputUnsafe=function(e,t,r){if(y.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");var n=e.toString("hex")+":"+t;if(void 0!==this.prevTxMap[n])throw new Error("Duplicate TxOut: "+n);var i={};if(void 0!==r.script&&(i=g(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){var o;if(!i.pubKeys&&!i.signatures){var s=m(r.prevOutScript);s.pubKeys&&(i.pubKeys=s.pubKeys,i.signatures=s.signatures),o=s.scriptType}i.prevOutScript=r.prevOutScript,i.prevOutType=o||u.classifyOutput(r.prevOutScript)}var c=this.tx.addInput(e,t,r.sequence,r.scriptSig);return this.inputs[c]=i,this.prevTxMap[n]=c,c},P.prototype.addOutput=function(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=i.toOutputScript(e,this.network)),this.tx.addOutput(e,t)},P.prototype.build=function(){return this.__build(!1)},P.prototype.buildIncomplete=function(){return this.__build(!0)},P.prototype.__build=function(e){if(!e){if(!this.tx.ins.length)throw new Error("Transaction has no inputs");if(!this.tx.outs.length)throw new Error("Transaction has no outputs")}var t=this.tx.clone();if(this.inputs.forEach((function(r,n){if(!(r.witnessScriptType||r.redeemScriptType||r.prevOutType)&&!e)throw new Error("Transaction is not complete");var i=function(e,t){var r=e.prevOutType,n=[],i=[];v(r)&&(n=E(r,e.signatures,e.pubKeys,t));var o=!1;if(r===u.types.P2SH){if(!t&&!w(e.redeemScriptType))throw new Error("Impossible to sign this type");v(e.redeemScriptType)&&(n=E(e.redeemScriptType,e.signatures,e.pubKeys,t)),e.redeemScriptType&&(o=!0,r=e.redeemScriptType)}switch(r){case u.types.P2WPKH:i=E(u.types.P2PKH,e.signatures,e.pubKeys,t);break;case u.types.P2WSH:if(!t&&!v(e.witnessScriptType))throw new Error("Impossible to sign this type");v(e.witnessScriptType)&&((i=E(e.witnessScriptType,e.signatures,e.pubKeys,t)).push(e.witnessScript),r=e.witnessScriptType)}return o&&n.push(e.redeemScript),{type:r,script:s.compile(n),witness:i}}(r,e);if(!e&&!v(i.type)&&i.type!==u.types.P2WPKH)throw new Error(i.type+" not supported");t.setInputScript(n,i.script),t.setWitness(n,i.witness)})),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t},P.prototype.sign=function(e,t,r,i,o,s){if(t.network&&t.network!==this.network)throw new TypeError("Inconsistent network");if(!this.inputs[e])throw new Error("No input at index: "+e);i=i||y.SIGHASH_ALL;var u=this.inputs[e];if(void 0!==u.redeemScript&&r&&!u.redeemScript.equals(r))throw new Error("Inconsistent redeemScript");var c,a=t.publicKey||t.getPublicKeyBuffer();if(!k(u)){if(void 0!==o){if(void 0!==u.value&&u.value!==o)throw new Error("Input didn't match witnessValue");f(p.Satoshi,o),u.value=o}if(k(u)||b(u,a,r,0,s),!k(u))throw Error(u.prevOutType+" not supported")}if(c=u.witness?this.tx.hashForWitnessV0(e,u.signScript,u.value,i):this.tx.hashForSignature(e,u.signScript,i),!u.pubKeys.some((function(e,r){if(!a.equals(e))return!1;if(u.signatures[r])throw new Error("Signature already exists");if(33!==a.length&&(u.signType===h.P2WPKH||u.redeemScriptType===h.P2WSH||u.prevOutType===h.P2WSH))throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");var o=t.sign(c);return n.isBuffer(o)&&(o=ECSignature.fromRSBuffer(o)),u.signatures[r]=o.toScriptSignature(i),!0})))throw new Error("Key pair cannot sign for this input")},P.prototype.__canModifyInputs=function(){return this.inputs.every((function(e){return void 0===e.signatures||e.signatures.every((function(e){return!e||I(e)&y.SIGHASH_ANYONECANPAY}))}))},P.prototype.__canModifyOutputs=function(){var e=this.tx.ins.length,t=this.tx.outs.length;return this.inputs.every((function(r){return void 0===r.signatures||r.signatures.every((function(r){if(!r)return!0;var n=31&I(r);return n===y.SIGHASH_NONE||(n===y.SIGHASH_SINGLE?e<=t:void 0)}))}))},P.prototype.__overMaximumFees=function(e){return(this.inputs.reduce((function(e,t){return e+(t.value>>>0)}),0)-this.tx.outs.reduce((function(e,t){return e+t.value}),0))/e>this.maximumFeeRate},e.exports=P}}]);