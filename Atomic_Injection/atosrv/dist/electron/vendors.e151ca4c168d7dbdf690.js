(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{4253:function(e,t,r){"use strict";r.r(t);var n=r(7512),i=r.n(n),o=r(1440),s=r.n(o),u=r(155),c=r(469),a=r(896);class BCDCoin extends(Object(c.a)(Object(c.b)(u.a))){constructor({alias:e,feeData:t,explorers:r,txWebUrl:n,socket:o}){super({alias:e,name:"Bitcoin Diamond",ticker:"BCD",decimal:7,derivation:"m/44'/999'/0'/0/0",unspendableBalance:"0",txWebUrl:n,explorers:[],coreLibrary:i(),socket:o}),this.plugins=[new a.a],this.feePerByte=t.feePerByte,this.coefficient=t.coefficient,this.network=this.coreLibrary.networks.bitcoindiamond}loadWallet(e,t){return new Promise((e,r)=>{const n=new s.a(t).toHDPrivateKey(t,this.network).derive(this.derivation);n.privateKey||r(new Error(this.ticker+" can't get a privateKey!!!")),this.privateKey=n.privateKey.toWIF(),this.address=n.privateKey.toAddress().toString(),e(this)})}getAddress(){if(this.privateKey){const e=this.getKeyForSignFromPrivateKey(this.privateKey);return this.coreLibrary.address.toBase58Check(this.coreLibrary.crypto.hash160(e.publicKey),this.network.pubKeyHash)}throw new Error(this.ticker+" privateKey is empty!!!")}async getBalance(){return"0"}async getUnspentOutputs(){return[]}async getInfo(){return"0"}async getTransactions(){return[]}}t.default=BCDCoin},4401:function(e,t,r){var n=r(21).Buffer,i=r(396),o=r(656),s=r(38),u=r(4439),c=r(5862),a=r(120),p=r(898),h=a.OP_RESERVED;function f(e){return u.Buffer(e)||function(e){return u.Number(e)&&(e===a.OP_0||e>=a.OP_1&&e<=a.OP_16||e===a.OP_1NEGATE)}(e)}function l(e){return u.Array(e)&&e.every(f)}function d(e){return 0===e.length?a.OP_0:1===e.length?e[0]>=1&&e[0]<=16?h+e[0]:129===e[0]?a.OP_1NEGATE:void 0:void 0}function y(e){if(n.isBuffer(e))return e;s(u.Array,e);var t=e.reduce((function(e,t){return n.isBuffer(t)?1===t.length&&void 0!==d(t)?e+1:e+o.encodingLength(t.length)+t.length:e+1}),0),r=n.allocUnsafe(t),i=0;if(e.forEach((function(e){if(n.isBuffer(e)){var t=d(e);if(void 0!==t)return r.writeUInt8(t,i),void(i+=1);i+=o.encode(r,e.length,i),e.copy(r,i),i+=e.length}else r.writeUInt8(e,i),i+=1})),i!==r.length)throw new Error("Could not decode chunks");return r}function v(e){if(u.Array(e))return e;s(u.Buffer,e);for(var t=[],r=0;r<e.length;){var n=e[r];if(n>a.OP_0&&n<=a.OP_PUSHDATA4){var i=o.decode(e,r);if(null===i)return null;if((r+=i.size)+i.number>e.length)return null;var c=e.slice(r,r+i.number);r+=i.number;var p=d(c);void 0!==p?t.push(p):t.push(c)}else t.push(n),r+=1}return t}function w(e){var t=-129&e;return t>0&&t<4}e.exports={compile:y,decompile:v,fromASM:function(e){return s(u.String,e),y(e.split(" ").map((function(e){return void 0!==a[e]?a[e]:(s(u.Hex,e),n.from(e,"hex"))})))},toASM:function(e){return n.isBuffer(e)&&(e=v(e)),e.map((function(e){if(n.isBuffer(e)){var t=d(e);if(void 0===t)return e.toString("hex");e=t}return p[e]})).join(" ")},toStack:function(e){return e=v(e),s(l,e),e.map((function(e){return n.isBuffer(e)?e:e===a.OP_0?n.allocUnsafe(0):c.encode(e-h)}))},number:r(5862),signature:r(7513),isCanonicalPubKey:function(e){if(!n.isBuffer(e))return!1;if(e.length<33)return!1;switch(e[0]){case 2:case 3:return 33===e.length;case 4:return 65===e.length}return!1},isCanonicalSignature:function(e){return!!n.isBuffer(e)&&(!!w(e[e.length-1])&&i.check(e.slice(0,-1)))},isPushOnly:l,isDefinedHashType:w}},4439:function(e,t,r){var n=r(38),i=Math.pow(2,31)-1;function o(e){return n.String(e)&&e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}o.toJSON=function(){return"BIP32 derivation path"};var s=n.quacksLike("Point"),u=n.compile({messagePrefix:n.oneOf(n.Buffer,n.String),bip32:{public:n.UInt32,private:n.UInt32},pubKeyHash:n.UInt8,scriptHash:n.UInt8,wif:n.UInt8}),c={BIP32Path:o,Buffer256bit:n.BufferN(32),ECPoint:s,Hash160bit:n.BufferN(20),Hash256bit:n.BufferN(32),Network:u,Satoshi:function(e){return n.UInt53(e)&&e<=21e14},UInt31:function(e){return n.UInt32(e)&&e<=i}};for(var a in n)c[a]=n[a];e.exports=c},4992:function(e,t,r){var n=r(83);function i(e){return n("rmd160").update(e).digest()}function o(e){return n("sha256").update(e).digest()}e.exports={hash160:function(e){return i(o(e))},hash256:function(e){return o(o(e))},ripemd160:i,sha1:function(e){return n("sha1").update(e).digest()},sha256:o}},4993:function(e,t){e.exports={bitcoin:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},testnet:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},litecoin:{messagePrefix:"Litecoin Signed Message:\n",bip32:{public:27108450,private:27106558},pubKeyHash:48,scriptHash:50,wif:176},bitcoindiamond:{messagePrefix:"BitcoinDiamond Signed Message:\n",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128}}},5315:function(e,t,r){var n=r(4401).decompile,i=r(5316),o=r(7515),s=r(5317),u=r(5318),c=r(7520),a=r(7523),p=r(7525),h=r(7527),f={MULTISIG:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};e.exports={classifyInput:function(e,t){var r=n(e);if(!r)throw new TypeError("Invalid script");return u.input.check(r)?f.P2PKH:c.input.check(r,t)?f.P2SH:i.input.check(r,t)?f.MULTISIG:s.input.check(r)?f.P2PK:f.NONSTANDARD},classifyOutput:function(e){if(a.output.check(e))return f.P2WPKH;if(p.output.check(e))return f.P2WSH;if(u.output.check(e))return f.P2PKH;if(c.output.check(e))return f.P2SH;var t=n(e);if(!t)throw new TypeError("Invalid script");return i.output.check(t)?f.MULTISIG:s.output.check(t)?f.P2PK:h.output.check(t)?f.WITNESS_COMMITMENT:o.output.check(t)?f.NULLDATA:f.NONSTANDARD},classifyWitness:function(e,t){var r=n(e);if(!r)throw new TypeError("Invalid script");return a.input.check(r)?f.P2WPKH:p.input.check(r,t)?f.P2WSH:f.NONSTANDARD},multisig:i,nullData:o,pubKey:s,pubKeyHash:u,scriptHash:c,witnessPubKeyHash:a,witnessScriptHash:p,witnessCommitment:h,types:f}},5316:function(e,t,r){e.exports={input:r(7514),output:r(5863)}},5317:function(e,t,r){e.exports={input:r(7516),output:r(7517)}},5318:function(e,t,r){e.exports={input:r(7518),output:r(7519)}},5319:function(e,t,r){var n=r(21).Buffer,i=r(4992),o=r(4401),s=r(7530),u=r(120),c=r(38),a=r(4439),p=r(315);function h(e){var t=e.length;return p.encodingLength(t)+t}function f(){this.version=1,this.persentBlockHash=null,this.locktime=0,this.ins=[],this.outs=[]}f.DEFAULT_SEQUENCE=4294967295,f.SIGHASH_ALL=1,f.SIGHASH_NONE=2,f.SIGHASH_SINGLE=3,f.SIGHASH_ANYONECANPAY=128,f.ADVANCED_TRANSACTION_MARKER=0,f.ADVANCED_TRANSACTION_FLAG=1;var l=n.allocUnsafe(0),d=[],y=n.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),v=n.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),w=n.from("ffffffffffffffff","hex"),g={script:l,valueBuffer:w};f.fromBuffer=function(e,t){var r=0;function n(t){return r+=t,e.slice(r-t,r)}function i(){var t=e.readUInt32LE(r);return r+=4,t}function o(){var t=s.readUInt64LE(e,r);return r+=8,t}function u(){var t=p.decode(e,r);return r+=p.decode.bytes,t}function c(){return n(u())}function a(){for(var e=u(),t=[],r=0;r<e;r++)t.push(c());return t}var h=new f;h.version=function(){var t=e.readInt32LE(r);return r+=4,t}(),12===h.version&&(h.persentBlockHash=n(32));var l=e.readUInt8(r),y=e.readUInt8(r+1),v=!1;l===f.ADVANCED_TRANSACTION_MARKER&&y===f.ADVANCED_TRANSACTION_FLAG&&(r+=2,v=!0);for(var w=u(),g=0;g<w;++g)h.ins.push({hash:n(32),index:i(),script:c(),sequence:i(),witness:d});var S=u();for(g=0;g<S;++g)h.outs.push({value:o(),script:c()});if(v){for(g=0;g<w;++g)h.ins[g].witness=a();if(!h.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(h.locktime=i(),t)return h;if(r!==e.length)throw new Error("Transaction has unexpected data");return h},f.fromHex=function(e){return f.fromBuffer(n.from(e,"hex"))},f.isCoinbaseHash=function(e){c(a.Hash256bit,e);for(var t=0;t<32;++t)if(0!==e[t])return!1;return!0},f.prototype.isCoinbase=function(){return 1===this.ins.length&&f.isCoinbaseHash(this.ins[0].hash)},f.prototype.addInput=function(e,t,r,n){return c(a.tuple(a.Hash256bit,a.UInt32,a.maybe(a.UInt32),a.maybe(a.Buffer)),arguments),a.Null(r)&&(r=f.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||l,sequence:r,witness:d})-1},f.prototype.addOutput=function(e,t){return c(a.tuple(a.Buffer,a.Satoshi),arguments),this.outs.push({script:e,value:t})-1},f.prototype.hasWitnesses=function(){return this.ins.some((function(e){return 0!==e.witness.length}))},f.prototype.weight=function(){return 3*this.__byteLength(!1)+this.__byteLength(!0)},f.prototype.virtualSize=function(){return Math.ceil(this.weight()/4)},f.prototype.byteLength=function(){return this.__byteLength(!0)},f.prototype.__byteLength=function(e){var t=e&&this.hasWitnesses();return(t?10:8)+(12===this.version&&null!=this.persentBlockHash?32:0)+p.encodingLength(this.ins.length)+p.encodingLength(this.outs.length)+this.ins.reduce((function(e,t){return e+40+h(t.script)}),0)+this.outs.reduce((function(e,t){return e+8+h(t.script)}),0)+(t?this.ins.reduce((function(e,t){return e+(r=t.witness,n=r.length,p.encodingLength(n)+r.reduce((function(e,t){return e+h(t)}),0));var r,n}),0):0)},f.prototype.clone=function(){var e=new f;return e.version=this.version,12===this.version&&(e.persentBlockHash=this.persentBlockHash),e.locktime=this.locktime,e.ins=this.ins.map((function(e){return{hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}})),e.outs=this.outs.map((function(e){return{script:e.script,value:e.value}})),e},f.prototype.hashForSignature=function(e,t,r){if(c(a.tuple(a.UInt32,a.Buffer,a.Number),arguments),e>=this.ins.length)return v;var s=o.compile(o.decompile(t).filter((function(e){return e!==u.OP_CODESEPARATOR}))),p=this.clone();if((31&r)===f.SIGHASH_NONE)p.outs=[],p.ins.forEach((function(t,r){r!==e&&(t.sequence=0)}));else if((31&r)===f.SIGHASH_SINGLE){if(e>=this.outs.length)return v;p.outs.length=e+1;for(var h=0;h<e;h++)p.outs[h]=g;p.ins.forEach((function(t,r){r!==e&&(t.sequence=0)}))}r&f.SIGHASH_ANYONECANPAY?(p.ins=[p.ins[e]],p.ins[0].script=s):(p.ins.forEach((function(e){e.script=l})),p.ins[e].script=s);var d=n.allocUnsafe(p.__byteLength(!1)+4);return d.writeInt32LE(r,d.length-4),p.__toBuffer(d,0,!1),i.hash256(d)},f.prototype.hashForWitnessV0=function(e,t,r,o){var u,l;function d(e){l+=e.copy(u,l)}function v(e){l=u.writeUInt32LE(e,l)}function w(e){l=s.writeUInt64LE(u,e,l)}function g(e){p.encode(e,u,l),l+=p.encode.bytes}function S(e){g(e.length),d(e)}c(a.tuple(a.UInt32,a.Buffer,a.Satoshi,a.UInt32),arguments);var m=y,b=y,_=y;if(o&f.SIGHASH_ANYONECANPAY||(u=n.allocUnsafe(36*this.ins.length),l=0,this.ins.forEach((function(e){d(e.hash),v(e.index)})),b=i.hash256(u)),o&f.SIGHASH_ANYONECANPAY||(31&o)===f.SIGHASH_SINGLE||(31&o)===f.SIGHASH_NONE||(u=n.allocUnsafe(4*this.ins.length),l=0,this.ins.forEach((function(e){v(e.sequence)})),_=i.hash256(u)),(31&o)!==f.SIGHASH_SINGLE&&(31&o)!==f.SIGHASH_NONE){var P=this.outs.reduce((function(e,t){return e+8+h(t.script)}),0);u=n.allocUnsafe(P),l=0,this.outs.forEach((function(e){w(e.value),S(e.script)})),m=i.hash256(u)}else if((31&o)===f.SIGHASH_SINGLE&&e<this.outs.length){var H=this.outs[e];u=n.allocUnsafe(8+h(H.script)),l=0,w(H.value),S(H.script),m=i.hash256(u)}u=n.allocUnsafe(156+h(t)),l=0;var E=this.ins[e];return v(this.version),12===this.version&&d(this.persentBlockHash),d(b),d(_),d(E.hash),v(E.index),S(t),w(r),v(E.sequence),d(m),v(this.locktime),v(o),i.hash256(u)},f.prototype.getHash=function(){return i.hash256(this.__toBuffer(void 0,void 0,!1))},f.prototype.getId=function(){return this.getHash().reverse().toString("hex")},f.prototype.toBuffer=function(e,t){return this.__toBuffer(e,t,!0)},f.prototype.__toBuffer=function(e,t,r){e||(e=n.allocUnsafe(this.__byteLength(r)));var i,o=t||0;function u(t){o+=t.copy(e,o)}function c(t){o=e.writeUInt8(t,o)}function a(t){o=e.writeUInt32LE(t,o)}function h(t){p.encode(t,e,o),o+=p.encode.bytes}function l(e){h(e.length),u(e)}i=this.version,o=e.writeInt32LE(i,o),12===this.version&&null!=this.persentBlockHash&&u(this.persentBlockHash);var d=r&&this.hasWitnesses();return d&&(c(f.ADVANCED_TRANSACTION_MARKER),c(f.ADVANCED_TRANSACTION_FLAG)),h(this.ins.length),this.ins.forEach((function(e){u(e.hash),a(e.index),l(e.script),a(e.sequence)})),h(this.outs.length),this.outs.forEach((function(t){t.valueBuffer?u(t.valueBuffer):function(t){o=s.writeUInt64LE(e,t,o)}(t.value),l(t.script)})),d&&this.ins.forEach((function(e){var t;h((t=e.witness).length),t.forEach(l)})),a(this.locktime),void 0!==t?e.slice(t,o):e},f.prototype.toHex=function(){return this.toBuffer().toString("hex")},f.prototype.setInputScript=function(e,t){c(a.tuple(a.Number,a.Buffer),arguments),this.ins[e].script=t},f.prototype.setWitness=function(e,t){c(a.tuple(a.Number,[a.Buffer]),arguments),this.ins[e].witness=t},e.exports=f},5862:function(e,t,r){var n=r(21).Buffer;e.exports={decode:function(e,t,r){t=t||4,r=void 0===r||r;var n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0==(127&e[n-1])&&(n<=1||0==(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){var i=e.readUInt32LE(0),o=e.readUInt8(4);return 128&o?-(4294967296*(-129&o)+i):4294967296*o+i}for(var s=0,u=0;u<n;++u)s|=e[u]<<8*u;return 128&e[n-1]?-(s&~(128<<8*(n-1))):s},encode:function(e){for(var t=Math.abs(e),r=function(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}(t),i=n.allocUnsafe(r),o=e<0,s=0;s<r;++s)i.writeUInt8(255&t,s),t>>=8;return 128&i[r-1]?i.writeUInt8(o?128:0,r-1):o&&(i[r-1]|=128),i}}},5863:function(e,t,r){var n=r(4401),i=r(4439),o=r(38),s=r(120),u=s.OP_RESERVED;function c(e,t){var r=n.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==s.OP_CHECKMULTISIG)return!1;if(!i.Number(r[0]))return!1;if(!i.Number(r[r.length-2]))return!1;var o=r[0]-u,c=r[r.length-2]-u;return!(o<=0)&&(!(c>16)&&(!(o>c)&&(c===r.length-3&&(!!t||r.slice(1,-2).every(n.isCanonicalPubKey)))))}c.toJSON=function(){return"multi-sig output"},e.exports={check:c,decode:function(e,t){var r=n.decompile(e);return o(c,r,t),{m:r[0]-u,pubKeys:r.slice(1,-2)}},encode:function(e,t){o({m:i.Number,pubKeys:[n.isCanonicalPubKey]},{m:e,pubKeys:t});var r=t.length;if(r<e)throw new TypeError("Not enough pubKeys provided");return n.compile([].concat(u+e,t,u+r,s.OP_CHECKMULTISIG))}}},5864:function(e,t,r){var n=r(4401),i=r(4439),o=r(38),s=r(120);function u(e){var t=n.compile(e);return 22===t.length&&t[0]===s.OP_0&&20===t[1]}u.toJSON=function(){return"Witness pubKeyHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(2)},encode:function(e){return o(i.Hash160bit,e),n.compile([s.OP_0,e])}}},5865:function(e,t,r){var n=r(4401),i=r(4439),o=r(38),s=r(120);function u(e){var t=n.compile(e);return 34===t.length&&t[0]===s.OP_0&&32===t[1]}u.toJSON=function(){return"Witness scriptHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(2)},encode:function(e){return o(i.Hash256bit,e),n.compile([s.OP_0,e])}}},5866:function(e,t,r){let n=r(223),i=r(107),o=r(38),s=r(4439),u=r(186),c=r(4993);function a(e){return n.isPoint(e)}let p=o.maybe(o.compile({compressed:s.maybe(s.Boolean),network:s.maybe(s.Network)}));function ECPair(e,t,r){r=r||{},this.compressed=void 0===r.compressed||r.compressed,this.network=r.network||c.bitcoin,this.__d=e||null,this.__Q=null,t&&(this.__Q=n.pointCompress(t,this.compressed))}function h(e,t){if(o(s.Buffer256bit,e),!n.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return o(p,t),new ECPair(e,null,t)}Object.defineProperty(ECPair.prototype,"privateKey",{enumerable:!1,get:function(){return this.__d}}),Object.defineProperty(ECPair.prototype,"publicKey",{get:function(){return this.__Q||(this.__Q=n.pointFromScalar(this.__d,this.compressed)),this.__Q}}),ECPair.prototype.toWIF=function(){if(!this.__d)throw new Error("Missing private key");return u.encode(this.network.wif,this.__d,this.compressed)},ECPair.prototype.sign=function(e){if(!this.__d)throw new Error("Missing private key");return n.sign(e,this.__d)},ECPair.prototype.verify=function(e,t){return n.verify(e,this.publicKey,t)},e.exports={makeRandom:function(e){o(p,e);let t,r=(e=e||{}).rng||i;do{t=r(32),o(s.Buffer256bit,t)}while(!n.isPrivate(t));return h(t,e)},fromPrivateKey:h,fromPublicKey:function(e,t){return o(a,e),o(p,t),new ECPair(null,e,t)},fromWIF:function(e,t){let r=u.decode(e),n=r.version;if(s.Array(t)){if(!(t=t.filter((function(e){return n===e.wif})).pop()))throw new Error("Unknown network version")}else if(t=t||c.bitcoin,n!==t.wif)throw new Error("Invalid network version");return h(r.privateKey,{compressed:r.compressed,network:t})}}},5867:function(e,t,r){var n=r(21).Buffer,i=r(118),o=r(74),s=r(4401),u=r(5315),c=r(4993),a=r(38),p=r(4439);function h(e){var t=o.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function f(e){var t=i.decode(e),r=i.fromWords(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:n.from(r)}}function l(e,t){a(p.tuple(p.Hash160bit,p.UInt8),arguments);var r=n.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),o.encode(r)}function d(e,t,r){var n=i.toWords(e);return n.unshift(t),i.encode(r,n)}e.exports={fromBase58Check:h,fromBech32:f,fromOutputScript:function(e,t){if(t=t||c.bitcoin,u.pubKeyHash.output.check(e))return l(s.compile(e).slice(3,23),t.pubKeyHash);if(u.scriptHash.output.check(e))return l(s.compile(e).slice(2,22),t.scriptHash);if(u.witnessPubKeyHash.output.check(e))return d(s.compile(e).slice(2,22),0,t.bech32);if(u.witnessScriptHash.output.check(e))return d(s.compile(e).slice(2,34),0,t.bech32);throw new Error(s.toASM(e)+" has no matching Address")},toBase58Check:l,toBech32:d,toOutputScript:function(e,t){var r;t=t||c.bitcoin;try{r=h(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return u.pubKeyHash.output.encode(r.hash);if(r.version===t.scriptHash)return u.scriptHash.output.encode(r.hash)}else{try{r=f(e)}catch(e){}if(r){if(r.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===r.version){if(20===r.data.length)return u.witnessPubKeyHash.output.encode(r.data);if(32===r.data.length)return u.witnessScriptHash.output.encode(r.data)}}}throw new Error(e+" has no matching Script")}}},7512:function(e,t,r){let n=r(4401),i=r(5315);for(let e in i)n[e]=i[e];e.exports={Block:r(7529),ECPair:r(5866),Transaction:r(5319),TransactionBuilder:r(7531),address:r(5867),bip32:r(7532),crypto:r(4992),networks:r(4993),opcodes:r(120),script:n}},7513:function(e,t,r){let n=r(396),i=r(21).Buffer,o=r(38),s=r(4439),u=i.alloc(1,0);function c(e){let t=0;for(;0===e[t];)++t;return t===e.length?u:128&(e=e.slice(t))[0]?i.concat([u,e],1+e.length):e}function a(e){0===e[0]&&(e=e.slice(1));let t=i.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}e.exports={decode:function(e){let t=e.readUInt8(e.length-1),r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let o=n.decode(e.slice(0,-1)),s=a(o.r),u=a(o.s);return{signature:i.concat([s,u],64),hashType:t}},encode:function(e,t){o({signature:s.BufferN(64),hashType:s.UInt8},{signature:e,hashType:t});let r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let u=i.allocUnsafe(1);u.writeUInt8(t,0);let a=c(e.slice(0,32)),p=c(e.slice(32,64));return i.concat([n.encode(a,p),u])}}},7514:function(e,t,r){var n=r(21).Buffer,i=r(4401),o=r(5863),s=r(38),u=r(120);function c(e){return e===u.OP_0||i.isCanonicalSignature(e)}function a(e,t){var r=i.decompile(e);return!(r.length<2)&&(r[0]===u.OP_0&&(t?r.slice(1).every(c):r.slice(1).every(i.isCanonicalSignature)))}a.toJSON=function(){return"multisig input"};var p=n.allocUnsafe(0);function h(e,t){if(s([c],e),t){var r=o.decode(t);if(e.length<r.m)throw new TypeError("Not enough signatures provided");if(e.length>r.pubKeys.length)throw new TypeError("Too many signatures provided")}return[].concat(p,e.map((function(e){return e===u.OP_0?p:e})))}function f(e,t){return s(s.Array,e),s(a,e,t),e.slice(1)}e.exports={check:a,decode:function(e,t){return f(i.decompile(e),t)},decodeStack:f,encode:function(e,t){return i.compile(h(e,t))},encodeStack:h}},7515:function(e,t,r){var n=r(4401),i=r(4439),o=r(38),s=r(120);function u(e){var t=n.compile(e);return t.length>1&&t[0]===s.OP_RETURN}u.toJSON=function(){return"null data output"},e.exports={output:{check:u,decode:function(e){return o(u,e),n.decompile(e).slice(1)},encode:function(e){return o([i.Buffer],e),n.compile([s.OP_RETURN].concat(e))}}}},7516:function(e,t,r){var n=r(4401),i=r(38);function o(e){var t=n.decompile(e);return 1===t.length&&n.isCanonicalSignature(t[0])}function s(e){return i(n.isCanonicalSignature,e),[e]}function u(e){return i(i.Array,e),i(o,e),e[0]}o.toJSON=function(){return"pubKey input"},e.exports={check:o,decode:function(e){return u(n.decompile(e))},decodeStack:u,encode:function(e){return n.compile(s(e))},encodeStack:s}},7517:function(e,t,r){var n=r(4401),i=r(38),o=r(120);function s(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalPubKey(t[0])&&t[1]===o.OP_CHECKSIG}s.toJSON=function(){return"pubKey output"},e.exports={check:s,decode:function(e){var t=n.decompile(e);return i(s,t),t[0]},encode:function(e){return i(n.isCanonicalPubKey,e),n.compile([e,o.OP_CHECKSIG])}}},7518:function(e,t,r){var n=r(4401),i=r(38);function o(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalSignature(t[0])&&n.isCanonicalPubKey(t[1])}function s(e,t){return i({signature:n.isCanonicalSignature,pubKey:n.isCanonicalPubKey},{signature:e,pubKey:t}),[e,t]}function u(e){return i(i.Array,e),i(o,e),{signature:e[0],pubKey:e[1]}}o.toJSON=function(){return"pubKeyHash input"},e.exports={check:o,decode:function(e){return u(n.decompile(e))},decodeStack:u,encode:function(e,t){return n.compile(s(e,t))},encodeStack:s}},7519:function(e,t,r){var n=r(4401),i=r(4439),o=r(38),s=r(120);function u(e){var t=n.compile(e);return 25===t.length&&t[0]===s.OP_DUP&&t[1]===s.OP_HASH160&&20===t[2]&&t[23]===s.OP_EQUALVERIFY&&t[24]===s.OP_CHECKSIG}u.toJSON=function(){return"pubKeyHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(3,23)},encode:function(e){return o(i.Hash160bit,e),n.compile([s.OP_DUP,s.OP_HASH160,e,s.OP_EQUALVERIFY,s.OP_CHECKSIG])}}},7520:function(e,t,r){e.exports={input:r(7521),output:r(7522)}},7521:function(e,t,r){var n=r(21).Buffer,i=r(4401),o=r(38),s=r(5316),u=r(5317),c=r(5318),a=r(5864),p=r(5865);function h(e,t){var r=i.decompile(e);if(r.length<1)return!1;var o=r[r.length-1];if(!n.isBuffer(o))return!1;var h=i.decompile(i.compile(r.slice(0,-1))),f=i.decompile(o);return!!f&&(!!i.isPushOnly(h)&&(1===r.length?p.check(f)||a.check(f):!(!c.input.check(h)||!c.output.check(f))||(!(!s.input.check(h,t)||!s.output.check(f))||!(!u.input.check(h)||!u.output.check(f)))))}function f(e,t){var r=i.compile(t);return[].concat(e,r)}function l(e){return o(o.Array,e),o(h,e),{redeemScriptStack:e.slice(0,-1),redeemScript:e[e.length-1]}}h.toJSON=function(){return"scriptHash input"},e.exports={check:h,decode:function(e){var t=l(i.decompile(e));return t.redeemScriptSig=i.compile(t.redeemScriptStack),delete t.redeemScriptStack,t},decodeStack:l,encode:function(e,t){var r=i.decompile(e);return i.compile(f(r,t))},encodeStack:f}},7522:function(e,t,r){var n=r(4401),i=r(4439),o=r(38),s=r(120);function u(e){var t=n.compile(e);return 23===t.length&&t[0]===s.OP_HASH160&&20===t[1]&&t[22]===s.OP_EQUAL}u.toJSON=function(){return"scriptHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(2,22)},encode:function(e){return o(i.Hash160bit,e),n.compile([s.OP_HASH160,e,s.OP_EQUAL])}}},7523:function(e,t,r){e.exports={input:r(7524),output:r(5864)}},7524:function(e,t,r){var n=r(4401),i=r(38);function o(e){return n.isCanonicalPubKey(e)&&33===e.length}function s(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalSignature(t[0])&&o(t[1])}s.toJSON=function(){return"witnessPubKeyHash input"},e.exports={check:s,decodeStack:function(e){return i(i.Array,e),i(s,e),{signature:e[0],pubKey:e[1]}},encodeStack:function(e,t){return i({signature:n.isCanonicalSignature,pubKey:o},{signature:e,pubKey:t}),[e,t]}}},7525:function(e,t,r){e.exports={input:r(7526),output:r(5865)}},7526:function(e,t,r){var n=r(4401),i=r(4439),o=r(38),s=r(5316),u=r(5317),c=r(5318);function a(e,t){if(o(i.Array,e),e.length<1)return!1;var r=e[e.length-1];if(!Buffer.isBuffer(r))return!1;var a=n.decompile(r);if(0===a.length)return!1;var p=n.compile(e.slice(0,-1));return!(!c.input.check(p)||!c.output.check(a))||(!(!s.input.check(p,t)||!s.output.check(a))||!(!u.input.check(p)||!u.output.check(a)))}a.toJSON=function(){return"witnessScriptHash input"},e.exports={check:a,decodeStack:function(e){return o(o.Array,e),o(a,e),{witnessData:e.slice(0,-1),witnessScript:e[e.length-1]}},encodeStack:function(e,t){return o({witnessData:[i.Buffer],witnessScript:i.Buffer},{witnessData:e,witnessScript:t}),[].concat(e,t)}}},7527:function(e,t,r){e.exports={output:r(7528)}},7528:function(e,t,r){var n=r(21).Buffer,i=r(4401),o=r(4439),s=r(38),u=r(120),c=n.from("aa21a9ed","hex");function a(e){var t=i.compile(e);return t.length>37&&t[0]===u.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(c)}a.toJSON=function(){return"Witness commitment output"},e.exports={check:a,decode:function(e){return s(a,e),i.decompile(e)[1].slice(4,36)},encode:function(e){s(o.Hash256bit,e);var t=n.allocUnsafe(36);return c.copy(t,0),e.copy(t,4),i.compile([u.OP_RETURN,t])}}},7529:function(e,t,r){var n=r(21).Buffer,i=r(4992),o=r(897),s=r(38),u=r(4439),c=r(315),a=r(5319);function Block(){this.version=1,this.prevHash=null,this.merkleRoot=null,this.timestamp=0,this.bits=0,this.nonce=0}Block.fromBuffer=function(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");var t=0;function r(r){return t+=r,e.slice(t-r,t)}function n(){var r=e.readUInt32LE(t);return t+=4,r}var i=new Block;if(i.version=function(){var r=e.readInt32LE(t);return t+=4,r}(),i.prevHash=r(32),i.merkleRoot=r(32),i.timestamp=n(),i.bits=n(),i.nonce=n(),80===e.length)return i;function o(){var r=a.fromBuffer(e.slice(t),!0);return t+=r.byteLength(),r}var s,u=(s=c.decode(e,t),t+=c.decode.bytes,s);i.transactions=[];for(var p=0;p<u;++p){var h=o();i.transactions.push(h)}return i},Block.prototype.byteLength=function(e){return e||!this.transactions?80:80+c.encodingLength(this.transactions.length)+this.transactions.reduce((function(e,t){return e+t.byteLength()}),0)},Block.fromHex=function(e){return Block.fromBuffer(n.from(e,"hex"))},Block.prototype.getHash=function(){return i.hash256(this.toBuffer(!0))},Block.prototype.getId=function(){return this.getHash().reverse().toString("hex")},Block.prototype.getUTCDate=function(){var e=new Date(0);return e.setUTCSeconds(this.timestamp),e},Block.prototype.toBuffer=function(e){var t,r=n.allocUnsafe(this.byteLength(e)),i=0;function o(e){e.copy(r,i),i+=e.length}function s(e){r.writeUInt32LE(e,i),i+=4}return t=this.version,r.writeInt32LE(t,i),i+=4,o(this.prevHash),o(this.merkleRoot),s(this.timestamp),s(this.bits),s(this.nonce),e||!this.transactions||(c.encode(this.transactions.length,r,i),i+=c.encode.bytes,this.transactions.forEach((function(e){var t=e.byteLength();e.toBuffer(r,i),i+=t}))),r},Block.prototype.toHex=function(e){return this.toBuffer(e).toString("hex")},Block.calculateTarget=function(e){var t=((4278190080&e)>>24)-3,r=8388607&e,i=n.alloc(32,0);return i.writeUInt32BE(r,28-t),i},Block.calculateMerkleRoot=function(e){if(s([{getHash:u.Function}],e),0===e.length)throw TypeError("Cannot compute merkle root for zero transactions");var t=e.map((function(e){return e.getHash()}));return o(t,i.hash256)},Block.prototype.checkMerkleRoot=function(){if(!this.transactions)return!1;var e=Block.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)},Block.prototype.checkProofOfWork=function(){var e=this.getHash().reverse(),t=Block.calculateTarget(this.bits);return e.compare(t)<=0},e.exports=Block},7530:function(e,t){function r(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}e.exports={readUInt64LE:function(e,t){var n=e.readUInt32LE(t),i=e.readUInt32LE(t+4);return r((i*=4294967296)+n,9007199254740991),i+n},writeUInt64LE:function(e,t,n){return r(t,9007199254740991),e.writeInt32LE(-1&t,n),e.writeUInt32LE(Math.floor(t/4294967296),n+4),n+8}}},7531:function(e,t,r){var n=r(21).Buffer,i=r(5867),o=r(4992),s=r(4401),u=r(5315),c=r(4993),a=r(120),p=r(38),h=r(4439),f=u.types,l=[u.types.P2PKH,u.types.P2PK,u.types.MULTISIG],d=l.concat([u.types.P2WPKH,u.types.P2WSH]),ECPair=r(5866),y=r(5319);function v(e){return-1!==l.indexOf(e)}function w(e){return-1!==d.indexOf(e)}function g(e,t){if(0===e.length&&0===t.length)return{};var r,n,i,c,a,p,h,l,d,y,g=!1,S=!1,m=!1,b=s.decompile(e)||[];u.classifyInput(b,!0)===f.P2SH&&(m=!0,a=b[b.length-1],l=u.classifyOutput(a),r=u.scriptHash.output.encode(o.hash160(a)),n=f.P2SH,c=a);var _=u.classifyWitness(t,!0);if(_===f.P2WSH){if(p=t[t.length-1],h=u.classifyOutput(p),S=!0,g=!0,0===e.length){if(r=u.witnessScriptHash.output.encode(o.sha256(p)),n=f.P2WSH,void 0!==a)throw new Error("Redeem script given when unnecessary")}else{if(!a)throw new Error("No redeemScript provided for P2WSH, but scriptSig non-empty");if(d=u.witnessScriptHash.output.encode(o.sha256(p)),!a.equals(d))throw new Error("Redeem script didn't match witnessScript")}if(!v(u.classifyOutput(p)))throw new Error("unsupported witness script");c=p,i=h,y=t.slice(0,-1)}else if(_===f.P2WPKH){g=!0;var P=t[t.length-1],H=o.hash160(P);if(0===e.length){if(r=u.witnessPubKeyHash.output.encode(H),n=f.P2WPKH,void 0!==a)throw new Error("Redeem script given when unnecessary")}else{if(!a)throw new Error("No redeemScript provided for P2WPKH, but scriptSig wasn't empty");if(d=u.witnessPubKeyHash.output.encode(H),!a.equals(d))throw new Error("Redeem script did not have the right witness program")}i=f.P2PKH,y=t}else if(a){if(!w(l))throw new Error("Bad redeemscript!");c=a,i=l,y=b.slice(0,-1)}else n=i=u.classifyInput(e),y=b;var E=function(e,t,r){var n=[],i=[];switch(e){case f.P2PKH:n=t.slice(1),i=t.slice(0,1);break;case f.P2PK:n[0]=r?u.pubKey.output.decode(r):void 0,i=t.slice(0,1);break;case f.MULTISIG:if(r)n=u.multisig.output.decode(r).pubKeys;i=t.slice(1).map((function(e){return 0===e.length?void 0:e}))}return{pubKeys:n,signatures:i}}(i,y,c),I={pubKeys:E.pubKeys,signatures:E.signatures,prevOutScript:r,prevOutType:n,signType:i,signScript:c,witness:Boolean(g)};return m&&(I.redeemScript=a,I.redeemScriptType=l),S&&(I.witnessScript=p,I.witnessScriptType=h),I}function S(e,t,r){p(h.Buffer,e);var n=s.decompile(e)||[];t||(t=u.classifyOutput(e));var i=[];switch(t){case f.P2PKH:if(!r)break;var c=n[2],a=o.hash160(r);c.equals(a)&&(i=[r]);break;case f.P2WPKH:if(!r)break;var l=n[1],d=o.hash160(r);l.equals(d)&&(i=[r]);break;case f.P2PK:i=n.slice(0,1);break;case f.MULTISIG:i=n.slice(1,-2);break;default:return{scriptType:t}}return{pubKeys:i,scriptType:t,signatures:i.map((function(){}))}}function m(e,t){if(e.prevOutType){if(e.prevOutType!==f.P2SH)throw new Error("PrevOutScript must be P2SH");var r=s.decompile(e.prevOutScript);if(!r)throw new Error("Invalid prevOutScript");if(!r[1].equals(t))throw new Error("Inconsistent hash160(redeemScript)")}}function b(e,t,r,n,i){var c,a,p,h,l,d,y,v,w,g=!1,b=!1,_=!1;if(r&&i){if(l=o.hash160(r),y=o.sha256(i),m(e,l),!r.equals(u.witnessScriptHash.output.encode(y)))throw new Error("Witness script inconsistent with redeem script");if(!(c=S(i,void 0,t)).pubKeys)throw new Error(c.scriptType+" not supported as witnessScript ("+s.toASM(i)+")");a=u.types.P2SH,p=u.scriptHash.output.encode(l),g=b=_=!0,h=u.types.P2WSH,v=d=c.scriptType,w=i}else if(r){if(m(e,l=o.hash160(r)),!(c=S(r,void 0,t)).pubKeys)throw new Error(c.scriptType+" not supported as redeemScript ("+s.toASM(r)+")");a=u.types.P2SH,p=u.scriptHash.output.encode(l),g=!0,w=r,b=(v=h=c.scriptType)===u.types.P2WPKH}else if(i){if(function(e,t){if(e.prevOutType){if(e.prevOutType!==f.P2WSH)throw new Error("PrevOutScript must be P2WSH");var r=s.decompile(e.prevOutScript);if(!r)throw new Error("Invalid witnessScript");if(!r[1].equals(t))throw new Error("Inconsistent sha256(witnessScript)")}}(e,y=o.sha256(i)),!(c=S(i,void 0,t)).pubKeys)throw new Error(c.scriptType+" not supported as witnessScript ("+s.toASM(i)+")");a=u.types.P2WSH,p=u.witnessScriptHash.output.encode(y),b=_=!0,v=d=c.scriptType,w=i}else if(e.prevOutType){if(e.prevOutType===f.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===f.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(a=e.prevOutType,p=e.prevOutScript,!(c=S(e.prevOutScript,e.prevOutType,t)).pubKeys)return;b=e.prevOutType===f.P2WPKH,v=a,w=p}else c=S(p=u.pubKeyHash.output.encode(o.hash160(t)),f.P2PKH,t),b=!1,v=a=f.P2PKH,w=p;v===f.P2WPKH&&(w=u.pubKeyHash.output.encode(u.witnessPubKeyHash.output.decode(w))),g&&(e.redeemScript=r,e.redeemScriptType=h),_&&(e.witnessScript=i,e.witnessScriptType=d),e.pubKeys=c.pubKeys,e.signatures=c.signatures,e.signScript=w,e.signType=v,e.prevOutScript=p,e.prevOutType=a,e.witness=b}function _(e,t,r,i){if(e===f.P2PKH){if(1===t.length&&n.isBuffer(t[0])&&1===r.length)return u.pubKeyHash.input.encodeStack(t[0],r[0])}else if(e===f.P2PK){if(1===t.length&&n.isBuffer(t[0]))return u.pubKey.input.encodeStack(t[0])}else{if(e!==f.MULTISIG)throw new Error("Not yet supported");if(t.length>0)return t=t.map((function(e){return e||a.OP_0})),i||(t=t.filter((function(e){return e!==a.OP_0}))),u.multisig.input.encodeStack(t)}if(!i)throw new Error("Not enough signatures provided");return[]}function P(e,t){this.__prevTxSet={},this.network=e||c.bitcoin,this.maximumFeeRate=t||2500,this.__inputs=[],this.__tx=new y,this.__tx.version=2}function H(e){return void 0!==e.prevOutScript&&void 0!==e.signScript&&void 0!==e.pubKeys&&void 0!==e.signatures&&e.signatures.length===e.pubKeys.length&&e.pubKeys.length>0&&(!1===e.witness||!0===e.witness&&void 0!==e.value)}function E(e){return e.readUInt8(e.length-1)}P.prototype.setLockTime=function(e){if(p(h.UInt32,e),this.__inputs.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return e}))})))throw new Error("No, this would invalidate signatures");this.__tx.locktime=e},P.prototype.setVersion=function(e){p(h.UInt32,e),this.__tx.version=e},P.prototype.setPresentBlockHash=function(e){"string"==typeof e&&(e=n.from(e,"hex").reverse()),p(h.Hash256bit,e),this.__tx.persentBlockHash=e},P.fromTransaction=function(e,t){var r=new P(t);return r.setVersion(e.version),12===e.version&&r.setPresentBlockHash(e.persentBlockHash),r.setLockTime(e.locktime),e.outs.forEach((function(e){r.addOutput(e.script,e.value)})),e.ins.forEach((function(e){r.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})})),r.__inputs.forEach((function(t,r){!function(e,t,r){if(e.redeemScriptType===f.MULTISIG&&e.redeemScript&&e.pubKeys.length!==e.signatures.length){var n=e.signatures.concat();e.signatures=e.pubKeys.map((function(i){var o,u=ECPair.fromPublicKey(i);return n.some((function(i,c){if(!i)return!1;var a=s.signature.decode(i),p=t.hashForSignature(r,e.redeemScript,a.hashType);return!!u.verify(p,a.signature)&&(n[c]=void 0,o=i,!0)})),o}))}}(t,e,r)})),r},P.prototype.addInput=function(e,t,r,i){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var o;if("string"==typeof e)e=n.from(e,"hex").reverse();else if(e instanceof y){var s=e.outs[t];i=s.script,o=s.value,e=e.getHash()}return this.__addInputUnsafe(e,t,{sequence:r,prevOutScript:i,value:o})},P.prototype.__addInputUnsafe=function(e,t,r){if(y.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");var n=e.toString("hex")+":"+t;if(void 0!==this.__prevTxSet[n])throw new Error("Duplicate TxOut: "+n);var i={};if(void 0!==r.script&&(i=g(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){var o;if(!i.pubKeys&&!i.signatures){var s=S(r.prevOutScript);s.pubKeys&&(i.pubKeys=s.pubKeys,i.signatures=s.signatures),o=s.scriptType}i.prevOutScript=r.prevOutScript,i.prevOutType=o||u.classifyOutput(r.prevOutScript)}var c=this.__tx.addInput(e,t,r.sequence,r.scriptSig);return this.__inputs[c]=i,this.__prevTxSet[n]=!0,c},P.prototype.addOutput=function(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=i.toOutputScript(e,this.network)),this.__tx.addOutput(e,t)},P.prototype.build=function(){return this.__build(!1)},P.prototype.buildIncomplete=function(){return this.__build(!0)},P.prototype.__build=function(e){if(!e){if(!this.__tx.ins.length)throw new Error("Transaction has no inputs");if(!this.__tx.outs.length)throw new Error("Transaction has no outputs")}var t=this.__tx.clone();if(this.__inputs.forEach((function(r,n){if(!(r.witnessScriptType||r.redeemScriptType||r.prevOutType)&&!e)throw new Error("Transaction is not complete");var i=function(e,t){var r=e.prevOutType,n=[],i=[];v(r)&&(n=_(r,e.signatures,e.pubKeys,t));var o=!1;if(r===u.types.P2SH){if(!t&&!w(e.redeemScriptType))throw new Error("Impossible to sign this type");v(e.redeemScriptType)&&(n=_(e.redeemScriptType,e.signatures,e.pubKeys,t)),e.redeemScriptType&&(o=!0,r=e.redeemScriptType)}switch(r){case u.types.P2WPKH:i=_(u.types.P2PKH,e.signatures,e.pubKeys,t);break;case u.types.P2WSH:if(!t&&!v(e.witnessScriptType))throw new Error("Impossible to sign this type");v(e.witnessScriptType)&&((i=_(e.witnessScriptType,e.signatures,e.pubKeys,t)).push(e.witnessScript),r=e.witnessScriptType)}return o&&n.push(e.redeemScript),{type:r,script:s.compile(n),witness:i}}(r,e);if(!e&&!v(i.type)&&i.type!==u.types.P2WPKH)throw new Error(i.type+" not supported");t.setInputScript(n,i.script),t.setWitness(n,i.witness)})),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t},P.prototype.sign=function(e,t,r,n,i,o){if(t.network&&t.network!==this.network)throw new TypeError("Inconsistent network");if(!this.__inputs[e])throw new Error("No input at index: "+e);n=n||y.SIGHASH_ALL;var u=this.__inputs[e];if(void 0!==u.redeemScript&&r&&!u.redeemScript.equals(r))throw new Error("Inconsistent redeemScript");var c,a=t.publicKey||t.getPublicKey();if(!H(u)){if(void 0!==i){if(void 0!==u.value&&u.value!==i)throw new Error("Input didn't match witnessValue");p(h.Satoshi,i),u.value=i}if(H(u)||b(u,a,r,0,o),!H(u))throw Error(u.prevOutType+" not supported")}if(c=u.witness?this.__tx.hashForWitnessV0(e,u.signScript,u.value,n):this.__tx.hashForSignature(e,u.signScript,n),!u.pubKeys.some((function(e,r){if(!a.equals(e))return!1;if(u.signatures[r])throw new Error("Signature already exists");if(33!==a.length&&(u.signType===f.P2WPKH||u.redeemScriptType===f.P2WSH||u.prevOutType===f.P2WSH))throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");let i=t.sign(c);return u.signatures[r]=s.signature.encode(i,n),!0})))throw new Error("Key pair cannot sign for this input")},P.prototype.__canModifyInputs=function(){return this.__inputs.every((function(e){return void 0===e.signatures||e.signatures.every((function(e){return!e||E(e)&y.SIGHASH_ANYONECANPAY}))}))},P.prototype.__canModifyOutputs=function(){var e=this.__tx.ins.length,t=this.__tx.outs.length;return this.__inputs.every((function(r){return void 0===r.signatures||r.signatures.every((function(r){if(!r)return!0;var n=31&E(r);return n===y.SIGHASH_NONE||(n===y.SIGHASH_SINGLE?e<=t:void 0)}))}))},P.prototype.__overMaximumFees=function(e){return(this.__inputs.reduce((function(e,t){return e+(t.value>>>0)}),0)-this.__tx.outs.reduce((function(e,t){return e+t.value}),0))/e>this.maximumFeeRate},e.exports=P},7532:function(e,t,r){let n=r(21).Buffer,i=r(74),o=r(7533),s=r(223),u=r(38),c=r(186),a=u.BufferN(32),p=u.compile({wif:u.UInt8,bip32:{public:u.UInt32,private:u.UInt32}}),h={wif:128,bip32:{public:76067358,private:76066276}};function f(e,t,r,n){u(p,n),this.__d=e||null,this.__Q=t||null,this.chainCode=r,this.depth=0,this.index=0,this.network=n,this.parentFingerprint=0}Object.defineProperty(f.prototype,"identifier",{get:function(){return o.hash160(this.publicKey)}}),Object.defineProperty(f.prototype,"fingerprint",{get:function(){return this.identifier.slice(0,4)}}),Object.defineProperty(f.prototype,"privateKey",{enumerable:!1,get:function(){return this.__d}}),Object.defineProperty(f.prototype,"publicKey",{get:function(){return this.__Q||(this.__Q=s.pointFromScalar(this.__d,this.compressed)),this.__Q}}),f.prototype.isNeutered=function(){return null===this.__d},f.prototype.neutered=function(){let e=w(this.publicKey,this.chainCode,this.network);return e.depth=this.depth,e.index=this.index,e.parentFingerprint=this.parentFingerprint,e},f.prototype.toBase58=function(){let e=this.network,t=this.isNeutered()?e.bip32.public:e.bip32.private,r=n.allocUnsafe(78);return r.writeUInt32BE(t,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),i.encode(r)},f.prototype.toWIF=function(){if(!this.privateKey)throw new TypeError("Missing private key");return c.encode(this.network.wif,this.privateKey,!0)};f.prototype.derive=function(e){u(u.UInt32,e);let t=e>=2147483648,r=n.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");r[0]=0,this.privateKey.copy(r,1),r.writeUInt32BE(e,33)}else this.publicKey.copy(r,0),r.writeUInt32BE(e,33);let i,c=o.hmacSHA512(this.chainCode,r),a=c.slice(0,32),p=c.slice(32);if(!s.isPrivate(a))return this.derive(e+1);if(this.isNeutered()){let t=s.pointAddScalar(this.publicKey,a,!0);if(null===t)return this.derive(e+1);i=w(t,p,this.network)}else{let t=s.privateAdd(this.privateKey,a);if(null==t)return this.derive(e+1);i=v(t,p,this.network)}return i.depth=this.depth+1,i.index=e,i.parentFingerprint=this.fingerprint.readUInt32BE(0),i};let l=Math.pow(2,31)-1;function d(e){return u.UInt32(e)&&e<=l}function y(e){return u.String(e)&&e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function v(e,t,r){if(u({privateKey:a,chainCode:a},{privateKey:e,chainCode:t}),r=r||h,!s.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new f(e,null,t,r)}function w(e,t,r){if(u({publicKey:u.BufferN(33),chainCode:a},{publicKey:e,chainCode:t}),r=r||h,!s.isPoint(e))throw new TypeError("Point is not on the curve");return new f(null,e,t,r)}f.prototype.deriveHardened=function(e){return u(d,e),this.derive(e+2147483648)},f.prototype.derivePath=function(e){u(y,e);let t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce((function(e,t){let r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))}),this)},f.prototype.sign=function(e){return s.sign(e,this.privateKey)},f.prototype.verify=function(e,t){return s.verify(e,this.publicKey,t)},e.exports={fromBase58:function(e,t){let r=i.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");t=t||h;let n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");let o=r[4],s=r.readUInt32BE(5);if(0===o&&0!==s)throw new TypeError("Invalid parent fingerprint");let u=r.readUInt32BE(9);if(0===o&&0!==u)throw new TypeError("Invalid index");let c,a=r.slice(13,45);if(n===t.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");c=v(r.slice(46,78),a,t)}else{c=w(r.slice(45,78),a,t)}return c.depth=o,c.index=u,c.parentFingerprint=s,c},fromPrivateKey:v,fromPublicKey:w,fromSeed:function(e,t){if(u(u.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");t=t||h;let r=o.hmacSHA512("Bitcoin seed",e);return v(r.slice(0,32),r.slice(32),t)}}},7533:function(e,t,r){let n=r(83),i=r(271);e.exports={hash160:function(e){return n("rmd160").update(n("sha256").update(e).digest()).digest()},hmacSHA512:function(e,t){return i("sha512",e).update(t).digest()}}}}]);