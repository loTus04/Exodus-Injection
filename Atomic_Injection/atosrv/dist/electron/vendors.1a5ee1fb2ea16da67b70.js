(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{4249:function(e,t,n){"use strict";n.r(t);var r=n(6754),i=n.n(r),o=n(155),s=n(469),u=n(896);const c={messagePrefix:"",bip32:{public:76067358,private:76066276},pubKeyHash:65,scriptHash:126,wif:179};class TPAYCoin extends(Object(s.a)(Object(s.b)(o.a))){constructor({alias:e,feeData:t,explorers:n,txWebUrl:r,socket:o}){super({alias:e,name:"TokenPay",ticker:"TPAY",decimal:8,derivation:"m/44'/265'/0'",unspendableBalance:"0",explorers:n,txWebUrl:r,socket:o,coreLibrary:i()}),this.derivation="m/44'/265'/0'",this.plugins=[new u.a],this.fee=t.fee,this.feePerByte=t.feePerByte,this.coefficient=t.coefficient,this.network=c}getFee(){return new this.BN(this.fee)}async getTransactions(){return[]}async getInfo(){return{balance:"0"}}}t.default=TPAYCoin},4358:function(e,t,n){const r=n(21).Buffer,i=n(396),o=n(223),s=n(656),u=n(38),c=n(4437),p=n(5604),a=n(120),f=n(898),h=a.OP_RESERVED;function l(e){return c.Buffer(e)||function(e){return c.Number(e)&&(e===a.OP_0||e>=a.OP_1&&e<=a.OP_16||e===a.OP_1NEGATE)}(e)}function d(e){return c.Array(e)&&e.every(l)}function y(e){return 0===e.length?a.OP_0:1===e.length?e[0]>=1&&e[0]<=16?h+e[0]:129===e[0]?a.OP_1NEGATE:void 0:void 0}function w(e){if(r.isBuffer(e))return e;u(c.Array,e);const t=e.reduce((function(e,t){return r.isBuffer(t)?1===t.length&&void 0!==y(t)?e+1:e+s.encodingLength(t.length)+t.length:e+1}),0),n=r.allocUnsafe(t);let i=0;if(e.forEach((function(e){if(r.isBuffer(e)){const t=y(e);if(void 0!==t)return n.writeUInt8(t,i),void(i+=1);i+=s.encode(n,e.length,i),e.copy(n,i),i+=e.length}else n.writeUInt8(e,i),i+=1})),i!==n.length)throw new Error("Could not decode chunks");return n}function m(e){if(c.Array(e))return e;u(c.Buffer,e);const t=[];let n=0;for(;n<e.length;){const r=e[n];if(r>a.OP_0&&r<=a.OP_PUSHDATA4){const r=s.decode(e,n);if(null===r)return null;if(n+=r.size,n+r.number>e.length)return null;const i=e.slice(n,n+r.number);n+=r.number;const o=y(i);void 0!==o?t.push(o):t.push(i)}else t.push(r),n+=1}return t}function g(e){const t=-129&e;return t>0&&t<4}e.exports={compile:w,decompile:m,fromASM:function(e){return u(c.String,e),w(e.split(" ").map((function(e){return void 0!==a[e]?a[e]:(u(c.Hex,e),r.from(e,"hex"))})))},toASM:function(e){return r.isBuffer(e)&&(e=m(e)),e.map((function(e){if(r.isBuffer(e)){const t=y(e);if(void 0===t)return e.toString("hex");e=t}return f[e]})).join(" ")},toStack:function(e){return e=m(e),u(d,e),e.map((function(e){return r.isBuffer(e)?e:e===a.OP_0?r.allocUnsafe(0):p.encode(e-h)}))},number:n(5604),signature:n(6755),isCanonicalPubKey:function(e){return o.isPoint(e)},isCanonicalScriptSignature:function(e){return!!r.isBuffer(e)&&(!!g(e[e.length-1])&&i.check(e.slice(0,-1)))},isPushOnly:d,isDefinedHashType:g}},4437:function(e,t,n){const r=n(38),i=Math.pow(2,31)-1;function o(e){return r.String(e)&&e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}o.toJSON=function(){return"BIP32 derivation path"};const s=r.quacksLike("Point"),u=r.compile({messagePrefix:r.oneOf(r.Buffer,r.String),bip32:{public:r.UInt32,private:r.UInt32},pubKeyHash:r.UInt8,scriptHash:r.UInt8,wif:r.UInt8}),c={BIP32Path:o,Buffer256bit:r.BufferN(32),ECPoint:s,Hash160bit:r.BufferN(20),Hash256bit:r.BufferN(32),Network:u,Satoshi:function(e){return r.UInt53(e)&&e<=21e14},UInt31:function(e){return r.UInt32(e)&&e<=i}};for(var p in r)c[p]=r[p];e.exports=c},4527:function(e,t){e.exports={bitcoin:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},testnet:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}}},4608:function(e,t,n){const r=n(83);function i(e){return r("rmd160").update(e).digest()}function o(e){return r("sha256").update(e).digest()}e.exports={hash160:function(e){return i(o(e))},hash256:function(e){return o(o(e))},ripemd160:i,sha1:function(e){return r("sha1").update(e).digest()},sha256:o}},4719:function(e,t,n){const r=n(21).Buffer,i=n(118),o=n(74),s=n(4358),u=n(5165),c=n(4527),p=n(38),a=n(4437);function f(e){const t=o.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function h(e){const t=i.decode(e),n=i.fromWords(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:r.from(n)}}function l(e,t){p(a.tuple(a.Hash160bit,a.UInt8),arguments);const n=r.allocUnsafe(21);return n.writeUInt8(t,0),e.copy(n,1),o.encode(n)}function d(e,t,n){const r=i.toWords(e);return r.unshift(t),i.encode(n,r)}e.exports={fromBase58Check:f,fromBech32:h,fromOutputScript:function(e,t){if(t=t||c.bitcoin,u.pubKeyHash.output.check(e))return l(s.compile(e).slice(3,23),t.pubKeyHash);if(u.scriptHash.output.check(e))return l(s.compile(e).slice(2,22),t.scriptHash);if(u.witnessPubKeyHash.output.check(e))return d(s.compile(e).slice(2,22),0,t.bech32);if(u.witnessScriptHash.output.check(e))return d(s.compile(e).slice(2,34),0,t.bech32);throw new Error(s.toASM(e)+" has no matching Address")},toBase58Check:l,toBech32:d,toOutputScript:function(e,t){let n;t=t||c.bitcoin;try{n=f(e)}catch(e){}if(n){if(n.version===t.pubKeyHash)return u.pubKeyHash.output.encode(n.hash);if(n.version===t.scriptHash)return u.scriptHash.output.encode(n.hash)}else{try{n=h(e)}catch(e){}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===n.version){if(20===n.data.length)return u.witnessPubKeyHash.output.encode(n.data);if(32===n.data.length)return u.witnessScriptHash.output.encode(n.data)}}}throw new Error(e+" has no matching Script")}}},4720:function(e,t){e.exports={prop:function(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){let e=n.call(this);return this[t]=e,e},set:function(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},value:function(e){let t;return function(){return void 0!==t||(t=e()),t}}}},5165:function(e,t,n){const r=n(4358).decompile,i=n(5166),o=n(6757),s=n(5167),u=n(5168),c=n(6762),p=n(6765),a=n(6767),f=n(6769),h={MULTISIG:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};e.exports={classifyInput:function(e,t){const n=r(e);if(!n)throw new TypeError("Invalid script");return u.input.check(n)?h.P2PKH:c.input.check(n,t)?h.P2SH:i.input.check(n,t)?h.MULTISIG:s.input.check(n)?h.P2PK:h.NONSTANDARD},classifyOutput:function(e){if(p.output.check(e))return h.P2WPKH;if(a.output.check(e))return h.P2WSH;if(u.output.check(e))return h.P2PKH;if(c.output.check(e))return h.P2SH;const t=r(e);if(!t)throw new TypeError("Invalid script");return i.output.check(t)?h.MULTISIG:s.output.check(t)?h.P2PK:f.output.check(t)?h.WITNESS_COMMITMENT:o.output.check(t)?h.NULLDATA:h.NONSTANDARD},classifyWitness:function(e,t){const n=r(e);if(!n)throw new TypeError("Invalid script");return p.input.check(n)?h.P2WPKH:a.input.check(n,t)?h.P2WSH:h.NONSTANDARD},multisig:i,nullData:o,pubKey:s,pubKeyHash:u,scriptHash:c,witnessPubKeyHash:p,witnessScriptHash:a,witnessCommitment:f,types:h}},5166:function(e,t,n){e.exports={input:n(6756),output:n(5605)}},5167:function(e,t,n){e.exports={input:n(6758),output:n(6759)}},5168:function(e,t,n){e.exports={input:n(6760),output:n(6761)}},5169:function(e,t,n){const r=n(21).Buffer,i=n(4608),o=n(4358),s=n(6772),u=n(120),c=n(38),p=n(4437),a=n(315);function f(e){const t=e.length;return a.encodingLength(t)+t}function h(){this.version=1,this.ntime=Math.floor((new Date).getTime()/1e3),this.locktime=0,this.ins=[],this.outs=[]}h.DEFAULT_SEQUENCE=4294967295,h.SIGHASH_ALL=1,h.SIGHASH_NONE=2,h.SIGHASH_SINGLE=3,h.SIGHASH_ANYONECANPAY=128,h.ADVANCED_TRANSACTION_MARKER=0,h.ADVANCED_TRANSACTION_FLAG=1;const l=r.allocUnsafe(0),d=[],y=r.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),w=r.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),m=r.from("ffffffffffffffff","hex"),g={script:l,valueBuffer:m};h.fromBuffer=function(e,t){let n=0;function r(t){return n+=t,e.slice(n-t,n)}function i(){const t=e.readUInt32LE(n);return n+=4,t}function o(){const t=e.readInt32LE(n);return n+=4,t}function u(){const t=s.readUInt64LE(e,n);return n+=8,t}function c(){const t=a.decode(e,n);return n+=a.decode.bytes,t}function p(){return r(c())}function f(){const e=c(),t=[];for(var n=0;n<e;n++)t.push(p());return t}const l=new h;l.version=o(),l.ntime=o();const y=e.readUInt8(n),w=e.readUInt8(n+1);let m=!1;y===h.ADVANCED_TRANSACTION_MARKER&&w===h.ADVANCED_TRANSACTION_FLAG&&(n+=2,m=!0);const g=c();for(var b=0;b<g;++b)l.ins.push({hash:r(32),index:i(),script:p(),sequence:i(),witness:d});const S=c();for(b=0;b<S;++b)l.outs.push({value:u(),script:p()});if(m){for(b=0;b<g;++b)l.ins[b].witness=f();if(!l.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(l.locktime=i(),t)return l;if(n!==e.length)throw new Error("Transaction has unexpected data");return l},h.fromHex=function(e){return h.fromBuffer(r.from(e,"hex"))},h.isCoinbaseHash=function(e){c(p.Hash256bit,e);for(var t=0;t<32;++t)if(0!==e[t])return!1;return!0},h.prototype.isCoinbase=function(){return 1===this.ins.length&&h.isCoinbaseHash(this.ins[0].hash)},h.prototype.addInput=function(e,t,n,r){return c(p.tuple(p.Hash256bit,p.UInt32,p.maybe(p.UInt32),p.maybe(p.Buffer)),arguments),p.Null(n)&&(n=h.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:r||l,sequence:n,witness:d})-1},h.prototype.addOutput=function(e,t){return c(p.tuple(p.Buffer,p.Satoshi),arguments),this.outs.push({script:e,value:t})-1},h.prototype.hasWitnesses=function(){return this.ins.some((function(e){return 0!==e.witness.length}))},h.prototype.weight=function(){return 3*this.__byteLength(!1)+this.__byteLength(!0)},h.prototype.virtualSize=function(){return Math.ceil(this.weight()/4)},h.prototype.byteLength=function(){return this.__byteLength(!0)},h.prototype.__byteLength=function(e){const t=e&&this.hasWitnesses();return(t?14:12)+a.encodingLength(this.ins.length)+a.encodingLength(this.outs.length)+this.ins.reduce((function(e,t){return e+40+f(t.script)}),0)+this.outs.reduce((function(e,t){return e+8+f(t.script)}),0)+(t?this.ins.reduce((function(e,t){return e+function(e){const t=e.length;return a.encodingLength(t)+e.reduce((function(e,t){return e+f(t)}),0)}(t.witness)}),0):0)},h.prototype.clone=function(){const e=new h;return e.version=this.version,e.ntime=this.ntime,e.locktime=this.locktime,e.ins=this.ins.map((function(e){return{hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}})),e.outs=this.outs.map((function(e){return{script:e.script,value:e.value}})),e},h.prototype.hashForSignature=function(e,t,n){if(c(p.tuple(p.UInt32,p.Buffer,p.Number),arguments),e>=this.ins.length)return w;const s=o.compile(o.decompile(t).filter((function(e){return e!==u.OP_CODESEPARATOR}))),a=this.clone();if((31&n)===h.SIGHASH_NONE)a.outs=[],a.ins.forEach((function(t,n){n!==e&&(t.sequence=0)}));else if((31&n)===h.SIGHASH_SINGLE){if(e>=this.outs.length)return w;a.outs.length=e+1;for(var f=0;f<e;f++)a.outs[f]=g;a.ins.forEach((function(t,n){n!==e&&(t.sequence=0)}))}n&h.SIGHASH_ANYONECANPAY?(a.ins=[a.ins[e]],a.ins[0].script=s):(a.ins.forEach((function(e){e.script=l})),a.ins[e].script=s);const d=r.allocUnsafe(a.__byteLength(!1)+4);return d.writeInt32LE(n,d.length-4),a.__toBuffer(d,0,!1),i.hash256(d)},h.prototype.hashForWitnessV0=function(e,t,n,o){let u,l;function d(e){l+=e.copy(u,l)}function w(e){l=u.writeUInt32LE(e,l)}function m(e){l=s.writeUInt64LE(u,e,l)}function g(e){a.encode(e,u,l),l+=a.encode.bytes}function b(e){g(e.length),d(e)}c(p.tuple(p.UInt32,p.Buffer,p.Satoshi,p.UInt32),arguments);let S=y,v=y,E=y;if(o&h.SIGHASH_ANYONECANPAY||(u=r.allocUnsafe(36*this.ins.length),l=0,this.ins.forEach((function(e){d(e.hash),w(e.index)})),v=i.hash256(u)),o&h.SIGHASH_ANYONECANPAY||(31&o)===h.SIGHASH_SINGLE||(31&o)===h.SIGHASH_NONE||(u=r.allocUnsafe(4*this.ins.length),l=0,this.ins.forEach((function(e){w(e.sequence)})),E=i.hash256(u)),(31&o)!==h.SIGHASH_SINGLE&&(31&o)!==h.SIGHASH_NONE){const e=this.outs.reduce((function(e,t){return e+8+f(t.script)}),0);u=r.allocUnsafe(e),l=0,this.outs.forEach((function(e){m(e.value),b(e.script)})),S=i.hash256(u)}else if((31&o)===h.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e];u=r.allocUnsafe(8+f(t.script)),l=0,m(t.value),b(t.script),S=i.hash256(u)}u=r.allocUnsafe(156+f(t)),l=0;const P=this.ins[e];return w(this.version),w(this.ntime),d(v),d(E),d(P.hash),w(P.index),b(t),m(n),w(P.sequence),d(S),w(this.locktime),w(o),i.hash256(u)},h.prototype.getHash=function(){return i.hash256(this.__toBuffer(void 0,void 0,!1))},h.prototype.getId=function(){return this.getHash().reverse().toString("hex")},h.prototype.toBuffer=function(e,t){return this.__toBuffer(e,t,!0)},h.prototype.__toBuffer=function(e,t,n){e||(e=r.allocUnsafe(this.__byteLength(n)));let i=t||0;function o(t){i+=t.copy(e,i)}function u(t){i=e.writeUInt8(t,i)}function c(t){i=e.writeUInt32LE(t,i)}function p(t){a.encode(t,e,i),i+=a.encode.bytes}function f(e){p(e.length),o(e)}var l;l=this.version,i=e.writeInt32LE(l,i),c(this.ntime);const d=n&&this.hasWitnesses();return d&&(u(h.ADVANCED_TRANSACTION_MARKER),u(h.ADVANCED_TRANSACTION_FLAG)),p(this.ins.length),this.ins.forEach((function(e){o(e.hash),c(e.index),f(e.script),c(e.sequence)})),p(this.outs.length),this.outs.forEach((function(t){t.valueBuffer?o(t.valueBuffer):function(t){i=s.writeUInt64LE(e,t,i)}(t.value),f(t.script)})),d&&this.ins.forEach((function(e){var t;p((t=e.witness).length),t.forEach(f)})),c(this.locktime),void 0!==t?e.slice(t,i):e},h.prototype.toHex=function(){return this.toBuffer().toString("hex")},h.prototype.setInputScript=function(e,t){c(p.tuple(p.Number,p.Buffer),arguments),this.ins[e].script=t},h.prototype.setWitness=function(e,t){c(p.tuple(p.Number,[p.Buffer]),arguments),this.ins[e].witness=t},e.exports=h},5604:function(e,t,n){const r=n(21).Buffer;e.exports={decode:function(e,t,n){t=t||4,n=void 0===n||n;const r=e.length;if(0===r)return 0;if(r>t)throw new TypeError("Script number overflow");if(n&&0==(127&e[r-1])&&(r<=1||0==(128&e[r-2])))throw new Error("Non-minimally encoded script number");if(5===r){const t=e.readUInt32LE(0),n=e.readUInt8(4);return 128&n?-(4294967296*(-129&n)+t):4294967296*n+t}let i=0;for(var o=0;o<r;++o)i|=e[o]<<8*o;return 128&e[r-1]?-(i&~(128<<8*(r-1))):i},encode:function(e){let t=Math.abs(e);const n=function(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}(t),i=r.allocUnsafe(n),o=e<0;for(var s=0;s<n;++s)i.writeUInt8(255&t,s),t>>=8;return 128&i[n-1]?i.writeUInt8(o?128:0,n-1):o&&(i[n-1]|=128),i}}},5605:function(e,t,n){const r=n(4358),i=n(4437),o=n(38),s=n(120),u=s.OP_RESERVED;function c(e,t){const n=r.decompile(e);if(n.length<4)return!1;if(n[n.length-1]!==s.OP_CHECKMULTISIG)return!1;if(!i.Number(n[0]))return!1;if(!i.Number(n[n.length-2]))return!1;const o=n[0]-u,c=n[n.length-2]-u;if(o<=0)return!1;if(c>16)return!1;if(o>c)return!1;if(c!==n.length-3)return!1;if(t)return!0;return n.slice(1,-2).every(r.isCanonicalPubKey)}c.toJSON=function(){return"multi-sig output"},e.exports={check:c,decode:function(e,t){const n=r.decompile(e);return o(c,n,t),{m:n[0]-u,pubKeys:n.slice(1,-2)}},encode:function(e,t){o({m:i.Number,pubKeys:[r.isCanonicalPubKey]},{m:e,pubKeys:t});const n=t.length;if(n<e)throw new TypeError("Not enough pubKeys provided");return r.compile([].concat(u+e,t,u+n,s.OP_CHECKMULTISIG))}}},5606:function(e,t,n){const r=n(4358),i=n(4437),o=n(38),s=n(120);function u(e){const t=r.compile(e);return 22===t.length&&t[0]===s.OP_0&&20===t[1]}u.toJSON=function(){return"Witness pubKeyHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(2)},encode:function(e){return o(i.Hash160bit,e),r.compile([s.OP_0,e])}}},5607:function(e,t,n){const r=n(4358),i=n(4437),o=n(38),s=n(120);function u(e){const t=r.compile(e);return 34===t.length&&t[0]===s.OP_0&&32===t[1]}u.toJSON=function(){return"Witness scriptHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(2)},encode:function(e){return o(i.Hash256bit,e),r.compile([s.OP_0,e])}}},5608:function(e,t,n){const r=n(223),i=n(107),o=n(38),s=n(4437),u=n(186),c=n(4527);function p(e){return r.isPoint(e)}const a=o.maybe(o.compile({compressed:s.maybe(s.Boolean),network:s.maybe(s.Network)}));function ECPair(e,t,n){n=n||{},this.compressed=void 0===n.compressed||n.compressed,this.network=n.network||c.bitcoin,this.__d=e||null,this.__Q=null,t&&(this.__Q=r.pointCompress(t,this.compressed))}function f(e,t){if(o(s.Buffer256bit,e),!r.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return o(a,t),new ECPair(e,null,t)}Object.defineProperty(ECPair.prototype,"privateKey",{enumerable:!1,get:function(){return this.__d}}),Object.defineProperty(ECPair.prototype,"publicKey",{get:function(){return this.__Q||(this.__Q=r.pointFromScalar(this.__d,this.compressed)),this.__Q}}),ECPair.prototype.toWIF=function(){if(!this.__d)throw new Error("Missing private key");return u.encode(this.network.wif,this.__d,this.compressed)},ECPair.prototype.sign=function(e){if(!this.__d)throw new Error("Missing private key");return r.sign(e,this.__d)},ECPair.prototype.verify=function(e,t){return r.verify(e,this.publicKey,t)},e.exports={makeRandom:function(e){o(a,e);const t=(e=e||{}).rng||i;let n;do{n=t(32),o(s.Buffer256bit,n)}while(!r.isPrivate(n));return f(n,e)},fromPrivateKey:f,fromPublicKey:function(e,t){return o(p,e),o(a,t),new ECPair(null,e,t)},fromWIF:function(e,t){const n=u.decode(e),r=n.version;if(s.Array(t)){if(!(t=t.filter((function(e){return r===e.wif})).pop()))throw new Error("Unknown network version")}else if(t=t||c.bitcoin,r!==t.wif)throw new Error("Invalid network version");return f(n.privateKey,{compressed:n.compressed,network:t})}}},6754:function(e,t,n){const r=n(4358),i=n(5165);for(let e in i)r[e]=i[e];e.exports={Block:n(6771),ECPair:n(5608),Transaction:n(5169),TransactionBuilder:n(6773),address:n(4719),bip32:n(6774),crypto:n(4608),networks:n(4527),opcodes:n(120),payments:n(6776),script:r}},6755:function(e,t,n){const r=n(396),i=n(21).Buffer,o=n(38),s=n(4437),u=i.alloc(1,0);function c(e){let t=0;for(;0===e[t];)++t;return t===e.length?u:128&(e=e.slice(t))[0]?i.concat([u,e],1+e.length):e}function p(e){0===e[0]&&(e=e.slice(1));const t=i.alloc(32,0),n=Math.max(0,32-e.length);return e.copy(t,n),t}e.exports={decode:function(e){const t=e.readUInt8(e.length-1),n=-129&t;if(n<=0||n>=4)throw new Error("Invalid hashType "+t);const o=r.decode(e.slice(0,-1)),s=p(o.r),u=p(o.s);return{signature:i.concat([s,u],64),hashType:t}},encode:function(e,t){o({signature:s.BufferN(64),hashType:s.UInt8},{signature:e,hashType:t});const n=-129&t;if(n<=0||n>=4)throw new Error("Invalid hashType "+t);const u=i.allocUnsafe(1);u.writeUInt8(t,0);const p=c(e.slice(0,32)),a=c(e.slice(32,64));return i.concat([r.encode(p,a),u])}}},6756:function(e,t,n){const r=n(21).Buffer,i=n(4358),o=n(5605),s=n(38),u=n(120);function c(e){return e===u.OP_0||i.isCanonicalScriptSignature(e)}function p(e,t){const n=i.decompile(e);return!(n.length<2)&&(n[0]===u.OP_0&&(t?n.slice(1).every(c):n.slice(1).every(i.isCanonicalScriptSignature)))}p.toJSON=function(){return"multisig input"};const a=r.allocUnsafe(0);function f(e,t){if(s([c],e),t){const n=o.decode(t);if(e.length<n.m)throw new TypeError("Not enough signatures provided");if(e.length>n.pubKeys.length)throw new TypeError("Too many signatures provided")}return[].concat(a,e.map((function(e){return e===u.OP_0?a:e})))}function h(e,t){return s(s.Array,e),s(p,e,t),e.slice(1)}e.exports={check:p,decode:function(e,t){return h(i.decompile(e),t)},decodeStack:h,encode:function(e,t){return i.compile(f(e,t))},encodeStack:f}},6757:function(e,t,n){const r=n(4358),i=n(4437),o=n(38),s=n(120);function u(e){const t=r.compile(e);return t.length>1&&t[0]===s.OP_RETURN}u.toJSON=function(){return"null data output"},e.exports={output:{check:u,decode:function(e){return o(u,e),r.decompile(e).slice(1)},encode:function(e){return o([i.Buffer],e),r.compile([s.OP_RETURN].concat(e))}}}},6758:function(e,t,n){const r=n(4358),i=n(38);function o(e){const t=r.decompile(e);return 1===t.length&&r.isCanonicalScriptSignature(t[0])}function s(e){return i(r.isCanonicalScriptSignature,e),[e]}function u(e){return i(i.Array,e),i(o,e),e[0]}o.toJSON=function(){return"pubKey input"},e.exports={check:o,decode:function(e){return u(r.decompile(e))},decodeStack:u,encode:function(e){return r.compile(s(e))},encodeStack:s}},6759:function(e,t,n){const r=n(4358),i=n(38),o=n(120);function s(e){const t=r.decompile(e);return 2===t.length&&r.isCanonicalPubKey(t[0])&&t[1]===o.OP_CHECKSIG}s.toJSON=function(){return"pubKey output"},e.exports={check:s,decode:function(e){const t=r.decompile(e);return i(s,t),t[0]},encode:function(e){return i(r.isCanonicalPubKey,e),r.compile([e,o.OP_CHECKSIG])}}},6760:function(e,t,n){const r=n(4358),i=n(38);function o(e){const t=r.decompile(e);return 2===t.length&&r.isCanonicalScriptSignature(t[0])&&r.isCanonicalPubKey(t[1])}function s(e,t){return i({signature:r.isCanonicalScriptSignature,pubKey:r.isCanonicalPubKey},{signature:e,pubKey:t}),[e,t]}function u(e){return i(i.Array,e),i(o,e),{signature:e[0],pubKey:e[1]}}o.toJSON=function(){return"pubKeyHash input"},e.exports={check:o,decode:function(e){return u(r.decompile(e))},decodeStack:u,encode:function(e,t){return r.compile(s(e,t))},encodeStack:s}},6761:function(e,t,n){const r=n(4358),i=n(4437),o=n(38),s=n(120);function u(e){const t=r.compile(e);return 25===t.length&&t[0]===s.OP_DUP&&t[1]===s.OP_HASH160&&20===t[2]&&t[23]===s.OP_EQUALVERIFY&&t[24]===s.OP_CHECKSIG}u.toJSON=function(){return"pubKeyHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(3,23)},encode:function(e){return o(i.Hash160bit,e),r.compile([s.OP_DUP,s.OP_HASH160,e,s.OP_EQUALVERIFY,s.OP_CHECKSIG])}}},6762:function(e,t,n){e.exports={input:n(6763),output:n(6764)}},6763:function(e,t,n){const r=n(21).Buffer,i=n(4358),o=n(38),s=n(5166),u=n(5167),c=n(5168),p=n(5606),a=n(5607);function f(e,t){const n=i.decompile(e);if(n.length<1)return!1;const o=n[n.length-1];if(!r.isBuffer(o))return!1;const f=i.decompile(i.compile(n.slice(0,-1))),h=i.decompile(o);return!!h&&(!!i.isPushOnly(f)&&(1===n.length?a.check(h)||p.check(h):!(!c.input.check(f)||!c.output.check(h))||(!(!s.input.check(f,t)||!s.output.check(h))||!(!u.input.check(f)||!u.output.check(h)))))}function h(e,t){const n=i.compile(t);return[].concat(e,n)}function l(e){return o(o.Array,e),o(f,e),{redeemScriptStack:e.slice(0,-1),redeemScript:e[e.length-1]}}f.toJSON=function(){return"scriptHash input"},e.exports={check:f,decode:function(e){const t=l(i.decompile(e));return t.redeemScriptSig=i.compile(t.redeemScriptStack),delete t.redeemScriptStack,t},decodeStack:l,encode:function(e,t){const n=i.decompile(e);return i.compile(h(n,t))},encodeStack:h}},6764:function(e,t,n){const r=n(4358),i=n(4437),o=n(38),s=n(120);function u(e){const t=r.compile(e);return 23===t.length&&t[0]===s.OP_HASH160&&20===t[1]&&t[22]===s.OP_EQUAL}u.toJSON=function(){return"scriptHash output"},e.exports={check:u,decode:function(e){return o(u,e),e.slice(2,22)},encode:function(e){return o(i.Hash160bit,e),r.compile([s.OP_HASH160,e,s.OP_EQUAL])}}},6765:function(e,t,n){e.exports={input:n(6766),output:n(5606)}},6766:function(e,t,n){const r=n(4358),i=n(38);function o(e){return r.isCanonicalPubKey(e)&&33===e.length}function s(e){const t=r.decompile(e);return 2===t.length&&r.isCanonicalScriptSignature(t[0])&&o(t[1])}s.toJSON=function(){return"witnessPubKeyHash input"},e.exports={check:s,decodeStack:function(e){return i(i.Array,e),i(s,e),{signature:e[0],pubKey:e[1]}},encodeStack:function(e,t){return i({signature:r.isCanonicalScriptSignature,pubKey:o},{signature:e,pubKey:t}),[e,t]}}},6767:function(e,t,n){e.exports={input:n(6768),output:n(5607)}},6768:function(e,t,n){const r=n(4358),i=n(4437),o=n(38),s=n(5166),u=n(5167),c=n(5168);function p(e,t){if(o(i.Array,e),e.length<1)return!1;const n=e[e.length-1];if(!Buffer.isBuffer(n))return!1;const p=r.decompile(n);if(0===p.length)return!1;const a=r.compile(e.slice(0,-1));return!(!c.input.check(a)||!c.output.check(p))||(!(!s.input.check(a,t)||!s.output.check(p))||!(!u.input.check(a)||!u.output.check(p)))}p.toJSON=function(){return"witnessScriptHash input"},e.exports={check:p,decodeStack:function(e){return o(o.Array,e),o(p,e),{witnessData:e.slice(0,-1),witnessScript:e[e.length-1]}},encodeStack:function(e,t){return o({witnessData:[i.Buffer],witnessScript:i.Buffer},{witnessData:e,witnessScript:t}),[].concat(e,t)}}},6769:function(e,t,n){e.exports={output:n(6770)}},6770:function(e,t,n){const r=n(21).Buffer,i=n(4358),o=n(4437),s=n(38),u=n(120),c=r.from("aa21a9ed","hex");function p(e){const t=i.compile(e);return t.length>37&&t[0]===u.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(c)}p.toJSON=function(){return"Witness commitment output"},e.exports={check:p,decode:function(e){return s(p,e),i.decompile(e)[1].slice(4,36)},encode:function(e){s(o.Hash256bit,e);const t=r.allocUnsafe(36);return c.copy(t,0),e.copy(t,4),i.compile([u.OP_RETURN,t])}}},6771:function(e,t,n){const r=n(21).Buffer,i=n(4608),o=n(897),s=n(38),u=n(4437),c=n(315),p=n(5169);function Block(){this.version=1,this.prevHash=null,this.merkleRoot=null,this.timestamp=0,this.bits=0,this.nonce=0}Block.fromBuffer=function(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");let t=0;function n(n){return t+=n,e.slice(t-n,t)}function r(){const n=e.readUInt32LE(t);return t+=4,n}const i=new Block;if(i.version=function(){const n=e.readInt32LE(t);return t+=4,n}(),i.prevHash=n(32),i.merkleRoot=n(32),i.timestamp=r(),i.bits=r(),i.nonce=r(),80===e.length)return i;function o(){const n=p.fromBuffer(e.slice(t),!0);return t+=n.byteLength(),n}const s=function(){const n=c.decode(e,t);return t+=c.decode.bytes,n}();i.transactions=[];for(var u=0;u<s;++u){const e=o();i.transactions.push(e)}return i},Block.prototype.byteLength=function(e){return e||!this.transactions?80:80+c.encodingLength(this.transactions.length)+this.transactions.reduce((function(e,t){return e+t.byteLength()}),0)},Block.fromHex=function(e){return Block.fromBuffer(r.from(e,"hex"))},Block.prototype.getHash=function(){return i.hash256(this.toBuffer(!0))},Block.prototype.getId=function(){return this.getHash().reverse().toString("hex")},Block.prototype.getUTCDate=function(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e},Block.prototype.toBuffer=function(e){const t=r.allocUnsafe(this.byteLength(e));let n=0;function i(e){e.copy(t,n),n+=e.length}function o(e){t.writeUInt32LE(e,n),n+=4}var s;return s=this.version,t.writeInt32LE(s,n),n+=4,i(this.prevHash),i(this.merkleRoot),o(this.timestamp),o(this.bits),o(this.nonce),e||!this.transactions||(c.encode(this.transactions.length,t,n),n+=c.encode.bytes,this.transactions.forEach((function(e){const r=e.byteLength();e.toBuffer(t,n),n+=r}))),t},Block.prototype.toHex=function(e){return this.toBuffer(e).toString("hex")},Block.calculateTarget=function(e){const t=((4278190080&e)>>24)-3,n=8388607&e,i=r.alloc(32,0);return i.writeUInt32BE(n,28-t),i},Block.calculateMerkleRoot=function(e){if(s([{getHash:u.Function}],e),0===e.length)throw TypeError("Cannot compute merkle root for zero transactions");const t=e.map((function(e){return e.getHash()}));return o(t,i.hash256)},Block.prototype.checkMerkleRoot=function(){if(!this.transactions)return!1;const e=Block.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)},Block.prototype.checkProofOfWork=function(){const e=this.getHash().reverse(),t=Block.calculateTarget(this.bits);return e.compare(t)<=0},e.exports=Block},6772:function(e,t){function n(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}e.exports={readUInt64LE:function(e,t){const r=e.readUInt32LE(t);let i=e.readUInt32LE(t+4);return i*=4294967296,n(i+r,9007199254740991),i+r},writeUInt64LE:function(e,t,r){return n(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}}},6773:function(e,t,n){const r=n(21).Buffer,i=n(4719),o=n(4608),s=n(4358),u=n(5165),c=n(4527),p=n(120),a=n(38),f=n(4437),h=u.types,l=[u.types.P2PKH,u.types.P2PK,u.types.MULTISIG],d=l.concat([u.types.P2WPKH,u.types.P2WSH]),ECPair=n(5608),y=n(5169);function w(e){return-1!==l.indexOf(e)}function m(e){return-1!==d.indexOf(e)}function g(e,t){if(0===e.length&&0===t.length)return{};let n,r,i,c,p,a,f,l,d,y,g=!1,b=!1,S=!1;const v=s.decompile(e)||[];u.classifyInput(v,!0)===h.P2SH&&(S=!0,p=v[v.length-1],l=u.classifyOutput(p),n=u.scriptHash.output.encode(o.hash160(p)),r=h.P2SH,c=p);const E=u.classifyWitness(t,!0);if(E===h.P2WSH){if(a=t[t.length-1],f=u.classifyOutput(a),b=!0,g=!0,0===e.length){if(n=u.witnessScriptHash.output.encode(o.sha256(a)),r=h.P2WSH,void 0!==p)throw new Error("Redeem script given when unnecessary")}else{if(!p)throw new Error("No redeemScript provided for P2WSH, but scriptSig non-empty");if(d=u.witnessScriptHash.output.encode(o.sha256(a)),!p.equals(d))throw new Error("Redeem script didn't match witnessScript")}if(!w(u.classifyOutput(a)))throw new Error("unsupported witness script");c=a,i=f,y=t.slice(0,-1)}else if(E===h.P2WPKH){g=!0;const s=t[t.length-1],c=o.hash160(s);if(0===e.length){if(n=u.witnessPubKeyHash.output.encode(c),r=h.P2WPKH,void 0!==p)throw new Error("Redeem script given when unnecessary")}else{if(!p)throw new Error("No redeemScript provided for P2WPKH, but scriptSig wasn't empty");if(d=u.witnessPubKeyHash.output.encode(c),!p.equals(d))throw new Error("Redeem script did not have the right witness program")}i=h.P2PKH,y=t}else if(p){if(!m(l))throw new Error("Bad redeemscript!");c=p,i=l,y=v.slice(0,-1)}else r=i=u.classifyInput(e),y=v;const P=function(e,t,n){let r=[],i=[];switch(e){case h.P2PKH:r=t.slice(1),i=t.slice(0,1);break;case h.P2PK:r[0]=n?u.pubKey.output.decode(n):void 0,i=t.slice(0,1);break;case h.MULTISIG:if(n){r=u.multisig.output.decode(n).pubKeys}i=t.slice(1).map((function(e){return 0===e.length?void 0:e}))}return{pubKeys:r,signatures:i}}(i,y,c),k={pubKeys:P.pubKeys,signatures:P.signatures,prevOutScript:n,prevOutType:r,signType:i,signScript:c,witness:Boolean(g)};return S&&(k.redeemScript=p,k.redeemScriptType=l),b&&(k.witnessScript=a,k.witnessScriptType=f),k}function b(e,t,n){a(f.Buffer,e);const r=s.decompile(e)||[];t||(t=u.classifyOutput(e));let i=[];switch(t){case h.P2PKH:if(!n)break;const e=r[2],s=o.hash160(n);e.equals(s)&&(i=[n]);break;case h.P2WPKH:if(!n)break;const u=r[1],c=o.hash160(n);u.equals(c)&&(i=[n]);break;case h.P2PK:i=r.slice(0,1);break;case h.MULTISIG:i=r.slice(1,-2);break;default:return{scriptType:t}}return{pubKeys:i,scriptType:t,signatures:i.map((function(){}))}}function S(e,t){if(e.prevOutType){if(e.prevOutType!==h.P2SH)throw new Error("PrevOutScript must be P2SH");const n=s.decompile(e.prevOutScript);if(!n)throw new Error("Invalid prevOutScript");if(!n[1].equals(t))throw new Error("Inconsistent hash160(redeemScript)")}}function v(e,t,n,r,i){let c,p,a,f,l,d,y,w,m,g=!1,v=!1,E=!1;if(n&&i){if(l=o.hash160(n),y=o.sha256(i),S(e,l),!n.equals(u.witnessScriptHash.output.encode(y)))throw new Error("Witness script inconsistent with redeem script");if(c=b(i,void 0,t),!c.pubKeys)throw new Error(c.scriptType+" not supported as witnessScript ("+s.toASM(i)+")");p=u.types.P2SH,a=u.scriptHash.output.encode(l),g=v=E=!0,f=u.types.P2WSH,w=d=c.scriptType,m=i}else if(n){if(l=o.hash160(n),S(e,l),c=b(n,void 0,t),!c.pubKeys)throw new Error(c.scriptType+" not supported as redeemScript ("+s.toASM(n)+")");p=u.types.P2SH,a=u.scriptHash.output.encode(l),g=!0,w=f=c.scriptType,m=n,v=w===u.types.P2WPKH}else if(i){if(y=o.sha256(i),function(e,t){if(e.prevOutType){if(e.prevOutType!==h.P2WSH)throw new Error("PrevOutScript must be P2WSH");const n=s.decompile(e.prevOutScript);if(!n)throw new Error("Invalid witnessScript");if(!n[1].equals(t))throw new Error("Inconsistent sha256(witnessScript)")}}(e,y),c=b(i,void 0,t),!c.pubKeys)throw new Error(c.scriptType+" not supported as witnessScript ("+s.toASM(i)+")");p=u.types.P2WSH,a=u.witnessScriptHash.output.encode(y),v=E=!0,w=d=c.scriptType,m=i}else if(e.prevOutType){if(e.prevOutType===h.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===h.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(p=e.prevOutType,a=e.prevOutScript,c=b(e.prevOutScript,e.prevOutType,t),!c.pubKeys)return;v=e.prevOutType===h.P2WPKH,w=p,m=a}else a=u.pubKeyHash.output.encode(o.hash160(t)),c=b(a,h.P2PKH,t),p=h.P2PKH,v=!1,w=p,m=a;w===h.P2WPKH&&(m=u.pubKeyHash.output.encode(u.witnessPubKeyHash.output.decode(m))),g&&(e.redeemScript=n,e.redeemScriptType=f),E&&(e.witnessScript=i,e.witnessScriptType=d),e.pubKeys=c.pubKeys,e.signatures=c.signatures,e.signScript=m,e.signType=w,e.prevOutScript=a,e.prevOutType=p,e.witness=v}function E(e,t,n,i){if(e===h.P2PKH){if(1===t.length&&r.isBuffer(t[0])&&1===n.length)return u.pubKeyHash.input.encodeStack(t[0],n[0])}else if(e===h.P2PK){if(1===t.length&&r.isBuffer(t[0]))return u.pubKey.input.encodeStack(t[0])}else{if(e!==h.MULTISIG)throw new Error("Not yet supported");if(t.length>0)return t=t.map((function(e){return e||p.OP_0})),i||(t=t.filter((function(e){return e!==p.OP_0}))),u.multisig.input.encodeStack(t)}if(!i)throw new Error("Not enough signatures provided");return[]}function P(e,t){this.__prevTxSet={},this.network=e||c.bitcoin,this.maximumFeeRate=t||2500,this.__inputs=[],this.__tx=new y,this.__tx.version=2}function k(e){return void 0!==e.prevOutScript&&void 0!==e.signScript&&void 0!==e.pubKeys&&void 0!==e.signatures&&e.signatures.length===e.pubKeys.length&&e.pubKeys.length>0&&(!1===e.witness||!0===e.witness&&void 0!==e.value)}function _(e){return e.readUInt8(e.length-1)}P.prototype.setLockTime=function(e){if(a(f.UInt32,e),this.__inputs.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return e}))})))throw new Error("No, this would invalidate signatures");this.__tx.locktime=e},P.prototype.setVersion=function(e){a(f.UInt32,e),this.__tx.version=e},P.fromTransaction=function(e,t){const n=new P(t);return n.setVersion(e.version),n.setLockTime(e.locktime),e.outs.forEach((function(e){n.addOutput(e.script,e.value)})),e.ins.forEach((function(e){n.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})})),n.__inputs.forEach((function(t,n){!function(e,t,n){if(e.redeemScriptType!==h.MULTISIG||!e.redeemScript)return;if(e.pubKeys.length===e.signatures.length)return;const r=e.signatures.concat();e.signatures=e.pubKeys.map((function(i){const o=ECPair.fromPublicKey(i);let u;return r.some((function(i,c){if(!i)return!1;const p=s.signature.decode(i),a=t.hashForSignature(n,e.redeemScript,p.hashType);return!!o.verify(a,p.signature)&&(r[c]=void 0,u=i,!0)})),u}))}(t,e,n)})),n},P.prototype.addInput=function(e,t,n,i){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");let o;if("string"==typeof e)e=r.from(e,"hex").reverse();else if(e instanceof y){const n=e.outs[t];i=n.script,o=n.value,e=e.getHash()}return this.__addInputUnsafe(e,t,{sequence:n,prevOutScript:i,value:o})},P.prototype.__addInputUnsafe=function(e,t,n){if(y.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");const r=e.toString("hex")+":"+t;if(void 0!==this.__prevTxSet[r])throw new Error("Duplicate TxOut: "+r);let i={};if(void 0!==n.script&&(i=g(n.script,n.witness||[])),void 0!==n.value&&(i.value=n.value),!i.prevOutScript&&n.prevOutScript){let e;if(!i.pubKeys&&!i.signatures){const t=b(n.prevOutScript);t.pubKeys&&(i.pubKeys=t.pubKeys,i.signatures=t.signatures),e=t.scriptType}i.prevOutScript=n.prevOutScript,i.prevOutType=e||u.classifyOutput(n.prevOutScript)}const o=this.__tx.addInput(e,t,n.sequence,n.scriptSig);return this.__inputs[o]=i,this.__prevTxSet[r]=!0,o},P.prototype.addOutput=function(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=i.toOutputScript(e,this.network)),this.__tx.addOutput(e,t)},P.prototype.build=function(){return this.__build(!1)},P.prototype.buildIncomplete=function(){return this.__build(!0)},P.prototype.__build=function(e){if(!e){if(!this.__tx.ins.length)throw new Error("Transaction has no inputs");if(!this.__tx.outs.length)throw new Error("Transaction has no outputs")}const t=this.__tx.clone();if(this.__inputs.forEach((function(n,r){if(!(n.witnessScriptType||n.redeemScriptType||n.prevOutType)&&!e)throw new Error("Transaction is not complete");const i=function(e,t){let n=e.prevOutType,r=[],i=[];w(n)&&(r=E(n,e.signatures,e.pubKeys,t));let o=!1;if(n===u.types.P2SH){if(!t&&!m(e.redeemScriptType))throw new Error("Impossible to sign this type");w(e.redeemScriptType)&&(r=E(e.redeemScriptType,e.signatures,e.pubKeys,t)),e.redeemScriptType&&(o=!0,n=e.redeemScriptType)}switch(n){case u.types.P2WPKH:i=E(u.types.P2PKH,e.signatures,e.pubKeys,t);break;case u.types.P2WSH:if(!t&&!w(e.witnessScriptType))throw new Error("Impossible to sign this type");w(e.witnessScriptType)&&(i=E(e.witnessScriptType,e.signatures,e.pubKeys,t),i.push(e.witnessScript),n=e.witnessScriptType)}return o&&r.push(e.redeemScript),{type:n,script:s.compile(r),witness:i}}(n,e);if(!e&&!w(i.type)&&i.type!==u.types.P2WPKH)throw new Error(i.type+" not supported");t.setInputScript(r,i.script),t.setWitness(r,i.witness)})),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t},P.prototype.sign=function(e,t,n,r,i,o){if(t.network&&t.network!==this.network)throw new TypeError("Inconsistent network");if(!this.__inputs[e])throw new Error("No input at index: "+e);r=r||y.SIGHASH_ALL;const u=this.__inputs[e];if(void 0!==u.redeemScript&&n&&!u.redeemScript.equals(n))throw new Error("Inconsistent redeemScript");const c=t.publicKey||t.getPublicKey();if(!k(u)){if(void 0!==i){if(void 0!==u.value&&u.value!==i)throw new Error("Input didn't match witnessValue");a(f.Satoshi,i),u.value=i}if(k(u)||v(u,c,n,0,o),!k(u))throw Error(u.prevOutType+" not supported")}let p;p=u.witness?this.__tx.hashForWitnessV0(e,u.signScript,u.value,r):this.__tx.hashForSignature(e,u.signScript,r);if(!u.pubKeys.some((function(e,n){if(!c.equals(e))return!1;if(u.signatures[n])throw new Error("Signature already exists");if(33!==c.length&&(u.signType===h.P2WPKH||u.redeemScriptType===h.P2WSH||u.prevOutType===h.P2WSH))throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");const i=t.sign(p);return u.signatures[n]=s.signature.encode(i,r),!0})))throw new Error("Key pair cannot sign for this input")},P.prototype.__canModifyInputs=function(){return this.__inputs.every((function(e){return void 0===e.signatures||e.signatures.every((function(e){if(!e)return!0;return _(e)&y.SIGHASH_ANYONECANPAY}))}))},P.prototype.__canModifyOutputs=function(){const e=this.__tx.ins.length,t=this.__tx.outs.length;return this.__inputs.every((function(n){return void 0===n.signatures||n.signatures.every((function(n){if(!n)return!0;const r=31&_(n);return r===y.SIGHASH_NONE||(r===y.SIGHASH_SINGLE?e<=t:void 0)}))}))},P.prototype.__overMaximumFees=function(e){return(this.__inputs.reduce((function(e,t){return e+(t.value>>>0)}),0)-this.__tx.outs.reduce((function(e,t){return e+t.value}),0))/e>this.maximumFeeRate},e.exports=P},6774:function(e,t,n){let r=n(21).Buffer,i=n(74),o=n(6775),s=n(223),u=n(38),c=n(186),p=u.BufferN(32),a=u.compile({wif:u.UInt8,bip32:{public:u.UInt32,private:u.UInt32}}),f={wif:128,bip32:{public:76067358,private:76066276}};function h(e,t,n,r){u(a,r),this.__d=e||null,this.__Q=t||null,this.chainCode=n,this.depth=0,this.index=0,this.network=r,this.parentFingerprint=0}Object.defineProperty(h.prototype,"identifier",{get:function(){return o.hash160(this.publicKey)}}),Object.defineProperty(h.prototype,"fingerprint",{get:function(){return this.identifier.slice(0,4)}}),Object.defineProperty(h.prototype,"privateKey",{enumerable:!1,get:function(){return this.__d}}),Object.defineProperty(h.prototype,"publicKey",{get:function(){return this.__Q||(this.__Q=s.pointFromScalar(this.__d,this.compressed)),this.__Q}}),h.prototype.isNeutered=function(){return null===this.__d},h.prototype.neutered=function(){let e=m(this.publicKey,this.chainCode,this.network);return e.depth=this.depth,e.index=this.index,e.parentFingerprint=this.parentFingerprint,e},h.prototype.toBase58=function(){let e=this.network,t=this.isNeutered()?e.bip32.public:e.bip32.private,n=r.allocUnsafe(78);return n.writeUInt32BE(t,0),n.writeUInt8(this.depth,4),n.writeUInt32BE(this.parentFingerprint,5),n.writeUInt32BE(this.index,9),this.chainCode.copy(n,13),this.isNeutered()?this.publicKey.copy(n,45):(n.writeUInt8(0,45),this.privateKey.copy(n,46)),i.encode(n)},h.prototype.toWIF=function(){if(!this.privateKey)throw new TypeError("Missing private key");return c.encode(this.network.wif,this.privateKey,!0)};h.prototype.derive=function(e){u(u.UInt32,e);let t=e>=2147483648,n=r.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");n[0]=0,this.privateKey.copy(n,1),n.writeUInt32BE(e,33)}else this.publicKey.copy(n,0),n.writeUInt32BE(e,33);let i,c=o.hmacSHA512(this.chainCode,n),p=c.slice(0,32),a=c.slice(32);if(!s.isPrivate(p))return this.derive(e+1);if(this.isNeutered()){let t=s.pointAddScalar(this.publicKey,p,!0);if(null===t)return this.derive(e+1);i=m(t,a,this.network)}else{let t=s.privateAdd(this.privateKey,p);if(null==t)return this.derive(e+1);i=w(t,a,this.network)}return i.depth=this.depth+1,i.index=e,i.parentFingerprint=this.fingerprint.readUInt32BE(0),i};let l=Math.pow(2,31)-1;function d(e){return u.UInt32(e)&&e<=l}function y(e){return u.String(e)&&e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function w(e,t,n){if(u({privateKey:p,chainCode:p},{privateKey:e,chainCode:t}),n=n||f,!s.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new h(e,null,t,n)}function m(e,t,n){if(u({publicKey:u.BufferN(33),chainCode:p},{publicKey:e,chainCode:t}),n=n||f,!s.isPoint(e))throw new TypeError("Point is not on the curve");return new h(null,e,t,n)}h.prototype.deriveHardened=function(e){return u(d,e),this.derive(e+2147483648)},h.prototype.derivePath=function(e){u(y,e);let t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce((function(e,t){let n;return"'"===t.slice(-1)?(n=parseInt(t.slice(0,-1),10),e.deriveHardened(n)):(n=parseInt(t,10),e.derive(n))}),this)},h.prototype.sign=function(e){return s.sign(e,this.privateKey)},h.prototype.verify=function(e,t){return s.verify(e,this.publicKey,t)},e.exports={fromBase58:function(e,t){let n=i.decode(e);if(78!==n.length)throw new TypeError("Invalid buffer length");t=t||f;let r=n.readUInt32BE(0);if(r!==t.bip32.private&&r!==t.bip32.public)throw new TypeError("Invalid network version");let o=n[4],s=n.readUInt32BE(5);if(0===o&&0!==s)throw new TypeError("Invalid parent fingerprint");let u=n.readUInt32BE(9);if(0===o&&0!==u)throw new TypeError("Invalid index");let c,p=n.slice(13,45);if(r===t.bip32.private){if(0!==n.readUInt8(45))throw new TypeError("Invalid private key");c=w(n.slice(46,78),p,t)}else{c=m(n.slice(45,78),p,t)}return c.depth=o,c.index=u,c.parentFingerprint=s,c},fromPrivateKey:w,fromPublicKey:m,fromSeed:function(e,t){if(u(u.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");t=t||f;let n=o.hmacSHA512("Bitcoin seed",e);return w(n.slice(0,32),n.slice(32),t)}}},6775:function(e,t,n){let r=n(83),i=n(271);e.exports={hash160:function(e){return r("rmd160").update(r("sha256").update(e).digest()).digest()},hmacSHA512:function(e,t){return i("sha512",e).update(t).digest()}}},6776:function(e,t,n){const r=n(6777),i=n(6778),o=n(6779),s=n(6780),u=n(6781),c=n(6782);e.exports={p2ms:r,p2pk:i,p2pkh:o,p2sh:s,p2wpkh:u,p2wsh:c}},6777:function(e,t,n){let r=n(4720),i=n(38),o=n(120),s=n(223),u=n(4358),c=n(4527).bitcoin,p=o.OP_RESERVED;function a(e,t){return e.length===t.length&&e.every((function(e,n){return e.equals(t[n])}))}e.exports=function(e,t){if(!(e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function n(e){return u.isCanonicalScriptSignature(e)||t.allowIncomplete&&e===o.OP_0}t=t||{validate:!0},i({network:i.maybe(i.Object),m:i.maybe(i.Number),n:i.maybe(i.Number),output:i.maybe(i.Buffer),pubkeys:i.maybe(i.arrayOf(s.isPoint)),signatures:i.maybe(i.arrayOf(n)),input:i.maybe(i.Buffer)},e);let f,h={network:e.network||c},l=!1;function d(e){if(l)return;l=!0,f=u.decompile(e);let t=f[0]-p,n=f[f.length-2]-p;h.m=t,h.n=n,h.pubkeys=f.slice(1,-2)}if(r.prop(h,"output",(function(){if(e.m&&h.n&&e.pubkeys)return u.compile([].concat(p+e.m,e.pubkeys,p+h.n,o.OP_CHECKMULTISIG))})),r.prop(h,"m",(function(){if(h.output)return d(h.output),h.m})),r.prop(h,"n",(function(){if(h.pubkeys)return h.pubkeys.length})),r.prop(h,"pubkeys",(function(){if(e.output)return d(e.output),h.pubkeys})),r.prop(h,"signatures",(function(){if(e.input)return u.decompile(e.input).slice(1)})),r.prop(h,"input",(function(){if(e.signatures)return u.compile([o.OP_0].concat(e.signatures))})),r.prop(h,"witness",(function(){if(h.input)return[]})),t.validate){if(e.output){if(d(e.output),!i.Number(f[0]))throw new TypeError("Output is invalid");if(!i.Number(f[f.length-2]))throw new TypeError("Output is invalid");if(f[f.length-1]!==o.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(h.m<=0||h.n>16||h.m>h.n||h.n!==f.length-3)throw new TypeError("Output is invalid");if(!h.pubkeys.every(e=>s.isPoint(e)))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==h.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==h.n)throw new TypeError("n mismatch");if(e.pubkeys&&!a(e.pubkeys,h.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(h.n=e.pubkeys.length,h.n<h.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<h.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>h.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==o.OP_0)throw new TypeError("Input is invalid");if(0===h.signatures.length||!h.signatures.every(n))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!a(e.signatures.equals(h.signatures)))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(h,e)}},6778:function(e,t,n){let r=n(4720),i=n(38),o=n(120),s=n(223),u=n(4358),c=n(4527).bitcoin;e.exports=function(e,t){if(!(e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=t||{validate:!0},i({network:i.maybe(i.Object),output:i.maybe(i.Buffer),pubkey:i.maybe(s.isPoint),signature:i.maybe(u.isCanonicalScriptSignature),input:i.maybe(i.Buffer)},e);let n=r.value((function(){return u.decompile(e.input)})),p={network:e.network||c};if(r.prop(p,"output",(function(){if(e.pubkey)return u.compile([e.pubkey,o.OP_CHECKSIG])})),r.prop(p,"pubkey",(function(){if(e.output)return e.output.slice(1,-1)})),r.prop(p,"signature",(function(){if(e.input)return n()[0]})),r.prop(p,"input",(function(){if(e.signature)return u.compile([e.signature])})),r.prop(p,"witness",(function(){if(p.input)return[]})),t.validate){if(e.pubkey&&e.output&&!e.pubkey.equals(p.pubkey))throw new TypeError("Pubkey mismatch");if(e.output){if(e.output[e.output.length-1]!==o.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!s.isPoint(p.pubkey))throw new TypeError("Output pubkey is invalid")}if(e.signature&&e.input&&!e.input.equals(p.input))throw new TypeError("Input mismatch");if(e.input){if(1!==n().length)throw new TypeError("Input is invalid");if(!u.isCanonicalScriptSignature(n()[0]))throw new TypeError("Input has invalid signature")}}return Object.assign(p,e)}},6779:function(e,t,n){let r=n(4720),i=n(38),o=n(120),s=n(223),u=n(4719),c=n(4608),p=n(4358),a=n(4527).bitcoin;e.exports=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=t||{validate:!0},i({network:i.maybe(i.Object),address:i.maybe(i.String),hash:i.maybe(i.BufferN(20)),output:i.maybe(i.BufferN(25)),pubkey:i.maybe(s.isPoint),signature:i.maybe(p.isCanonicalScriptSignature),input:i.maybe(i.Buffer)},e);let n=r.value((function(){return u.fromBase58Check(e.address)})),f=r.value((function(){return p.decompile(e.input)})),h=e.network||a,l={network:h};if(r.prop(l,"address",(function(){if(l.hash)return u.toBase58Check(l.hash,h.pubKeyHash)})),r.prop(l,"hash",(function(){return e.output?e.output.slice(3,23):e.address?n().hash:e.pubkey||l.pubkey?c.hash160(e.pubkey||l.pubkey):void 0})),r.prop(l,"output",(function(){if(l.hash)return p.compile([o.OP_DUP,o.OP_HASH160,l.hash,o.OP_EQUALVERIFY,o.OP_CHECKSIG])})),r.prop(l,"pubkey",(function(){if(e.input)return f()[1]})),r.prop(l,"signature",(function(){if(e.input)return f()[0]})),r.prop(l,"input",(function(){if(e.pubkey&&e.signature)return p.compile([e.signature,e.pubkey])})),r.prop(l,"witness",(function(){if(l.input)return[]})),t.validate){let t;if(e.address){if(n().version!==h.pubKeyHash)throw new TypeError("Network mismatch");if(20!==n().hash.length)throw new TypeError("Invalid address");t=n().hash}if(e.hash){if(t&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==o.OP_DUP||e.output[1]!==o.OP_HASH160||20!==e.output[2]||e.output[23]!==o.OP_EQUALVERIFY||e.output[24]!==o.OP_CHECKSIG)throw new TypeError("Output is invalid");if(t&&!t.equals(e.output.slice(3,23)))throw new TypeError("Hash mismatch");t=e.output.slice(3,23)}if(e.pubkey){let n=c.hash160(e.pubkey);if(t&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.input){let n=f();if(2!==n.length)throw new TypeError("Input is invalid");if(!p.isCanonicalScriptSignature(n[0]))throw new TypeError("Input has invalid signature");if(!s.isPoint(n[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(n[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(n[1]))throw new TypeError("Pubkey mismatch");let r=c.hash160(n[1]);if(t&&!t.equals(r))throw new TypeError("Hash mismatch")}}return Object.assign(l,e)}},6780:function(e,t,n){const r=n(4720),i=n(38),o=n(120),s=n(4719),u=n(4608),c=n(4358),p=n(4527).bitcoin;e.exports=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=t||{validate:!0},i({network:i.maybe(i.Object),address:i.maybe(i.String),hash:i.maybe(i.BufferN(20)),output:i.maybe(i.BufferN(23)),redeem:i.maybe({network:i.maybe(i.Object),output:i.maybe(i.Buffer),input:i.maybe(i.Buffer),witness:i.maybe(i.arrayOf(i.Buffer))}),input:i.maybe(i.Buffer),witness:i.maybe(i.arrayOf(i.Buffer))},e);const n=e.network||p,a={network:n},f=r.value((function(){return s.fromBase58Check(e.address)})),h=r.value((function(){return c.decompile(e.input)})),l=r.value((function(){const t=h();return{network:n,output:t[t.length-1],input:c.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(r.prop(a,"address",(function(){if(a.hash)return s.toBase58Check(a.hash,n.scriptHash)})),r.prop(a,"hash",(function(){return e.output?e.output.slice(2,22):e.address?f().hash:a.redeem&&a.redeem.output?u.hash160(a.redeem.output):void 0})),r.prop(a,"output",(function(){if(a.hash)return c.compile([o.OP_HASH160,a.hash,o.OP_EQUAL])})),r.prop(a,"redeem",(function(){if(e.input)return l()})),r.prop(a,"input",(function(){if(e.redeem&&e.redeem.input&&e.redeem.output)return c.compile([].concat(c.decompile(e.redeem.input),e.redeem.output))})),r.prop(a,"witness",(function(){return a.redeem&&a.redeem.witness?a.redeem.witness:a.input?[]:void 0})),t.validate){let t;if(e.address){if(f().version!==n.scriptHash)throw new TypeError("Network mismatch");if(20!==f().hash.length)throw new TypeError("Invalid address");t=f().hash}if(e.hash){if(t&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==o.OP_HASH160||20!==e.output[1]||e.output[22]!==o.OP_EQUAL)throw new TypeError("Output is invalid");const n=e.output.slice(2,22);if(t&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}const r=function(e){if(e.output){const n=c.decompile(e.output);if(!n||n.length<1)throw new TypeError("Redeem.output too short");const r=u.hash160(e.output);if(t&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.input){const t=e.input.length>0,n=e.witness&&e.witness.length>0;if(!t&&!n)throw new TypeError("Empty input");if(t&&n)throw new TypeError("Input and witness provided");if(t){const t=c.decompile(e.input);if(!c.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=h();if(!e||e.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(l().output))throw new TypeError("Input is invalid");r(l())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==n)throw new TypeError("Network mismatch");if(a.redeem){if(e.redeem.output&&!e.redeem.output.equals(a.redeem.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(a.redeem.input))throw new TypeError("Redeem.input mismatch")}r(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((function(e,n){return e.equals(t[n])}))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(a,e)}},6781:function(e,t,n){let r=n(4720),i=n(38),o=n(120),s=n(223),u=n(4719),c=n(4608),p=n(4358),a=n(4527).bitcoin,f=Buffer.alloc(0);e.exports=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=t||{validate:!0},i({address:i.maybe(i.String),hash:i.maybe(i.BufferN(20)),input:i.maybe(i.BufferN(0)),network:i.maybe(i.Object),output:i.maybe(i.BufferN(22)),pubkey:i.maybe(s.isPoint),signature:i.maybe(p.isCanonicalScriptSignature),witness:i.maybe(i.arrayOf(i.Buffer))},e);let n=r.value((function(){return u.fromBech32(e.address)})),h=e.network||a,l={network:h};if(r.prop(l,"address",(function(){if(l.hash)return u.toBech32(l.hash,0,h.bech32)})),r.prop(l,"hash",(function(){return e.output?e.output.slice(2,22):e.address?n().data:e.pubkey||l.pubkey?c.hash160(e.pubkey||l.pubkey):void 0})),r.prop(l,"output",(function(){if(l.hash)return p.compile([o.OP_0,l.hash])})),r.prop(l,"pubkey",(function(){return e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0})),r.prop(l,"signature",(function(){if(e.witness)return e.witness[0]})),r.prop(l,"input",(function(){if(l.witness)return f})),r.prop(l,"witness",(function(){if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),t.validate){let t;if(e.address){if(h&&h.bech32!==n().prefix)throw new TypeError("Network mismatch");if(0!==n().version)throw new TypeError("Invalid version");if(20!==n().data.length)throw new TypeError("Invalid data");if(t&&!t.equals(n().data))throw new TypeError("Hash mismatch");t=n().data}if(e.pubkey){let n=c.hash160(e.pubkey);if(t&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.hash){if(t&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==o.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t&&!t.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.witness){if(2!==e.witness.length)throw new TypeError("Input is invalid");if(!p.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Input has invalid signature");if(!s.isPoint(e.witness[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");let n=c.hash160(e.witness[1]);if(t&&!t.equals(n))throw new TypeError("Hash mismatch")}}return Object.assign(l,e)}},6782:function(e,t,n){let r=n(4720),i=n(38),o=n(120),s=n(4719),u=n(4608),c=n(4358),p=n(4527).bitcoin,a=Buffer.alloc(0);e.exports=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=t||{validate:!0},i({network:i.maybe(i.Object),address:i.maybe(i.String),hash:i.maybe(i.BufferN(32)),output:i.maybe(i.BufferN(34)),redeem:i.maybe({input:i.maybe(i.Buffer),network:i.maybe(i.Object),output:i.maybe(i.Buffer),witness:i.maybe(i.arrayOf(i.Buffer))}),input:i.maybe(i.BufferN(0)),witness:i.maybe(i.arrayOf(i.Buffer))},e);let n=r.value((function(){return s.fromBech32(e.address)})),f=r.value((function(){return c.decompile(e.redeem.input)})),h=e.network||p,l={network:h};if(r.prop(l,"address",(function(){if(l.hash)return s.toBech32(l.hash,0,h.bech32)})),r.prop(l,"hash",(function(){return e.output?e.output.slice(2):e.address?s.fromBech32(e.address).data:l.redeem&&l.redeem.output?u.sha256(l.redeem.output):void 0})),r.prop(l,"output",(function(){if(l.hash)return c.compile([o.OP_0,l.hash])})),r.prop(l,"redeem",(function(){if(e.witness)return{output:e.witness[e.witness.length-1],input:a,witness:e.witness.slice(0,-1)}})),r.prop(l,"input",(function(){if(l.witness)return a})),r.prop(l,"witness",(function(){if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=c.toStack(f());return l.redeem=Object.assign({witness:t},e.redeem),l.redeem.input=a,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),t.validate){let t;if(e.address){if(n().prefix!==h.bech32)throw new TypeError("Network mismatch");if(0!==n().version)throw new TypeError("Invalid version");if(32!==n().data.length)throw new TypeError("Invalid data");t=n().data}if(e.hash){if(t&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==o.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const n=e.output.slice(2);if(t&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem){if(e.redeem.network&&e.redeem.network!==h)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===c.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");let n=u.sha256(e.redeem.output);if(t&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem.input&&!c.isPushOnly(f()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((function(e,n){return e.equals(t[n])}))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch")}if(e.witness&&e.redeem&&e.redeem.output&&!e.redeem.output.equals(e.witness[e.witness.length-1]))throw new TypeError("Witness and redeem.output mismatch")}return Object.assign(l,e)}}}]);